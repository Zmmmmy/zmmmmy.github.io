<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zmmmmy.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":"auto","version":"8.27.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Reactor API 参考Project Reactor 提供了丰富的操作符，本文按功能分类整理。  一、创建操作符Mono 创建   API 说明 示例    Mono.just(T) 创建包含单个值的 Mono Mono.just(&quot;hello&quot;)   Mono.empty() 创建空的 Mono Mono.empty()   Mono.error(Throwable)">
<meta property="og:type" content="article">
<meta property="og:title" content="Reactor API参考">
<meta property="og:url" content="https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/index.html">
<meta property="og:site_name" content="Zmmmmy&#39;s Blog">
<meta property="og:description" content="Reactor API 参考Project Reactor 提供了丰富的操作符，本文按功能分类整理。  一、创建操作符Mono 创建   API 说明 示例    Mono.just(T) 创建包含单个值的 Mono Mono.just(&quot;hello&quot;)   Mono.empty() 创建空的 Mono Mono.empty()   Mono.error(Throwable)">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2026-01-09T16:00:00.000Z">
<meta property="article:modified_time" content="2026-01-22T07:44:14.962Z">
<meta property="article:author" content="ZhiMy">
<meta property="article:tag" content="API">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="ReactiveStreams">
<meta property="article:tag" content="Reactor">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="操作符">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/","path":"2026/01/10/Reactor API参考/","title":"Reactor API参考"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Reactor API参考 | Zmmmmy's Blog</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zmmmmy's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">今天想和 AI 聊点什么？</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Reactor-API-%E5%8F%82%E8%80%83"><span class="nav-number">1.</span> <span class="nav-text">Reactor API 参考</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BA%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.1.</span> <span class="nav-text">一、创建操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mono-%E5%88%9B%E5%BB%BA"><span class="nav-number">1.1.1.</span> <span class="nav-text">Mono 创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flux-%E5%88%9B%E5%BB%BA"><span class="nav-number">1.1.2.</span> <span class="nav-text">Flux 创建</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.2.</span> <span class="nav-text">二、转换操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%BD%AC%E6%8D%A2"><span class="nav-number">1.2.1.</span> <span class="nav-text">基本转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#flatMap-%E5%8F%98%E4%BD%93%E5%AF%B9%E6%AF%94"><span class="nav-number">1.2.2.</span> <span class="nav-text">flatMap 变体对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E8%BF%87%E6%BB%A4%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.3.</span> <span class="nav-text">三、过滤操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E7%BB%84%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.4.</span> <span class="nav-text">四、组合操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%AF%B9%E6%AF%94"><span class="nav-number">1.4.1.</span> <span class="nav-text">组合操作符对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.5.</span> <span class="nav-text">五、错误处理操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E5%89%AF%E4%BD%9C%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6%EF%BC%88doOn-%E7%B3%BB%E5%88%97%EF%BC%89"><span class="nav-number">1.6.</span> <span class="nav-text">六、副作用操作符（doOn 系列）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E8%B0%83%E5%BA%A6%E5%99%A8%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.7.</span> <span class="nav-text">七、调度器操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.7.1.</span> <span class="nav-text">调度器类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E7%BC%93%E5%86%B2%E4%B8%8E%E7%AA%97%E5%8F%A3%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.8.</span> <span class="nav-text">八、缓冲与窗口操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%EF%BC%88%E6%94%B6%E9%9B%86%E4%B8%BA-List%EF%BC%89"><span class="nav-number">1.8.1.</span> <span class="nav-text">缓冲（收集为 List）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%EF%BC%88%E6%94%B6%E9%9B%86%E4%B8%BA-Flux%EF%BC%89"><span class="nav-number">1.8.2.</span> <span class="nav-text">窗口（收集为 Flux）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84"><span class="nav-number">1.8.3.</span> <span class="nav-text">分组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.9.</span> <span class="nav-text">九、聚合操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E6%97%B6%E9%97%B4%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.10.</span> <span class="nav-text">十、时间操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%83%8C%E5%8E%8B%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.11.</span> <span class="nav-text">十一、背压操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E6%9D%A1%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.12.</span> <span class="nav-text">十二、条件操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E8%B0%83%E8%AF%95%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.13.</span> <span class="nav-text">十三、调试操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E4%B8%8A%E4%B8%8B%E6%96%87%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.14.</span> <span class="nav-text">十四、上下文操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%94%E3%80%81Mono-%E7%89%B9%E6%9C%89%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">1.15.</span> <span class="nav-text">十五、Mono 特有操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%85%AD%E3%80%81Sinks%EF%BC%88%E6%89%8B%E5%8A%A8%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="nav-number">1.16.</span> <span class="nav-text">十六、Sinks（手动发送数据）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Sinks-Many%EF%BC%88%E5%A4%9A%E5%80%BC%EF%BC%89"><span class="nav-number">1.16.1.</span> <span class="nav-text">Sinks.Many（多值）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sinks-One%EF%BC%88%E5%8D%95%E5%80%BC%EF%BC%89"><span class="nav-number">1.16.2.</span> <span class="nav-text">Sinks.One（单值）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sinks-Empty%EF%BC%88%E6%97%A0%E5%80%BC%EF%BC%89"><span class="nav-number">1.16.3.</span> <span class="nav-text">Sinks.Empty（无值）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5"><span class="nav-number">1.17.</span> <span class="nav-text">相关链接</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhiMy"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZhiMy</p>
  <div class="site-description" itemprop="description">一个来自于 AI+Obsidian 的知识库</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Zmmmmy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Zmmmmy" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="一个来自于 AI+Obsidian 的知识库">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Reactor API参考 | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Reactor API参考
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/Reactive-Streams/" itemprop="url" rel="index"><span itemprop="name">Reactive Streams</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Reactor-API-参考"><a href="#Reactor-API-参考" class="headerlink" title="Reactor API 参考"></a>Reactor API 参考</h1><p>Project Reactor 提供了丰富的操作符，本文按功能分类整理。</p>
<hr>
<h2 id="一、创建操作符"><a href="#一、创建操作符" class="headerlink" title="一、创建操作符"></a>一、创建操作符</h2><h3 id="Mono-创建"><a href="#Mono-创建" class="headerlink" title="Mono 创建"></a>Mono 创建</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>Mono.just(T)</code></td>
<td>创建包含单个值的 Mono</td>
<td><code>Mono.just(&quot;hello&quot;)</code></td>
</tr>
<tr>
<td><code>Mono.empty()</code></td>
<td>创建空的 Mono</td>
<td><code>Mono.empty()</code></td>
</tr>
<tr>
<td><code>Mono.error(Throwable)</code></td>
<td>创建错误 Mono</td>
<td><code>Mono.error(new RuntimeException())</code></td>
</tr>
<tr>
<td><code>Mono.never()</code></td>
<td>永不发出信号的 Mono</td>
<td><code>Mono.never()</code></td>
</tr>
<tr>
<td><code>Mono.defer(Supplier)</code></td>
<td>延迟创建，每次订阅都执行</td>
<td><code>Mono.defer(() -&gt; Mono.just(getValue()))</code></td>
</tr>
<tr>
<td><code>Mono.fromCallable(Callable)</code></td>
<td>从 Callable 创建</td>
<td><code>Mono.fromCallable(() -&gt; compute())</code></td>
</tr>
<tr>
<td><code>Mono.fromSupplier(Supplier)</code></td>
<td>从 Supplier 创建</td>
<td><code>Mono.fromSupplier(() -&gt; getValue())</code></td>
</tr>
<tr>
<td><code>Mono.fromFuture(CompletableFuture)</code></td>
<td>从 Future 创建</td>
<td><code>Mono.fromFuture(future)</code></td>
</tr>
<tr>
<td><code>Mono.fromRunnable(Runnable)</code></td>
<td>从 Runnable 创建（无返回值）</td>
<td><code>Mono.fromRunnable(() -&gt; doSomething())</code></td>
</tr>
<tr>
<td><code>Mono.delay(Duration)</code></td>
<td>延迟后发出 0L</td>
<td><code>Mono.delay(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>Mono.create(Consumer&lt;MonoSink&gt;)</code></td>
<td>编程式创建</td>
<td>见下方示例</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mono.create 示例</span></span><br><span class="line">Mono.create(sink -&gt; &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> doAsyncWork();</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="literal">null</span>) &#123;</span><br><span class="line">        sink.success(result);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        sink.error(<span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;失败&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Flux-创建"><a href="#Flux-创建" class="headerlink" title="Flux 创建"></a>Flux 创建</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>Flux.just(T...)</code></td>
<td>从多个值创建</td>
<td><code>Flux.just(1, 2, 3)</code></td>
</tr>
<tr>
<td><code>Flux.fromIterable(Iterable)</code></td>
<td>从集合创建</td>
<td><code>Flux.fromIterable(list)</code></td>
</tr>
<tr>
<td><code>Flux.fromArray(T[])</code></td>
<td>从数组创建</td>
<td><code>Flux.fromArray(array)</code></td>
</tr>
<tr>
<td><code>Flux.fromStream(Stream)</code></td>
<td>从 Stream 创建</td>
<td><code>Flux.fromStream(stream)</code></td>
</tr>
<tr>
<td><code>Flux.range(int, int)</code></td>
<td>创建整数序列</td>
<td><code>Flux.range(1, 10)</code></td>
</tr>
<tr>
<td><code>Flux.interval(Duration)</code></td>
<td>定时发出递增数字</td>
<td><code>Flux.interval(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>Flux.empty()</code></td>
<td>创建空 Flux</td>
<td><code>Flux.empty()</code></td>
</tr>
<tr>
<td><code>Flux.error(Throwable)</code></td>
<td>创建错误 Flux</td>
<td><code>Flux.error(new Exception())</code></td>
</tr>
<tr>
<td><code>Flux.never()</code></td>
<td>永不发出信号</td>
<td><code>Flux.never()</code></td>
</tr>
<tr>
<td><code>Flux.defer(Supplier)</code></td>
<td>延迟创建</td>
<td><code>Flux.defer(() -&gt; Flux.just(getData()))</code></td>
</tr>
<tr>
<td><code>Flux.generate(Consumer)</code></td>
<td>同步生成（一次一个）</td>
<td>见下方示例</td>
</tr>
<tr>
<td><code>Flux.create(Consumer)</code></td>
<td>异步生成（可多个）</td>
<td>见下方示例</td>
</tr>
<tr>
<td><code>Flux.push(Consumer)</code></td>
<td>单线程异步生成</td>
<td>类似 create</td>
</tr>
<tr>
<td><code>Flux.using(Callable, Function, Consumer)</code></td>
<td>资源管理</td>
<td>见下方示例</td>
</tr>
<tr>
<td><code>Flux.concat(Publisher...)</code></td>
<td>顺序连接多个流</td>
<td><code>Flux.concat(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.merge(Publisher...)</code></td>
<td>并行合并多个流</td>
<td><code>Flux.merge(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.zip(Publisher...)</code></td>
<td>组合多个流</td>
<td><code>Flux.zip(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.combineLatest(Publisher...)</code></td>
<td>组合最新值</td>
<td>见下方示例</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Flux.generate 示例 - 同步生成</span></span><br><span class="line">Flux.generate(</span><br><span class="line">    () -&gt; <span class="number">0</span>,  <span class="comment">// 初始状态</span></span><br><span class="line">    (state, sink) -&gt; &#123;</span><br><span class="line">        sink.next(<span class="string">&quot;值: &quot;</span> + state);</span><br><span class="line">        <span class="keyword">if</span> (state == <span class="number">10</span>) sink.complete();</span><br><span class="line">        <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flux.create 示例 - 异步生成</span></span><br><span class="line">Flux.create(sink -&gt; &#123;</span><br><span class="line">    eventSource.onData(data -&gt; sink.next(data));</span><br><span class="line">    eventSource.onError(e -&gt; sink.error(e));</span><br><span class="line">    eventSource.onComplete(() -&gt; sink.complete());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flux.using 示例 - 资源管理</span></span><br><span class="line">Flux.using(</span><br><span class="line">    () -&gt; <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file.txt&quot;</span>),  <span class="comment">// 创建资源</span></span><br><span class="line">    inputStream -&gt; Flux.just(readData(inputStream)),  <span class="comment">// 使用资源</span></span><br><span class="line">    inputStream -&gt; inputStream.close()  <span class="comment">// 关闭资源</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="二、转换操作符"><a href="#二、转换操作符" class="headerlink" title="二、转换操作符"></a>二、转换操作符</h2><h3 id="基本转换"><a href="#基本转换" class="headerlink" title="基本转换"></a>基本转换</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>map(Function)</code></td>
<td>同步转换每个元素</td>
<td><code>flux.map(i -&gt; i * 2)</code></td>
</tr>
<tr>
<td><code>flatMap(Function)</code></td>
<td>异步转换，结果合并（无序）</td>
<td><code>flux.flatMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>flatMapSequential(Function)</code></td>
<td>异步转换，保持顺序</td>
<td><code>flux.flatMapSequential(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>concatMap(Function)</code></td>
<td>异步转换，顺序执行</td>
<td><code>flux.concatMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>switchMap(Function)</code></td>
<td>切换到新流，取消旧流</td>
<td><code>flux.switchMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>cast(Class)</code></td>
<td>类型转换</td>
<td><code>flux.cast(String.class)</code></td>
</tr>
<tr>
<td><code>ofType(Class)</code></td>
<td>过滤并转换类型</td>
<td><code>flux.ofType(String.class)</code></td>
</tr>
<tr>
<td><code>index()</code></td>
<td>添加索引</td>
<td><code>flux.index()</code> → <code>Tuple2&lt;Long, T&gt;</code></td>
</tr>
<tr>
<td><code>timestamp()</code></td>
<td>添加时间戳</td>
<td><code>flux.timestamp()</code> → <code>Tuple2&lt;Long, T&gt;</code></td>
</tr>
<tr>
<td><code>elapsed()</code></td>
<td>添加时间间隔</td>
<td><code>flux.elapsed()</code></td>
</tr>
</tbody></table>
<h3 id="flatMap-变体对比"><a href="#flatMap-变体对比" class="headerlink" title="flatMap 变体对比"></a>flatMap 变体对比</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flatMap:           并行执行，结果无序</span><br><span class="line">flatMapSequential: 并行执行，结果有序</span><br><span class="line">concatMap:         顺序执行，结果有序</span><br><span class="line">switchMap:         切换新流，取消旧流</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flatMap vs concatMap</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .flatMap(i -&gt; Mono.just(i).delayElement(Duration.ofMillis(<span class="number">100</span> - i * <span class="number">30</span>)))</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 可能输出: 3, 2, 1</span></span><br><span class="line"></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .concatMap(i -&gt; Mono.just(i).delayElement(Duration.ofMillis(<span class="number">100</span>)))</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 输出: 1, 2, 3</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="三、过滤操作符"><a href="#三、过滤操作符" class="headerlink" title="三、过滤操作符"></a>三、过滤操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>filter(Predicate)</code></td>
<td>过滤元素</td>
<td><code>flux.filter(i -&gt; i &gt; 5)</code></td>
</tr>
<tr>
<td><code>filterWhen(Function)</code></td>
<td>异步过滤</td>
<td><code>flux.filterWhen(i -&gt; checkAsync(i))</code></td>
</tr>
<tr>
<td><code>distinct()</code></td>
<td>去重</td>
<td><code>flux.distinct()</code></td>
</tr>
<tr>
<td><code>distinctUntilChanged()</code></td>
<td>连续去重</td>
<td><code>flux.distinctUntilChanged()</code></td>
</tr>
<tr>
<td><code>take(long)</code></td>
<td>取前 n 个</td>
<td><code>flux.take(5)</code></td>
</tr>
<tr>
<td><code>takeLast(int)</code></td>
<td>取最后 n 个</td>
<td><code>flux.takeLast(3)</code></td>
</tr>
<tr>
<td><code>takeUntil(Predicate)</code></td>
<td>取直到条件满足</td>
<td><code>flux.takeUntil(i -&gt; i &gt; 10)</code></td>
</tr>
<tr>
<td><code>takeWhile(Predicate)</code></td>
<td>取当条件满足时</td>
<td><code>flux.takeWhile(i -&gt; i &lt; 10)</code></td>
</tr>
<tr>
<td><code>skip(long)</code></td>
<td>跳过前 n 个</td>
<td><code>flux.skip(5)</code></td>
</tr>
<tr>
<td><code>skipLast(int)</code></td>
<td>跳过最后 n 个</td>
<td><code>flux.skipLast(3)</code></td>
</tr>
<tr>
<td><code>skipUntil(Predicate)</code></td>
<td>跳过直到条件满足</td>
<td><code>flux.skipUntil(i -&gt; i &gt; 5)</code></td>
</tr>
<tr>
<td><code>skipWhile(Predicate)</code></td>
<td>跳过当条件满足时</td>
<td><code>flux.skipWhile(i -&gt; i &lt; 5)</code></td>
</tr>
<tr>
<td><code>first()</code></td>
<td>取第一个（已废弃）</td>
<td>使用 <code>next()</code></td>
</tr>
<tr>
<td><code>next()</code></td>
<td>取第一个，返回 Mono</td>
<td><code>flux.next()</code></td>
</tr>
<tr>
<td><code>last()</code></td>
<td>取最后一个</td>
<td><code>flux.last()</code></td>
</tr>
<tr>
<td><code>last(T)</code></td>
<td>取最后一个，有默认值</td>
<td><code>flux.last(defaultValue)</code></td>
</tr>
<tr>
<td><code>single()</code></td>
<td>期望只有一个元素</td>
<td><code>flux.single()</code></td>
</tr>
<tr>
<td><code>singleOrEmpty()</code></td>
<td>期望 0 或 1 个元素</td>
<td><code>flux.singleOrEmpty()</code></td>
</tr>
<tr>
<td><code>elementAt(int)</code></td>
<td>取指定位置元素</td>
<td><code>flux.elementAt(5)</code></td>
</tr>
<tr>
<td><code>ignoreElements()</code></td>
<td>忽略所有元素</td>
<td><code>flux.ignoreElements()</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="四、组合操作符"><a href="#四、组合操作符" class="headerlink" title="四、组合操作符"></a>四、组合操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>concat(Publisher...)</code></td>
<td>顺序连接</td>
<td><code>Flux.concat(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>concatWith(Publisher)</code></td>
<td>与另一个流连接</td>
<td><code>flux1.concatWith(flux2)</code></td>
</tr>
<tr>
<td><code>merge(Publisher...)</code></td>
<td>并行合并</td>
<td><code>Flux.merge(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>mergeWith(Publisher)</code></td>
<td>与另一个流合并</td>
<td><code>flux1.mergeWith(flux2)</code></td>
</tr>
<tr>
<td><code>mergeSequential(Publisher...)</code></td>
<td>并行执行，顺序输出</td>
<td><code>Flux.mergeSequential(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>zip(Publisher...)</code></td>
<td>一对一组合</td>
<td><code>Flux.zip(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>zipWith(Publisher)</code></td>
<td>与另一个流组合</td>
<td><code>flux1.zipWith(flux2)</code></td>
</tr>
<tr>
<td><code>zipWith(Publisher, BiFunction)</code></td>
<td>组合并转换</td>
<td><code>flux1.zipWith(flux2, (a, b) -&gt; a + b)</code></td>
</tr>
<tr>
<td><code>combineLatest(Publisher...)</code></td>
<td>组合最新值</td>
<td><code>Flux.combineLatest(flux1, flux2, combiner)</code></td>
</tr>
<tr>
<td><code>startWith(T...)</code></td>
<td>在开头添加元素</td>
<td><code>flux.startWith(0)</code></td>
</tr>
<tr>
<td><code>and(Publisher)</code></td>
<td>等待两个都完成</td>
<td><code>mono1.and(mono2)</code></td>
</tr>
<tr>
<td><code>when(Publisher...)</code></td>
<td>等待所有完成</td>
<td><code>Mono.when(mono1, mono2)</code></td>
</tr>
<tr>
<td><code>then()</code></td>
<td>忽略元素，只关心完成</td>
<td><code>flux.then()</code></td>
</tr>
<tr>
<td><code>thenMany(Publisher)</code></td>
<td>完成后切换到另一个流</td>
<td><code>mono.thenMany(flux)</code></td>
</tr>
<tr>
<td><code>thenReturn(T)</code></td>
<td>完成后返回固定值</td>
<td><code>mono.thenReturn(&quot;done&quot;)</code></td>
</tr>
</tbody></table>
<h3 id="组合操作符对比"><a href="#组合操作符对比" class="headerlink" title="组合操作符对比"></a>组合操作符对比</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">concat:  A完成 → B开始，顺序执行</span><br><span class="line">merge:   A和B同时执行，谁快谁先输出</span><br><span class="line">zip:     A和B一对一配对，(a1,b1), (a2,b2)...</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// zip 示例</span></span><br><span class="line">Flux&lt;String&gt; names = Flux.just(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>);</span><br><span class="line">Flux&lt;Integer&gt; ages = Flux.just(<span class="number">25</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">Flux.zip(names, ages, (name, age) -&gt; name + <span class="string">&quot;: &quot;</span> + age)</span><br><span class="line">    .subscribe(System.out::println);</span><br><span class="line"><span class="comment">// 输出: 张三: 25, 李四: 30</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="五、错误处理操作符"><a href="#五、错误处理操作符" class="headerlink" title="五、错误处理操作符"></a>五、错误处理操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>onErrorReturn(T)</code></td>
<td>错误时返回默认值</td>
<td><code>flux.onErrorReturn(defaultValue)</code></td>
</tr>
<tr>
<td><code>onErrorReturn(Predicate, T)</code></td>
<td>特定错误返回默认值</td>
<td><code>flux.onErrorReturn(e -&gt; e instanceof IOException, default)</code></td>
</tr>
<tr>
<td><code>onErrorResume(Function)</code></td>
<td>错误时切换到备用流</td>
<td><code>flux.onErrorResume(e -&gt; backupFlux)</code></td>
</tr>
<tr>
<td><code>onErrorMap(Function)</code></td>
<td>转换错误类型</td>
<td><code>flux.onErrorMap(e -&gt; new CustomException(e))</code></td>
</tr>
<tr>
<td><code>onErrorContinue(BiConsumer)</code></td>
<td>错误时跳过继续</td>
<td><code>flux.onErrorContinue((e, v) -&gt; log.error(e))</code></td>
</tr>
<tr>
<td><code>onErrorStop()</code></td>
<td>错误时停止</td>
<td><code>flux.onErrorStop()</code></td>
</tr>
<tr>
<td><code>doOnError(Consumer)</code></td>
<td>错误时执行副作用</td>
<td><code>flux.doOnError(e -&gt; log.error(e))</code></td>
</tr>
<tr>
<td><code>retry()</code></td>
<td>无限重试</td>
<td><code>flux.retry()</code></td>
</tr>
<tr>
<td><code>retry(long)</code></td>
<td>重试 n 次</td>
<td><code>flux.retry(3)</code></td>
</tr>
<tr>
<td><code>retryWhen(Retry)</code></td>
<td>自定义重试策略</td>
<td>见下方示例</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// retryWhen 示例</span></span><br><span class="line">flux.retryWhen(Retry.backoff(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>))</span><br><span class="line">    .maxBackoff(Duration.ofSeconds(<span class="number">10</span>))</span><br><span class="line">    .filter(e -&gt; e <span class="keyword">instanceof</span> IOException)</span><br><span class="line">    .onRetryExhaustedThrow((spec, signal) -&gt; signal.failure())</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指数退避重试</span></span><br><span class="line">flux.retryWhen(Retry.backoff(<span class="number">5</span>, Duration.ofMillis(<span class="number">100</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 固定间隔重试</span></span><br><span class="line">flux.retryWhen(Retry.fixedDelay(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>)));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="六、副作用操作符（doOn-系列）"><a href="#六、副作用操作符（doOn-系列）" class="headerlink" title="六、副作用操作符（doOn 系列）"></a>六、副作用操作符（doOn 系列）</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>触发时机</th>
</tr>
</thead>
<tbody><tr>
<td><code>doOnNext(Consumer)</code></td>
<td>每个元素</td>
<td>onNext 信号</td>
</tr>
<tr>
<td><code>doOnError(Consumer)</code></td>
<td>发生错误</td>
<td>onError 信号</td>
</tr>
<tr>
<td><code>doOnComplete(Runnable)</code></td>
<td>完成时</td>
<td>onComplete 信号</td>
</tr>
<tr>
<td><code>doOnSubscribe(Consumer)</code></td>
<td>订阅时</td>
<td>onSubscribe 信号</td>
</tr>
<tr>
<td><code>doOnRequest(LongConsumer)</code></td>
<td>请求数据时</td>
<td>request 信号</td>
</tr>
<tr>
<td><code>doOnCancel(Runnable)</code></td>
<td>取消时</td>
<td>cancel 信号</td>
</tr>
<tr>
<td><code>doOnTerminate(Runnable)</code></td>
<td>终止时（完成或错误）</td>
<td>onComplete 或 onError</td>
</tr>
<tr>
<td><code>doAfterTerminate(Runnable)</code></td>
<td>终止后</td>
<td>终止信号发送后</td>
</tr>
<tr>
<td><code>doOnEach(Consumer&lt;Signal&gt;)</code></td>
<td>每个信号</td>
<td>所有信号</td>
</tr>
<tr>
<td><code>doFirst(Runnable)</code></td>
<td>订阅前</td>
<td>订阅链建立前</td>
</tr>
<tr>
<td><code>doFinally(Consumer&lt;SignalType&gt;)</code></td>
<td>最终执行</td>
<td>任何终止情况</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整的生命周期监控</span></span><br><span class="line">flux</span><br><span class="line">    .doFirst(() -&gt; log.info(<span class="string">&quot;开始&quot;</span>))</span><br><span class="line">    .doOnSubscribe(s -&gt; log.info(<span class="string">&quot;订阅&quot;</span>))</span><br><span class="line">    .doOnRequest(n -&gt; log.info(<span class="string">&quot;请求: &quot;</span> + n))</span><br><span class="line">    .doOnNext(v -&gt; log.info(<span class="string">&quot;收到: &quot;</span> + v))</span><br><span class="line">    .doOnError(e -&gt; log.error(<span class="string">&quot;错误&quot;</span>, e))</span><br><span class="line">    .doOnComplete(() -&gt; log.info(<span class="string">&quot;完成&quot;</span>))</span><br><span class="line">    .doOnCancel(() -&gt; log.info(<span class="string">&quot;取消&quot;</span>))</span><br><span class="line">    .doOnTerminate(() -&gt; log.info(<span class="string">&quot;终止&quot;</span>))</span><br><span class="line">    .doAfterTerminate(() -&gt; log.info(<span class="string">&quot;终止后&quot;</span>))</span><br><span class="line">    .doFinally(type -&gt; log.info(<span class="string">&quot;最终: &quot;</span> + type))</span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="七、调度器操作符"><a href="#七、调度器操作符" class="headerlink" title="七、调度器操作符"></a>七、调度器操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>subscribeOn(Scheduler)</code></td>
<td>指定订阅线程</td>
<td><code>flux.subscribeOn(Schedulers.boundedElastic())</code></td>
</tr>
<tr>
<td><code>publishOn(Scheduler)</code></td>
<td>指定发布线程</td>
<td><code>flux.publishOn(Schedulers.parallel())</code></td>
</tr>
</tbody></table>
<h3 id="调度器类型"><a href="#调度器类型" class="headerlink" title="调度器类型"></a>调度器类型</h3><table>
<thead>
<tr>
<th>Scheduler</th>
<th>说明</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>Schedulers.immediate()</code></td>
<td>当前线程</td>
<td>测试、简单场景</td>
</tr>
<tr>
<td><code>Schedulers.single()</code></td>
<td>单线程</td>
<td>顺序执行</td>
</tr>
<tr>
<td><code>Schedulers.parallel()</code></td>
<td>并行线程池（CPU核心数）</td>
<td>CPU 密集型</td>
</tr>
<tr>
<td><code>Schedulers.boundedElastic()</code></td>
<td>弹性线程池（有上限）</td>
<td>I&#x2F;O 密集型、阻塞操作</td>
</tr>
<tr>
<td><code>Schedulers.fromExecutor(Executor)</code></td>
<td>自定义线程池</td>
<td>特殊需求</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// subscribeOn vs publishOn</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;生成: &quot;</span> + i))  <span class="comment">// boundedElastic 线程</span></span><br><span class="line">    .subscribeOn(Schedulers.boundedElastic())</span><br><span class="line">    .publishOn(Schedulers.parallel())</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;处理: &quot;</span> + i))  <span class="comment">// parallel 线程</span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="八、缓冲与窗口操作符"><a href="#八、缓冲与窗口操作符" class="headerlink" title="八、缓冲与窗口操作符"></a>八、缓冲与窗口操作符</h2><h3 id="缓冲（收集为-List）"><a href="#缓冲（收集为-List）" class="headerlink" title="缓冲（收集为 List）"></a>缓冲（收集为 List）</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>buffer()</code></td>
<td>收集所有元素</td>
<td><code>flux.buffer()</code> → <code>Flux&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>buffer(int)</code></td>
<td>按数量缓冲</td>
<td><code>flux.buffer(10)</code></td>
</tr>
<tr>
<td><code>buffer(Duration)</code></td>
<td>按时间缓冲</td>
<td><code>flux.buffer(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>buffer(int, int)</code></td>
<td>滑动窗口缓冲</td>
<td><code>flux.buffer(3, 1)</code></td>
</tr>
<tr>
<td><code>bufferUntil(Predicate)</code></td>
<td>缓冲直到条件满足</td>
<td><code>flux.bufferUntil(i -&gt; i % 10 == 0)</code></td>
</tr>
<tr>
<td><code>bufferWhile(Predicate)</code></td>
<td>缓冲当条件满足时</td>
<td><code>flux.bufferWhile(i -&gt; i &lt; 10)</code></td>
</tr>
<tr>
<td><code>bufferTimeout(int, Duration)</code></td>
<td>数量或时间触发</td>
<td><code>flux.bufferTimeout(100, Duration.ofSeconds(1))</code></td>
</tr>
</tbody></table>
<h3 id="窗口（收集为-Flux）"><a href="#窗口（收集为-Flux）" class="headerlink" title="窗口（收集为 Flux）"></a>窗口（收集为 Flux）</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>window(int)</code></td>
<td>按数量分窗口</td>
<td><code>flux.window(10)</code> → <code>Flux&lt;Flux&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>window(Duration)</code></td>
<td>按时间分窗口</td>
<td><code>flux.window(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>windowUntil(Predicate)</code></td>
<td>分窗口直到条件满足</td>
<td><code>flux.windowUntil(i -&gt; i % 10 == 0)</code></td>
</tr>
</tbody></table>
<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>groupBy(Function)</code></td>
<td>按 key 分组</td>
<td><code>flux.groupBy(User::getType)</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// groupBy 示例</span></span><br><span class="line">flux.groupBy(user -&gt; user.getType())</span><br><span class="line">    .flatMap(group -&gt; group</span><br><span class="line">        .collectList()</span><br><span class="line">        .map(list -&gt; group.key() + <span class="string">&quot;: &quot;</span> + list.size())</span><br><span class="line">    )</span><br><span class="line">    .subscribe(System.out::println);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="九、聚合操作符"><a href="#九、聚合操作符" class="headerlink" title="九、聚合操作符"></a>九、聚合操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>返回类型</th>
</tr>
</thead>
<tbody><tr>
<td><code>count()</code></td>
<td>计数</td>
<td><code>Mono&lt;Long&gt;</code></td>
</tr>
<tr>
<td><code>reduce(BiFunction)</code></td>
<td>归约</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>reduce(T, BiFunction)</code></td>
<td>带初始值归约</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>reduceWith(Supplier, BiFunction)</code></td>
<td>延迟初始值归约</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>scan(BiFunction)</code></td>
<td>累积（发出中间结果）</td>
<td><code>Flux&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>scan(T, BiFunction)</code></td>
<td>带初始值累积</td>
<td><code>Flux&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>collect(Collector)</code></td>
<td>收集到集合</td>
<td><code>Mono&lt;R&gt;</code></td>
</tr>
<tr>
<td><code>collectList()</code></td>
<td>收集为 List</td>
<td><code>Mono&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMap(Function)</code></td>
<td>收集为 Map</td>
<td><code>Mono&lt;Map&lt;K, T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMap(Function, Function)</code></td>
<td>收集为 Map（指定 value）</td>
<td><code>Mono&lt;Map&lt;K, V&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMultimap(Function)</code></td>
<td>收集为 Multimap</td>
<td><code>Mono&lt;Map&lt;K, Collection&lt;T&gt;&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectSortedList()</code></td>
<td>收集为排序 List</td>
<td><code>Mono&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>all(Predicate)</code></td>
<td>是否全部满足</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>any(Predicate)</code></td>
<td>是否有满足的</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>hasElements()</code></td>
<td>是否有元素</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>hasElement(T)</code></td>
<td>是否包含元素</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reduce 示例</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .reduce((a, b) -&gt; a + b)</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// scan 示例（发出中间结果）</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .scan((a, b) -&gt; a + b)</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 1, 3, 6, 10, 15</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="十、时间操作符"><a href="#十、时间操作符" class="headerlink" title="十、时间操作符"></a>十、时间操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>delayElements(Duration)</code></td>
<td>延迟每个元素</td>
<td><code>flux.delayElements(Duration.ofMillis(100))</code></td>
</tr>
<tr>
<td><code>delaySequence(Duration)</code></td>
<td>延迟整个序列</td>
<td><code>flux.delaySequence(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>delaySubscription(Duration)</code></td>
<td>延迟订阅</td>
<td><code>flux.delaySubscription(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>timeout(Duration)</code></td>
<td>超时</td>
<td><code>flux.timeout(Duration.ofSeconds(5))</code></td>
</tr>
<tr>
<td><code>timeout(Duration, Publisher)</code></td>
<td>超时后切换</td>
<td><code>flux.timeout(Duration.ofSeconds(5), backupFlux)</code></td>
</tr>
<tr>
<td><code>sample(Duration)</code></td>
<td>采样</td>
<td><code>flux.sample(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>sampleFirst(Duration)</code></td>
<td>采样第一个</td>
<td><code>flux.sampleFirst(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>throttleFirst(Duration)</code></td>
<td>节流（取第一个）</td>
<td><code>flux.throttleFirst(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>throttleLast(Duration)</code></td>
<td>节流（取最后一个）</td>
<td><code>flux.throttleLast(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>elapsed()</code></td>
<td>添加时间间隔</td>
<td><code>flux.elapsed()</code></td>
</tr>
<tr>
<td><code>timed()</code></td>
<td>添加时间信息</td>
<td><code>flux.timed()</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="十一、背压操作符"><a href="#十一、背压操作符" class="headerlink" title="十一、背压操作符"></a>十一、背压操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>onBackpressureBuffer()</code></td>
<td>无限缓冲</td>
<td><code>flux.onBackpressureBuffer()</code></td>
</tr>
<tr>
<td><code>onBackpressureBuffer(int)</code></td>
<td>有限缓冲</td>
<td><code>flux.onBackpressureBuffer(100)</code></td>
</tr>
<tr>
<td><code>onBackpressureBuffer(int, Consumer)</code></td>
<td>缓冲满时回调</td>
<td><code>flux.onBackpressureBuffer(100, v -&gt; log.warn(&quot;溢出&quot;))</code></td>
</tr>
<tr>
<td><code>onBackpressureDrop()</code></td>
<td>丢弃</td>
<td><code>flux.onBackpressureDrop()</code></td>
</tr>
<tr>
<td><code>onBackpressureDrop(Consumer)</code></td>
<td>丢弃并回调</td>
<td><code>flux.onBackpressureDrop(v -&gt; log.warn(&quot;丢弃: &quot; + v))</code></td>
</tr>
<tr>
<td><code>onBackpressureLatest()</code></td>
<td>只保留最新</td>
<td><code>flux.onBackpressureLatest()</code></td>
</tr>
<tr>
<td><code>onBackpressureError()</code></td>
<td>抛出异常</td>
<td><code>flux.onBackpressureError()</code></td>
</tr>
<tr>
<td><code>limitRate(int)</code></td>
<td>限制请求速率</td>
<td><code>flux.limitRate(100)</code></td>
</tr>
<tr>
<td><code>limitRequest(long)</code></td>
<td>限制总请求数</td>
<td><code>flux.limitRequest(1000)</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="十二、条件操作符"><a href="#十二、条件操作符" class="headerlink" title="十二、条件操作符"></a>十二、条件操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>defaultIfEmpty(T)</code></td>
<td>空时返回默认值</td>
<td><code>flux.defaultIfEmpty(defaultValue)</code></td>
</tr>
<tr>
<td><code>switchIfEmpty(Publisher)</code></td>
<td>空时切换到另一个流</td>
<td><code>flux.switchIfEmpty(backupFlux)</code></td>
</tr>
<tr>
<td><code>repeatWhen(Function)</code></td>
<td>条件重复</td>
<td><code>flux.repeatWhen(companion -&gt; companion.take(3))</code></td>
</tr>
<tr>
<td><code>repeat()</code></td>
<td>无限重复</td>
<td><code>flux.repeat()</code></td>
</tr>
<tr>
<td><code>repeat(long)</code></td>
<td>重复 n 次</td>
<td><code>flux.repeat(3)</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="十三、调试操作符"><a href="#十三、调试操作符" class="headerlink" title="十三、调试操作符"></a>十三、调试操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>log()</code></td>
<td>打印所有信号</td>
<td><code>flux.log()</code></td>
</tr>
<tr>
<td><code>log(String)</code></td>
<td>带前缀打印</td>
<td><code>flux.log(&quot;MyFlux&quot;)</code></td>
</tr>
<tr>
<td><code>log(String, Level)</code></td>
<td>指定日志级别</td>
<td><code>flux.log(&quot;MyFlux&quot;, Level.FINE)</code></td>
</tr>
<tr>
<td><code>checkpoint()</code></td>
<td>添加检查点（调试用）</td>
<td><code>flux.checkpoint(&quot;after filter&quot;)</code></td>
</tr>
<tr>
<td><code>checkpoint(String)</code></td>
<td>带描述的检查点</td>
<td><code>flux.checkpoint(&quot;处理后&quot;)</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调试示例</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .log(<span class="string">&quot;源数据&quot;</span>)</span><br><span class="line">    .filter(i -&gt; i &gt; <span class="number">2</span>)</span><br><span class="line">    .log(<span class="string">&quot;过滤后&quot;</span>)</span><br><span class="line">    .map(i -&gt; i * <span class="number">2</span>)</span><br><span class="line">    .log(<span class="string">&quot;转换后&quot;</span>)</span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="十四、上下文操作符"><a href="#十四、上下文操作符" class="headerlink" title="十四、上下文操作符"></a>十四、上下文操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>contextWrite(Context)</code></td>
<td>写入上下文</td>
<td><code>flux.contextWrite(Context.of(&quot;key&quot;, &quot;value&quot;))</code></td>
</tr>
<tr>
<td><code>contextWrite(Function)</code></td>
<td>修改上下文</td>
<td><code>flux.contextWrite(ctx -&gt; ctx.put(&quot;key&quot;, &quot;value&quot;))</code></td>
</tr>
<tr>
<td><code>deferContextual(Function)</code></td>
<td>读取上下文创建流</td>
<td>见下方示例</td>
</tr>
<tr>
<td><code>transformDeferredContextual(BiFunction)</code></td>
<td>转换时读取上下文</td>
<td>见下方示例</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Context 示例 - 传递请求 ID</span></span><br><span class="line">Mono.deferContextual(ctx -&gt; &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">requestId</span> <span class="operator">=</span> ctx.get(<span class="string">&quot;requestId&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> callService(requestId);</span><br><span class="line">&#125;)</span><br><span class="line">.contextWrite(Context.of(<span class="string">&quot;requestId&quot;</span>, UUID.randomUUID().toString()))</span><br><span class="line">.subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="十五、Mono-特有操作符"><a href="#十五、Mono-特有操作符" class="headerlink" title="十五、Mono 特有操作符"></a>十五、Mono 特有操作符</h2><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>block()</code></td>
<td>阻塞获取结果</td>
<td><code>mono.block()</code></td>
</tr>
<tr>
<td><code>block(Duration)</code></td>
<td>带超时阻塞</td>
<td><code>mono.block(Duration.ofSeconds(5))</code></td>
</tr>
<tr>
<td><code>toFuture()</code></td>
<td>转为 CompletableFuture</td>
<td><code>mono.toFuture()</code></td>
</tr>
<tr>
<td><code>cache()</code></td>
<td>缓存结果</td>
<td><code>mono.cache()</code></td>
</tr>
<tr>
<td><code>cache(Duration)</code></td>
<td>带过期时间缓存</td>
<td><code>mono.cache(Duration.ofMinutes(5))</code></td>
</tr>
<tr>
<td><code>flux()</code></td>
<td>转为 Flux</td>
<td><code>mono.flux()</code></td>
</tr>
<tr>
<td><code>zipWhen(Function)</code></td>
<td>与依赖结果组合</td>
<td><code>mono.zipWhen(v -&gt; fetchRelated(v))</code></td>
</tr>
<tr>
<td><code>delayUntil(Function)</code></td>
<td>延迟直到另一个完成</td>
<td><code>mono.delayUntil(v -&gt; saveAsync(v))</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="十六、Sinks（手动发送数据）"><a href="#十六、Sinks（手动发送数据）" class="headerlink" title="十六、Sinks（手动发送数据）"></a>十六、Sinks（手动发送数据）</h2><h3 id="Sinks-Many（多值）"><a href="#Sinks-Many（多值）" class="headerlink" title="Sinks.Many（多值）"></a>Sinks.Many（多值）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单播 - 只能有一个订阅者</span></span><br><span class="line">Sinks.Many&lt;String&gt; unicast = Sinks.many().unicast().onBackpressureBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多播 - 多个订阅者</span></span><br><span class="line">Sinks.Many&lt;String&gt; multicast = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重放 - 新订阅者可收到历史数据</span></span><br><span class="line">Sinks.Many&lt;String&gt; replay = Sinks.many().replay().all();</span><br><span class="line">Sinks.Many&lt;String&gt; replayLimit = Sinks.many().replay().limit(<span class="number">10</span>);</span><br><span class="line">Sinks.Many&lt;String&gt; replayLatest = Sinks.many().replay().latest();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送数据</span></span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">sink.emitNext(<span class="string">&quot;data&quot;</span>, Sinks.EmitFailureHandler.FAIL_FAST);</span><br><span class="line">sink.tryEmitComplete();</span><br><span class="line">sink.tryEmitError(<span class="keyword">new</span> <span class="title class_">Exception</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为 Flux 使用</span></span><br><span class="line">Flux&lt;String&gt; flux = sink.asFlux();</span><br></pre></td></tr></table></figure>

<h3 id="Sinks-One（单值）"><a href="#Sinks-One（单值）" class="headerlink" title="Sinks.One（单值）"></a>Sinks.One（单值）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sinks.One&lt;String&gt; one = Sinks.one();</span><br><span class="line">one.tryEmitValue(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">Mono&lt;String&gt; mono = one.asMono();</span><br></pre></td></tr></table></figure>

<h3 id="Sinks-Empty（无值）"><a href="#Sinks-Empty（无值）" class="headerlink" title="Sinks.Empty（无值）"></a>Sinks.Empty（无值）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sinks.Empty&lt;Void&gt; empty = Sinks.empty();</span><br><span class="line">empty.tryEmitEmpty();</span><br><span class="line">Mono&lt;Void&gt; mono = empty.asMono();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><ul>
<li>Project Reactor 实现</li>
<li>源码解析</li>
<li>WebFlux - Reactor核心API</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>ZhiMy
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/" title="Reactor API参考">https://zmmmmy.github.io/2026/01/10/Reactor API参考/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/Spring/" rel="tag"># Spring</a>
              <a href="/tags/ReactiveStreams/" rel="tag"># ReactiveStreams</a>
              <a href="/tags/Reactor/" rel="tag"># Reactor</a>
              <a href="/tags/API/" rel="tag"># API</a>
              <a href="/tags/%E6%93%8D%E4%BD%9C%E7%AC%A6/" rel="tag"># 操作符</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2026/01/10/Reactor%E6%A0%B8%E5%BF%83API/" rel="prev" title="Reactor核心API">
                  <i class="fa fa-angle-left"></i> Reactor核心API
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2026/01/10/Reactive%20Streams%E8%A7%84%E8%8C%83/" rel="next" title="Reactive Streams规范">
                  Reactive Streams规范 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZhiMy</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

<style>
.theme-toggle {
  position: fixed;
  right: 20px;
  bottom: 100px;
  z-index: 9999;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  transition: all 0.3s ease;
  background: var(--content-bg-color);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}
.theme-toggle:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}
.theme-toggle .icon-sun,
.theme-toggle .icon-moon {
  position: absolute;
  transition: opacity 0.3s ease, transform 0.3s ease;
}
[data-theme="dark"] .theme-toggle .icon-sun {
  opacity: 1;
  transform: rotate(0deg);
}
[data-theme="dark"] .theme-toggle .icon-moon {
  opacity: 0;
  transform: rotate(-90deg);
}
[data-theme="light"] .theme-toggle .icon-sun {
  opacity: 0;
  transform: rotate(90deg);
}
[data-theme="light"] .theme-toggle .icon-moon {
  opacity: 1;
  transform: rotate(0deg);
}
/* 默认状态（跟随系统） */
.theme-toggle .icon-sun {
  opacity: 0;
}
.theme-toggle .icon-moon {
  opacity: 1;
}
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) .theme-toggle .icon-sun {
    opacity: 1;
    transform: rotate(0deg);
  }
  :root:not([data-theme="light"]) .theme-toggle .icon-moon {
    opacity: 0;
    transform: rotate(-90deg);
  }
}
</style>

<button class="theme-toggle" id="theme-toggle" aria-label="切换明暗模式">
  <span class="icon-sun">☀️</span>
  <span class="icon-moon">🌙</span>
</button>

<script>
(function() {
  const toggle = document.getElementById('theme-toggle');
  const root = document.documentElement;

  // 获取保存的主题或系统偏好
  function getPreferredTheme() {
    const saved = localStorage.getItem('theme');
    if (saved) return saved;
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  }

  // 应用主题
  function applyTheme(theme) {
    root.setAttribute('data-theme', theme);
    root.style.colorScheme = theme;
  }

  // 初始化
  const currentTheme = localStorage.getItem('theme');
  if (currentTheme) {
    applyTheme(currentTheme);
  }

  // 切换主题
  toggle.addEventListener('click', function() {
    const current = root.getAttribute('data-theme') || getPreferredTheme();
    const next = current === 'dark' ? 'light' : 'dark';
    applyTheme(next);
    localStorage.setItem('theme', next);
  });

  // 监听系统主题变化（仅在用户未手动设置时生效）
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
    if (!localStorage.getItem('theme')) {
      applyTheme(e.matches ? 'dark' : 'light');
    }
  });
})();
</script>

</body>
</html>
