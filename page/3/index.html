<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 8.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zmmmmy.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.27.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
<meta property="og:type" content="website">
<meta property="og:title" content="Zmmmmy&#39;s Blog">
<meta property="og:url" content="https://zmmmmy.github.io/page/3/index.html">
<meta property="og:site_name" content="Zmmmmy&#39;s Blog">
<meta property="og:description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ZhiMy">
<meta property="article:tag" content="æŠ€æœ¯åšå®¢">
<meta property="article:tag" content="ç¼–ç¨‹">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zmmmmy.github.io/page/3/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zmmmmy's Blog</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><script src="/js/bookmark.js" defer></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.5.0/search.js" integrity="sha256-xFC6PJ82SL9b3WkGjFavNiA9gm5z6UBxWPiu4CYjptg=" crossorigin="anonymous" defer></script>
<script src="/js/third-party/search/local-search.js" defer></script>







  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zmmmmy's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸ªäººæŠ€æœ¯åšå®¢</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZhiMy"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZhiMy</p>
  <div class="site-description" itemprop="description">è®°å½•å­¦ä¹ ä¸æˆé•¿</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">100</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Zmmmmy" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;Zmmmmy" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/12/%E4%B8%89%E5%85%83%E7%BB%84%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/12/%E4%B8%89%E5%85%83%E7%BB%84%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">ä¸‰å…ƒç»„è¯¦è§£</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-12 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-12T00:00:00+08:00">2026-01-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®åº“</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">å›¾æ•°æ®åº“</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¸‰å…ƒç»„è¯¦è§£"><a href="#ä¸‰å…ƒç»„è¯¦è§£" class="headerlink" title="ä¸‰å…ƒç»„è¯¦è§£"></a>ä¸‰å…ƒç»„è¯¦è§£</h1><h2 id="ä»€ä¹ˆæ˜¯ä¸‰å…ƒç»„"><a href="#ä»€ä¹ˆæ˜¯ä¸‰å…ƒç»„" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸‰å…ƒç»„"></a>ä»€ä¹ˆæ˜¯ä¸‰å…ƒç»„</h2><p>ä¸‰å…ƒç»„ï¼ˆTripleï¼‰æ˜¯ <strong>RDF å›¾æ•°æ®åº“</strong> ä¸­çš„åŸºæœ¬æ•°æ®å­˜å‚¨å•å…ƒï¼Œç”¨äºè¡¨è¾¾ä¸€ä¸ªå®Œæ•´çš„äº‹å®é™ˆè¿°ã€‚</p>
<h3 id="ä¸‰å…ƒç»„ç»„æˆ"><a href="#ä¸‰å…ƒç»„ç»„æˆ" class="headerlink" title="ä¸‰å…ƒç»„ç»„æˆ"></a>ä¸‰å…ƒç»„ç»„æˆ</h3><table>
<thead>
<tr>
<th>ç»„æˆéƒ¨åˆ†</th>
<th>è‹±æ–‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä¸»è¯­</strong></td>
<td>Subject</td>
<td>è¢«æè¿°çš„å®ä½“æˆ–èµ„æº</td>
</tr>
<tr>
<td><strong>è°“è¯­</strong></td>
<td>Predicate</td>
<td>å…³ç³»æˆ–å±æ€§</td>
</tr>
<tr>
<td><strong>å®¾è¯­</strong></td>
<td>Object</td>
<td>å±æ€§å€¼æˆ–å…³è”çš„å¦ä¸€ä¸ªå®ä½“</td>
</tr>
</tbody></table>
<h3 id="åŸºæœ¬å½¢å¼"><a href="#åŸºæœ¬å½¢å¼" class="headerlink" title="åŸºæœ¬å½¢å¼"></a>åŸºæœ¬å½¢å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Subject, Predicate, Object)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰å…ƒç»„ç¤ºä¾‹"><a href="#ä¸‰å…ƒç»„ç¤ºä¾‹" class="headerlink" title="ä¸‰å…ƒç»„ç¤ºä¾‹"></a>ä¸‰å…ƒç»„ç¤ºä¾‹</h2><h3 id="è¡¨ç¤ºå…³ç³»"><a href="#è¡¨ç¤ºå…³ç³»" class="headerlink" title="è¡¨ç¤ºå…³ç³»"></a>è¡¨ç¤ºå…³ç³»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(å¼ ä¸‰, è®¤è¯†, æå››)</span><br><span class="line">(åŒ—äº¬, æ˜¯é¦–éƒ½, ä¸­å›½)</span><br><span class="line">(Java, å±äº, ç¼–ç¨‹è¯­è¨€)</span><br></pre></td></tr></table></figure>

<h3 id="è¡¨ç¤ºå±æ€§"><a href="#è¡¨ç¤ºå±æ€§" class="headerlink" title="è¡¨ç¤ºå±æ€§"></a>è¡¨ç¤ºå±æ€§</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(å¼ ä¸‰, å¹´é¾„, 25)</span><br><span class="line">(å¼ ä¸‰, èŒä¸š, &quot;è½¯ä»¶å·¥ç¨‹å¸ˆ&quot;)</span><br><span class="line">(åŒ—äº¬, äººå£, 21540000)</span><br></pre></td></tr></table></figure>

<h2 id="æ ¸å¿ƒç‰¹ç‚¹"><a href="#æ ¸å¿ƒç‰¹ç‚¹" class="headerlink" title="æ ¸å¿ƒç‰¹ç‚¹"></a>æ ¸å¿ƒç‰¹ç‚¹</h2><ul>
<li><strong>åŸå­æ€§</strong>ï¼šæ¯ä¸ªä¸‰å…ƒç»„è¡¨è¾¾ä¸€ä¸ªç‹¬ç«‹ã€ä¸å¯åˆ†å‰²çš„äº‹å®</li>
<li><strong>å¯ç»„åˆ</strong>ï¼šå¤šä¸ªä¸‰å…ƒç»„é€šè¿‡å…±äº«èŠ‚ç‚¹å½¢æˆå¤æ‚çš„çŸ¥è¯†å›¾è°±</li>
<li><strong>è¯­ä¹‰æ˜ç¡®</strong>ï¼šè°“è¯­ç²¾ç¡®å®šä¹‰äº†ä¸»è¯­å’Œå®¾è¯­ä¹‹é—´çš„å…³ç³»</li>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šéµå¾ª W3C RDF æ ‡å‡†ï¼Œå…·æœ‰è‰¯å¥½çš„äº’æ“ä½œæ€§</li>
</ul>
<h2 id="ä¸‰å…ƒç»„-vs-å±æ€§å›¾"><a href="#ä¸‰å…ƒç»„-vs-å±æ€§å›¾" class="headerlink" title="ä¸‰å…ƒç»„ vs å±æ€§å›¾"></a>ä¸‰å…ƒç»„ vs å±æ€§å›¾</h2><p>å›¾æ•°æ®åº“åˆ†ä¸ºä¸¤å¤§æµæ´¾ï¼š<strong>RDF å›¾æ•°æ®åº“</strong>å’Œ<strong>å±æ€§å›¾æ•°æ®åº“</strong>ï¼Œè™½ç„¶éƒ½æ˜¯å›¾æ•°æ®åº“ï¼Œä½†æ•°æ®æ¨¡å‹ä¸åŒã€‚ğŸ‘‰è¯¦è§£ ^model-comparison</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>ä¸‰å…ƒç»„æ¨¡å‹ï¼ˆRDFï¼‰</th>
<th>å±æ€§å›¾æ¨¡å‹</th>
</tr>
</thead>
<tbody><tr>
<td>ä»£è¡¨æ•°æ®åº“</td>
<td>Apache Jenaã€Stardog</td>
<td>Neo4jã€JanusGraph</td>
</tr>
<tr>
<td>è¾¹çš„å±æ€§</td>
<td>éœ€è¦é¢å¤–ä¸‰å…ƒç»„è¡¨ç¤ºï¼ˆå…·ä½“åŒ–ï¼‰</td>
<td>è¾¹å¯ç›´æ¥é™„åŠ å±æ€§</td>
</tr>
<tr>
<td>æŸ¥è¯¢è¯­è¨€</td>
<td>SPARQL</td>
<td>Cypherã€Gremlin</td>
</tr>
<tr>
<td>æ ‡å‡†åŒ–ç¨‹åº¦</td>
<td>W3C æ ‡å‡†</td>
<td>æ— ç»Ÿä¸€æ ‡å‡†</td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>è¯­ä¹‰ç½‘ã€æœ¬ä½“å»ºæ¨¡</td>
<td>ç¤¾äº¤ç½‘ç»œã€æ¨èç³»ç»Ÿ</td>
</tr>
</tbody></table>
<h2 id="RDF-ä¸‰å…ƒç»„è¡¨ç¤ºæ³•"><a href="#RDF-ä¸‰å…ƒç»„è¡¨ç¤ºæ³•" class="headerlink" title="RDF ä¸‰å…ƒç»„è¡¨ç¤ºæ³•"></a>RDF ä¸‰å…ƒç»„è¡¨ç¤ºæ³•</h2><h3 id="N-Triples-æ ¼å¼"><a href="#N-Triples-æ ¼å¼" class="headerlink" title="N-Triples æ ¼å¼"></a>N-Triples æ ¼å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;http://example.org/å¼ ä¸‰&gt; &lt;http://example.org/è®¤è¯†&gt; &lt;http://example.org/æå››&gt; .</span><br><span class="line">&lt;http://example.org/å¼ ä¸‰&gt; &lt;http://example.org/å¹´é¾„&gt; &quot;25&quot;^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt; .</span><br></pre></td></tr></table></figure>

<h3 id="Turtle-æ ¼å¼"><a href="#Turtle-æ ¼å¼" class="headerlink" title="Turtle æ ¼å¼"></a>Turtle æ ¼å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@prefix ex: &lt;http://example.org/&gt; .</span><br><span class="line">@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .</span><br><span class="line"></span><br><span class="line">ex:å¼ ä¸‰ ex:è®¤è¯† ex:æå›› ;</span><br><span class="line">        ex:å¹´é¾„ &quot;25&quot;^^xsd:integer .</span><br></pre></td></tr></table></figure>

<h2 id="SPARQL-æŸ¥è¯¢ç¤ºä¾‹"><a href="#SPARQL-æŸ¥è¯¢ç¤ºä¾‹" class="headerlink" title="SPARQL æŸ¥è¯¢ç¤ºä¾‹"></a>SPARQL æŸ¥è¯¢ç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢å¼ ä¸‰è®¤è¯†çš„æ‰€æœ‰äºº</span><br><span class="line">SELECT ?person</span><br><span class="line">WHERE &#123;</span><br><span class="line">    ex:å¼ ä¸‰ ex:è®¤è¯† ?person .</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å¤§äº20çš„äºº</span><br><span class="line">SELECT ?person ?age</span><br><span class="line">WHERE &#123;</span><br><span class="line">    ?person ex:å¹´é¾„ ?age .</span><br><span class="line">    FILTER (?age &gt; 20)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰å…ƒç»„åœ¨çŸ¥è¯†å›¾è°±ä¸­çš„åº”ç”¨"><a href="#ä¸‰å…ƒç»„åœ¨çŸ¥è¯†å›¾è°±ä¸­çš„åº”ç”¨" class="headerlink" title="ä¸‰å…ƒç»„åœ¨çŸ¥è¯†å›¾è°±ä¸­çš„åº”ç”¨"></a>ä¸‰å…ƒç»„åœ¨çŸ¥è¯†å›¾è°±ä¸­çš„åº”ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[å¼ ä¸‰] --&gt;|è®¤è¯†| B[æå››]</span><br><span class="line">    A --&gt;|å·¥ä½œäº| C[é˜¿é‡Œå·´å·´]</span><br><span class="line">    B --&gt;|å·¥ä½œäº| D[è…¾è®¯]</span><br><span class="line">    C --&gt;|ä½äº| E[æ­å·]</span><br><span class="line">    D --&gt;|ä½äº| F[æ·±åœ³]</span><br></pre></td></tr></table></figure>

<h2 id="å®é™…åº”ç”¨åœºæ™¯"><a href="#å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®é™…åº”ç”¨åœºæ™¯"></a>å®é™…åº”ç”¨åœºæ™¯</h2><ul>
<li><strong>çŸ¥è¯†å›¾è°±</strong>ï¼šGoogle Knowledge Graphã€ç™¾åº¦çŸ¥è¯†å›¾è°±</li>
<li><strong>è¯­ä¹‰ç½‘</strong>ï¼šLinked Open Data</li>
<li><strong>æœ¬ä½“å»ºæ¨¡</strong>ï¼šOWL æœ¬ä½“æè¿°</li>
<li><strong>æ™ºèƒ½é—®ç­”</strong>ï¼šåŸºäºçŸ¥è¯†å›¾è°±çš„é—®ç­”ç³»ç»Ÿ</li>
<li><strong>æ¨èç³»ç»Ÿ</strong>ï¼šåŸºäºçŸ¥è¯†å›¾è°±çš„æ¨è</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸‰å…ƒç»„æ˜¯å›¾æ•°æ®åº“çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œé€šè¿‡ <code>(ä¸»è¯­, è°“è¯­, å®¾è¯­)</code> çš„å½¢å¼è¡¨è¾¾äº‹å®ã€‚å®ƒæ˜¯æ„å»ºçŸ¥è¯†å›¾è°±çš„åŸºçŸ³ï¼Œå¹¿æ³›åº”ç”¨äºè¯­ä¹‰ç½‘ã€æ™ºèƒ½é—®ç­”ç­‰é¢†åŸŸã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/12/%E5%B1%9E%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%81%8D%E5%8E%86%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/12/%E5%B1%9E%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%81%8D%E5%8E%86%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-12 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-12T00:00:00+08:00">2026-01-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®ç»“æ„</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£"><a href="#å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£" class="headerlink" title="å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£"></a>å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>å±æ€§æ•°æ®ç»“æ„</strong> æ˜¯æŒ‡å…·æœ‰ç‰¹å®šå±æ€§æˆ–ç‰¹å¾çš„æ•°æ®ç»“æ„ï¼Œå¦‚æœ‰åºæ€§ã€å±‚çº§æ€§ã€è¿é€šæ€§ç­‰ã€‚éå†æ˜¯è®¿é—®æ•°æ®ç»“æ„ä¸­æ‰€æœ‰å…ƒç´ çš„åŸºæœ¬æ“ä½œï¼Œä¸åŒçš„æ•°æ®ç»“æ„æœ‰ä¸åŒçš„éå†ç­–ç•¥ã€‚</p>
<blockquote>
<p><strong>ğŸ’¡ æç¤º: æ ¸å¿ƒæ€æƒ³</strong><br>éå†çš„æœ¬è´¨æ˜¯ï¼š<strong>æŒ‰ç…§æ•°æ®ç»“æ„çš„ç‰¹æ€§ï¼Œç”¨åˆé€‚çš„æ–¹å¼è®¿é—®æ¯ä¸ªå…ƒç´ ä¸€æ¬¡ï¼Œä¸”ä»…ä¸€æ¬¡</strong>ã€‚</p>
</blockquote>
<hr>
<h2 id="ä¸€ã€æ•°ç»„éå†"><a href="#ä¸€ã€æ•°ç»„éå†" class="headerlink" title="ä¸€ã€æ•°ç»„éå†"></a>ä¸€ã€æ•°ç»„éå†</h2><h3 id="1-1-åŸºæœ¬ç‰¹æ€§"><a href="#1-1-åŸºæœ¬ç‰¹æ€§" class="headerlink" title="1.1 åŸºæœ¬ç‰¹æ€§"></a>1.1 åŸºæœ¬ç‰¹æ€§</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å­˜å‚¨æ–¹å¼</strong></td>
<td>è¿ç»­å†…å­˜ï¼Œéšæœºè®¿é—®</td>
</tr>
<tr>
<td><strong>è®¿é—®å¤æ‚åº¦</strong></td>
<td>O(1)</td>
</tr>
<tr>
<td><strong>éå†å¤æ‚åº¦</strong></td>
<td>O(n)</td>
</tr>
<tr>
<td><strong>å±æ€§</strong></td>
<td>æœ‰åºã€å›ºå®šå¤§å°ã€å¯é‡å¤</td>
</tr>
</tbody></table>
<h3 id="1-2-éå†æ€è·¯"><a href="#1-2-éå†æ€è·¯" class="headerlink" title="1.2 éå†æ€è·¯"></a>1.2 éå†æ€è·¯</h3><p>æ•°ç»„éå†çš„æ ¸å¿ƒæ€è·¯æ˜¯<strong>çº¿æ€§æ‰«æ</strong>ï¼šä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡è®¿é—®æ¯ä¸ªå…ƒç´ ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. åˆå§‹åŒ–æŒ‡é’ˆ/ç´¢å¼• i = 0</span><br><span class="line">2. æ£€æŸ¥ i &lt; æ•°ç»„é•¿åº¦</span><br><span class="line">3. è®¿é—® array[i]</span><br><span class="line">4. i++</span><br><span class="line">5. å›åˆ°æ­¥éª¤2</span><br></pre></td></tr></table></figure>

<h3 id="1-3-å®ç°æ–¹å¼"><a href="#1-3-å®ç°æ–¹å¼" class="headerlink" title="1.3 å®ç°æ–¹å¼"></a>1.3 å®ç°æ–¹å¼</h3><h4 id="æ–¹å¼1ï¼šä¼ ç»Ÿ-for-å¾ªç¯ï¼ˆæœ€ç›´æ¥ï¼‰"><a href="#æ–¹å¼1ï¼šä¼ ç»Ÿ-for-å¾ªç¯ï¼ˆæœ€ç›´æ¥ï¼‰" class="headerlink" title="æ–¹å¼1ï¼šä¼ ç»Ÿ for å¾ªç¯ï¼ˆæœ€ç›´æ¥ï¼‰"></a>æ–¹å¼1ï¼šä¼ ç»Ÿ for å¾ªç¯ï¼ˆæœ€ç›´æ¥ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦ç´¢å¼•å€¼ï¼Œéœ€è¦æå‰çŸ¥é“æ•°ç»„å¤§å°</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    System.out.println(arr[i]);  <span class="comment">// è®¿é—®å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ˜¾å¼æ§åˆ¶ç´¢å¼•ï¼Œå¯ä»¥éšæ„è®¿é—®ä»»ä½•ä½ç½®</li>
<li>é€‚åˆéœ€è¦ç´¢å¼•çš„åœºæ™¯ï¼ˆå¦‚ä¿®æ”¹å…ƒç´ ã€è®¡ç®—ä½ç½®ç­‰ï¼‰</li>
</ul>
<h4 id="æ–¹å¼2ï¼šå¢å¼º-for-å¾ªç¯ï¼ˆç®€æ´ï¼‰"><a href="#æ–¹å¼2ï¼šå¢å¼º-for-å¾ªç¯ï¼ˆç®€æ´ï¼‰" class="headerlink" title="æ–¹å¼2ï¼šå¢å¼º for å¾ªç¯ï¼ˆç®€æ´ï¼‰"></a>æ–¹å¼2ï¼šå¢å¼º for å¾ªç¯ï¼ˆç®€æ´ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šåªéœ€è¦å…ƒç´ å€¼ï¼Œä¸éœ€è¦ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> num : arr) &#123;</span><br><span class="line">    System.out.println(num);  <span class="comment">// è®¿é—®å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>éšè—ç´¢å¼•ç»†èŠ‚ï¼Œä»£ç æ›´ç®€æ´</li>
<li>æœ¬è´¨ä¸Šè¿˜æ˜¯é¡ºåºè®¿é—®</li>
<li>ä¸èƒ½ä¿®æ”¹æ•°ç»„å…ƒç´ ï¼ˆå¯¹åŸºæœ¬ç±»å‹ï¼‰</li>
</ul>
<h4 id="æ–¹å¼3ï¼šè¿­ä»£å™¨éå†ï¼ˆé€šç”¨ï¼‰"><a href="#æ–¹å¼3ï¼šè¿­ä»£å™¨éå†ï¼ˆé€šç”¨ï¼‰" class="headerlink" title="æ–¹å¼3ï¼šè¿­ä»£å™¨éå†ï¼ˆé€šç”¨ï¼‰"></a>æ–¹å¼3ï¼šè¿­ä»£å™¨éå†ï¼ˆé€šç”¨ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦åœ¨éå†ä¸­åˆ é™¤å…ƒç´ </span></span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">num</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">3</span>) &#123;</span><br><span class="line">        iterator.remove();  <span class="comment">// å®‰å…¨åˆ é™¤</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>è¿­ä»£å™¨ç»´æŠ¤éå†çŠ¶æ€</li>
<li>æ”¯æŒåœ¨éå†ä¸­å®‰å…¨åˆ é™¤</li>
<li>é€‚åˆé›†åˆæ¡†æ¶</li>
</ul>
<h4 id="æ–¹å¼4ï¼šæµå¼éå†ï¼ˆå‡½æ•°å¼ï¼‰"><a href="#æ–¹å¼4ï¼šæµå¼éå†ï¼ˆå‡½æ•°å¼ï¼‰" class="headerlink" title="æ–¹å¼4ï¼šæµå¼éå†ï¼ˆå‡½æ•°å¼ï¼‰"></a>æ–¹å¼4ï¼šæµå¼éå†ï¼ˆå‡½æ•°å¼ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦å‡½æ•°å¼ç¼–ç¨‹é£æ ¼</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">Arrays.stream(arr)</span><br><span class="line">    .forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…å¸¦ç´¢å¼•</span></span><br><span class="line">IntStream.range(<span class="number">0</span>, arr.length)</span><br><span class="line">    .forEach(i -&gt; System.out.println(arr[i]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å£°æ˜å¼ç¼–ç¨‹ï¼Œè¡¨è¾¾æ„å›¾æ¸…æ™°</li>
<li>æ”¯æŒé“¾å¼æ“ä½œå’Œå‡½æ•°ç»„åˆ</li>
<li>å¯èƒ½æœ‰é¢å¤–å¼€é”€</li>
</ul>
<h3 id="1-4-äºŒç»´æ•°ç»„éå†"><a href="#1-4-äºŒç»´æ•°ç»„éå†" class="headerlink" title="1.4 äºŒç»´æ•°ç»„éå†"></a>1.4 äºŒç»´æ•°ç»„éå†</h3><h4 id="æŒ‰è¡Œéå†ï¼ˆæœ€å¸¸ç”¨ï¼‰"><a href="#æŒ‰è¡Œéå†ï¼ˆæœ€å¸¸ç”¨ï¼‰" class="headerlink" title="æŒ‰è¡Œéå†ï¼ˆæœ€å¸¸ç”¨ï¼‰"></a>æŒ‰è¡Œéå†ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[][] matrix = &#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;,</span><br><span class="line">    &#123;<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€è·¯ï¼šå¤–å±‚å¾ªç¯éå†è¡Œï¼Œå†…å±‚å¾ªç¯éå†åˆ—</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; matrix[i].length; j++) &#123;</span><br><span class="line">        System.out.println(matrix[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®é¡ºåºï¼š1 2 3 4 5 6 7 8 9</span></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(m*n)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å¤–å±‚æ§åˆ¶è¡Œï¼Œå†…å±‚æ§åˆ¶åˆ—</li>
<li>æŒ‰è¡Œä¼˜å…ˆé¡ºåºè®¿é—®ï¼ˆcache å‹å¥½ï¼‰</li>
<li>é€‚åˆå¤§å¤šæ•°çŸ©é˜µæ“ä½œ</li>
</ul>
<h4 id="æŒ‰åˆ—éå†"><a href="#æŒ‰åˆ—éå†" class="headerlink" title="æŒ‰åˆ—éå†"></a>æŒ‰åˆ—éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€è·¯ï¼šå¤–å±‚å¾ªç¯éå†åˆ—ï¼Œå†…å±‚å¾ªç¯éå†è¡Œ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; matrix[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class="line">        System.out.println(matrix[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®é¡ºåºï¼š1 4 7 2 5 8 3 6 9</span></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(m*n)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>é€‚åˆéœ€è¦æŒ‰åˆ—å¤„ç†çš„åœºæ™¯</li>
<li>å¯èƒ½å¯¼è‡´ cache missï¼ˆä¸å¦‚æŒ‰è¡Œéå†é«˜æ•ˆï¼‰</li>
</ul>
<h4 id="å¯¹è§’çº¿éå†"><a href="#å¯¹è§’çº¿éå†" class="headerlink" title="å¯¹è§’çº¿éå†"></a>å¯¹è§’çº¿éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ€è·¯ï¼šæŒ‰å¯¹è§’çº¿æ–¹å‘éå†</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¡å¯¹è§’çº¿ï¼š(0,0)</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¡å¯¹è§’çº¿ï¼š(0,1), (1,0)</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸‰æ¡å¯¹è§’çº¿ï¼š(0,2), (1,1), (2,0)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">diag</span> <span class="operator">=</span> <span class="number">0</span>; diag &lt; matrix.length + matrix[<span class="number">0</span>].length - <span class="number">1</span>; diag++) &#123;</span><br><span class="line">    <span class="comment">// å¯¹äºç¬¬ diag æ¡å¯¹è§’çº¿</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">startRow</span> <span class="operator">=</span> Math.max(<span class="number">0</span>, diag - matrix[<span class="number">0</span>].length + <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">endRow</span> <span class="operator">=</span> Math.min(diag, matrix.length - <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> startRow; i &lt;= endRow; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> diag - i;</span><br><span class="line">        System.out.println(matrix[i][j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®é¡ºåºï¼š1 2 4 3 5 7 6 8 9</span></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(m*n)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å¯¹è§’çº¿ç¼–å·ï¼ši + j &#x3D; diag</li>
<li>éœ€è¦è®¡ç®—æ¯æ¡å¯¹è§’çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹</li>
<li>é€‚åˆç‰¹å®šçš„çŸ©é˜µé—®é¢˜</li>
</ul>
<h3 id="1-5-éå†å˜ç§"><a href="#1-5-éå†å˜ç§" class="headerlink" title="1.5 éå†å˜ç§"></a>1.5 éå†å˜ç§</h3><h4 id="åå‘éå†"><a href="#åå‘éå†" class="headerlink" title="åå‘éå†"></a>åå‘éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»åå¾€å‰éå†</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    System.out.println(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‚ç”¨åœºæ™¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. éœ€è¦ä»åå¾€å‰å¤„ç†</span></span><br><span class="line"><span class="comment">// 2. åˆ é™¤å…ƒç´ æ—¶é¿å…ç´¢å¼•æ··ä¹±</span></span><br></pre></td></tr></table></figure>

<h4 id="è·³è·ƒéå†"><a href="#è·³è·ƒéå†" class="headerlink" title="è·³è·ƒéå†"></a>è·³è·ƒéå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯éš” k ä¸ªå…ƒç´ è®¿é—®ä¸€ä¸ª</span></span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i += k) &#123;</span><br><span class="line">    System.out.println(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‚ç”¨åœºæ™¯ï¼š</span></span><br><span class="line"><span class="comment">// 1. é‡‡æ ·</span></span><br><span class="line"><span class="comment">// 2. æ­¥é•¿éå†</span></span><br></pre></td></tr></table></figure>

<h4 id="æ¡ä»¶éå†"><a href="#æ¡ä»¶éå†" class="headerlink" title="æ¡ä»¶éå†"></a>æ¡ä»¶éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªéå†æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; <span class="number">5</span>) &#123;</span><br><span class="line">        System.out.println(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨æµ</span></span><br><span class="line">Arrays.stream(arr)</span><br><span class="line">    .filter(x -&gt; x &gt; <span class="number">5</span>)</span><br><span class="line">    .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äºŒã€é“¾è¡¨éå†"><a href="#äºŒã€é“¾è¡¨éå†" class="headerlink" title="äºŒã€é“¾è¡¨éå†"></a>äºŒã€é“¾è¡¨éå†</h2><h3 id="2-1-åŸºæœ¬ç‰¹æ€§"><a href="#2-1-åŸºæœ¬ç‰¹æ€§" class="headerlink" title="2.1 åŸºæœ¬ç‰¹æ€§"></a>2.1 åŸºæœ¬ç‰¹æ€§</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å­˜å‚¨æ–¹å¼</strong></td>
<td>ç¦»æ•£å†…å­˜ï¼Œé€šè¿‡æŒ‡é’ˆè¿æ¥</td>
</tr>
<tr>
<td><strong>è®¿é—®å¤æ‚åº¦</strong></td>
<td>O(n)</td>
</tr>
<tr>
<td><strong>éå†å¤æ‚åº¦</strong></td>
<td>O(n)</td>
</tr>
<tr>
<td><strong>å±æ€§</strong></td>
<td>æœ‰åºã€åŠ¨æ€å¤§å°ã€å¯é‡å¤</td>
</tr>
</tbody></table>
<h3 id="2-2-é“¾è¡¨èŠ‚ç‚¹å®šä¹‰"><a href="#2-2-é“¾è¡¨èŠ‚ç‚¹å®šä¹‰" class="headerlink" title="2.2 é“¾è¡¨èŠ‚ç‚¹å®šä¹‰"></a>2.2 é“¾è¡¨èŠ‚ç‚¹å®šä¹‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;           <span class="comment">// æ•°æ®</span></span><br><span class="line">    ListNode next;     <span class="comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    </span><br><span class="line">    ListNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-éå†æ€è·¯"><a href="#2-3-éå†æ€è·¯" class="headerlink" title="2.3 éå†æ€è·¯"></a>2.3 éå†æ€è·¯</h3><p>é“¾è¡¨éå†çš„æ ¸å¿ƒæ€è·¯æ˜¯<strong>æŒ‡é’ˆè·Ÿè¸ª</strong>ï¼šä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œé€šè¿‡ next æŒ‡é’ˆé€ä¸ªè®¿é—®æ¯ä¸ªèŠ‚ç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. åˆå§‹åŒ–æŒ‡é’ˆ current = head</span><br><span class="line">2. æ£€æŸ¥ current != null</span><br><span class="line">3. è®¿é—® current.val</span><br><span class="line">4. current = current.next</span><br><span class="line">5. å›åˆ°æ­¥éª¤2</span><br></pre></td></tr></table></figure>

<h3 id="2-4-å®ç°æ–¹å¼"><a href="#2-4-å®ç°æ–¹å¼" class="headerlink" title="2.4 å®ç°æ–¹å¼"></a>2.4 å®ç°æ–¹å¼</h3><h4 id="æ–¹å¼1ï¼šwhile-å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰"><a href="#æ–¹å¼1ï¼šwhile-å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰" class="headerlink" title="æ–¹å¼1ï¼šwhile å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰"></a>æ–¹å¼1ï¼šwhile å¾ªç¯ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦é€ä¸ªè®¿é—®èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">1</span>);</span><br><span class="line">head.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">2</span>);</span><br><span class="line">head.next.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">    System.out.println(current.val);  <span class="comment">// è®¿é—®èŠ‚ç‚¹</span></span><br><span class="line">    current = current.next;            <span class="comment">// ç§»åŠ¨æŒ‡é’ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æœ€ç›´æ¥çš„éå†æ–¹å¼</li>
<li>é€šè¿‡ null æ£€æŸ¥ç¡®å®šéå†ç»“æŸ</li>
<li>ä¸ä¿®æ”¹é“¾è¡¨ç»“æ„</li>
</ul>
<h4 id="æ–¹å¼2ï¼šé€’å½’éå†"><a href="#æ–¹å¼2ï¼šé€’å½’éå†" class="headerlink" title="æ–¹å¼2ï¼šé€’å½’éå†"></a>æ–¹å¼2ï¼šé€’å½’éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦é€’å½’å¤„ç†æˆ–åå‘éå†</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;  <span class="comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    System.out.println(node.val);      <span class="comment">// å‰åºå¤„ç†</span></span><br><span class="line">    traverse(node.next);               <span class="comment">// é€’å½’è®¿é—®ä¸‹ä¸€ä¸ª</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">traverse(head);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆé€’å½’æ ˆï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>é€’å½’å¤©ç„¶é€‚åˆé“¾è¡¨ç»“æ„</li>
<li>ç©ºé—´å¤æ‚åº¦è¾ƒé«˜ï¼ˆæ ˆæ·±åº¦ï¼‰</li>
<li>é€‚åˆéœ€è¦åå‘å¤„ç†çš„åœºæ™¯</li>
</ul>
<h4 id="æ–¹å¼3ï¼šåå‘éå†ï¼ˆé€’å½’ï¼‰"><a href="#æ–¹å¼3ï¼šåå‘éå†ï¼ˆé€’å½’ï¼‰" class="headerlink" title="æ–¹å¼3ï¼šåå‘éå†ï¼ˆé€’å½’ï¼‰"></a>æ–¹å¼3ï¼šåå‘éå†ï¼ˆé€’å½’ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦ä»åå¾€å‰è®¿é—®</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">reverseTraverse</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    reverseTraverse(node.next);        <span class="comment">// å…ˆé€’å½’åˆ°æœ«å°¾</span></span><br><span class="line">    System.out.println(node.val);      <span class="comment">// ååºå¤„ç†ï¼ˆåå‘ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">reverseTraverse(head);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºé¡ºåºï¼š3 2 1ï¼ˆå¦‚æœé“¾è¡¨æ˜¯ 1-&gt;2-&gt;3ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>åˆ©ç”¨é€’å½’æ ˆå®ç°åå‘éå†</li>
<li>ä¸éœ€è¦é¢å¤–çš„åå‘é“¾è¡¨</li>
<li>ç©ºé—´å¤æ‚åº¦ O(n)</li>
</ul>
<h4 id="æ–¹å¼4ï¼šå¿«æ…¢æŒ‡é’ˆéå†"><a href="#æ–¹å¼4ï¼šå¿«æ…¢æŒ‡é’ˆéå†" class="headerlink" title="æ–¹å¼4ï¼šå¿«æ…¢æŒ‡é’ˆéå†"></a>æ–¹å¼4ï¼šå¿«æ…¢æŒ‡é’ˆéå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šéœ€è¦æ‰¾åˆ°ä¸­ç‚¹ã€æ£€æµ‹ç¯ç­‰</span></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€è·¯ï¼šslow æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œfast æ¯æ¬¡èµ°ä¸¤æ­¥</span></span><br><span class="line"><span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    fast = fast.next.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// slow ç°åœ¨æŒ‡å‘ä¸­ç‚¹</span></span><br><span class="line">System.out.println(<span class="string">&quot;ä¸­ç‚¹å€¼ï¼š&quot;</span> + slow.val);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å¿«æŒ‡é’ˆé€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€</li>
<li>å½“å¿«æŒ‡é’ˆåˆ°è¾¾æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆåœ¨ä¸­ç‚¹</li>
<li>é€‚åˆæ£€æµ‹ç¯ã€æ‰¾ä¸­ç‚¹ç­‰</li>
</ul>
<h4 id="æ–¹å¼5ï¼šè¿­ä»£å™¨éå†"><a href="#æ–¹å¼5ï¼šè¿­ä»£å™¨éå†" class="headerlink" title="æ–¹å¼5ï¼šè¿­ä»£å™¨éå†"></a>æ–¹å¼5ï¼šè¿­ä»£å™¨éå†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šä½¿ç”¨é›†åˆæ¡†æ¶</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="number">1</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line">list.add(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    System.out.println(iterator.next());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>éšè—æŒ‡é’ˆç»†èŠ‚</li>
<li>æ”¯æŒåœ¨éå†ä¸­åˆ é™¤</li>
<li>æ›´å®‰å…¨çš„éå†æ–¹å¼</li>
</ul>
<h3 id="2-5-åŒå‘é“¾è¡¨éå†"><a href="#2-5-åŒå‘é“¾è¡¨éå†" class="headerlink" title="2.5 åŒå‘é“¾è¡¨éå†"></a>2.5 åŒå‘é“¾è¡¨éå†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DoublyListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    DoublyListNode prev;  <span class="comment">// å‰é©±æŒ‡é’ˆ</span></span><br><span class="line">    DoublyListNode next;  <span class="comment">// åç»§æŒ‡é’ˆ</span></span><br><span class="line">    </span><br><span class="line">    DoublyListNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£å‘éå†</span></span><br><span class="line"><span class="type">DoublyListNode</span> <span class="variable">current</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">    System.out.println(current.val);</span><br><span class="line">    current = current.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åå‘éå†ï¼ˆåˆ©ç”¨ prev æŒ‡é’ˆï¼‰</span></span><br><span class="line">current = tail;</span><br><span class="line"><span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">    System.out.println(current.val);</span><br><span class="line">    current = current.prev;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>åŒå‘é“¾è¡¨æ”¯æŒåŒå‘éå†</li>
<li>åå‘éå†ä¸éœ€è¦é€’å½’</li>
<li>é€‚åˆéœ€è¦åŒå‘è®¿é—®çš„åœºæ™¯</li>
</ul>
<hr>
<h2 id="ä¸‰ã€æ ‘çš„éå†"><a href="#ä¸‰ã€æ ‘çš„éå†" class="headerlink" title="ä¸‰ã€æ ‘çš„éå†"></a>ä¸‰ã€æ ‘çš„éå†</h2><h3 id="3-1-åŸºæœ¬ç‰¹æ€§"><a href="#3-1-åŸºæœ¬ç‰¹æ€§" class="headerlink" title="3.1 åŸºæœ¬ç‰¹æ€§"></a>3.1 åŸºæœ¬ç‰¹æ€§</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å­˜å‚¨æ–¹å¼</strong></td>
<td>å±‚çº§ç»“æ„ï¼Œçˆ¶å­å…³ç³»</td>
</tr>
<tr>
<td><strong>è®¿é—®å¤æ‚åº¦</strong></td>
<td>O(n)</td>
</tr>
<tr>
<td><strong>éå†å¤æ‚åº¦</strong></td>
<td>O(n)</td>
</tr>
<tr>
<td><strong>å±æ€§</strong></td>
<td>æœ‰åºã€éçº¿æ€§ã€æ— ç¯</td>
</tr>
</tbody></table>
<h3 id="3-2-æ ‘èŠ‚ç‚¹å®šä¹‰"><a href="#3-2-æ ‘èŠ‚ç‚¹å®šä¹‰" class="headerlink" title="3.2 æ ‘èŠ‚ç‚¹å®šä¹‰"></a>3.2 æ ‘èŠ‚ç‚¹å®šä¹‰</h3><h4 id="äºŒå‰æ ‘èŠ‚ç‚¹"><a href="#äºŒå‰æ ‘èŠ‚ç‚¹" class="headerlink" title="äºŒå‰æ ‘èŠ‚ç‚¹"></a>äºŒå‰æ ‘èŠ‚ç‚¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;              <span class="comment">// æ•°æ®</span></span><br><span class="line">    TreeNode left;        <span class="comment">// å·¦å­æ ‘</span></span><br><span class="line">    TreeNode right;       <span class="comment">// å³å­æ ‘</span></span><br><span class="line">    </span><br><span class="line">    TreeNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.left = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>.right = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¤šå‰æ ‘èŠ‚ç‚¹"><a href="#å¤šå‰æ ‘èŠ‚ç‚¹" class="headerlink" title="å¤šå‰æ ‘èŠ‚ç‚¹"></a>å¤šå‰æ ‘èŠ‚ç‚¹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NaryTreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;                          <span class="comment">// æ•°æ®</span></span><br><span class="line">    List&lt;NaryTreeNode&gt; children;      <span class="comment">// å­èŠ‚ç‚¹åˆ—è¡¨</span></span><br><span class="line">    </span><br><span class="line">    NaryTreeNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">        <span class="built_in">this</span>.children = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å­èŠ‚ç‚¹</li>
<li>é€‚åˆè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿã€ç»„ç»‡ç»“æ„ç­‰</li>
<li>éå†é€»è¾‘æ›´é€šç”¨</li>
</ul>
<h3 id="3-3-æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰"><a href="#3-3-æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰" class="headerlink" title="3.3 æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰"></a>3.3 æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</h3><h4 id="å‰åºéå†ï¼ˆPre-orderï¼‰"><a href="#å‰åºéå†ï¼ˆPre-orderï¼‰" class="headerlink" title="å‰åºéå†ï¼ˆPre-orderï¼‰"></a>å‰åºéå†ï¼ˆPre-orderï¼‰</h4><p><strong>éå†é¡ºåº</strong>ï¼šæ ¹ â†’ å·¦å­æ ‘ â†’ å³å­æ ‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. è®¿é—®å½“å‰èŠ‚ç‚¹</span><br><span class="line">2. é€’å½’éå†å·¦å­æ ‘</span><br><span class="line">3. é€’å½’éå†å³å­æ ‘</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    System.out.println(node.val);      <span class="comment">// 1. è®¿é—®æ ¹</span></span><br><span class="line">    preorder(node.left);               <span class="comment">// 2. éå†å·¦å­æ ‘</span></span><br><span class="line">    preorder(node.right);              <span class="comment">// 3. éå†å³å­æ ‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘ï¼š</span></span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     2   3</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æœ€å…ˆè®¿é—®æ ¹èŠ‚ç‚¹</li>
<li>é€‚åˆéœ€è¦å…ˆå¤„ç†çˆ¶èŠ‚ç‚¹çš„åœºæ™¯</li>
<li>å¦‚ï¼šå¤åˆ¶æ ‘ã€åºåˆ—åŒ–æ ‘</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨æ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">preorderIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        System.out.println(node.val);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šå…ˆå‹å³å­æ ‘ï¼Œåå‹å·¦å­æ ‘</span></span><br><span class="line">        <span class="comment">// è¿™æ ·å¼¹å‡ºæ—¶å·¦å­æ ‘å…ˆå‡º</span></span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(h)ï¼Œh æ˜¯æ ‘çš„é«˜åº¦</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ ˆæ¨¡æ‹Ÿé€’å½’è°ƒç”¨</li>
<li>å‹æ ˆé¡ºåºå¾ˆå…³é”®ï¼ˆå³å…ˆå‹ï¼Œå·¦åå‹ï¼‰</li>
<li>é¿å…é€’å½’æ ˆæº¢å‡º</li>
</ul>
<h4 id="ä¸­åºéå†ï¼ˆIn-orderï¼‰"><a href="#ä¸­åºéå†ï¼ˆIn-orderï¼‰" class="headerlink" title="ä¸­åºéå†ï¼ˆIn-orderï¼‰"></a>ä¸­åºéå†ï¼ˆIn-orderï¼‰</h4><p><strong>éå†é¡ºåº</strong>ï¼šå·¦å­æ ‘ â†’ æ ¹ â†’ å³å­æ ‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. é€’å½’éå†å·¦å­æ ‘</span><br><span class="line">2. è®¿é—®å½“å‰èŠ‚ç‚¹</span><br><span class="line">3. é€’å½’éå†å³å­æ ‘</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">inorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    inorder(node.left);                <span class="comment">// 1. éå†å·¦å­æ ‘</span></span><br><span class="line">    System.out.println(node.val);      <span class="comment">// 2. è®¿é—®æ ¹</span></span><br><span class="line">    inorder(node.right);               <span class="comment">// 3. éå†å³å­æ ‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘ï¼š</span></span><br><span class="line"><span class="comment">//       2</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     1   3</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—</li>
<li>é€‚åˆéœ€è¦æœ‰åºå¤„ç†çš„åœºæ™¯</li>
<li>æœ€å¸¸ç”¨çš„éå†æ–¹å¼</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨æ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">inorderIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">current</span> <span class="operator">=</span> root;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">null</span> || !stack.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// 1. ä¸€ç›´å‘å·¦èµ°ï¼Œå‹æ ˆæ‰€æœ‰å·¦èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(current);</span><br><span class="line">            current = current.left;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. å·¦å­æ ‘éå†å®Œï¼Œå¼¹å‡ºæ ˆé¡¶ï¼ˆæ ¹ï¼‰</span></span><br><span class="line">        current = stack.pop();</span><br><span class="line">        System.out.println(current.val);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. éå†å³å­æ ‘</span></span><br><span class="line">        current = current.right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(h)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å…³é”®ï¼šå…ˆä¸€ç›´å‘å·¦ï¼Œç›´åˆ° null</li>
<li>ç„¶åå¤„ç†æ ˆé¡¶ï¼Œå†å‘å³</li>
<li>æ¯”å‰åºéå†æ›´å¤æ‚</li>
</ul>
<h4 id="ååºéå†ï¼ˆPost-orderï¼‰"><a href="#ååºéå†ï¼ˆPost-orderï¼‰" class="headerlink" title="ååºéå†ï¼ˆPost-orderï¼‰"></a>ååºéå†ï¼ˆPost-orderï¼‰</h4><p><strong>éå†é¡ºåº</strong>ï¼šå·¦å­æ ‘ â†’ å³å­æ ‘ â†’ æ ¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. é€’å½’éå†å·¦å­æ ‘</span><br><span class="line">2. é€’å½’éå†å³å­æ ‘</span><br><span class="line">3. è®¿é—®å½“å‰èŠ‚ç‚¹</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">postorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    postorder(node.left);              <span class="comment">// 1. éå†å·¦å­æ ‘</span></span><br><span class="line">    postorder(node.right);             <span class="comment">// 2. éå†å³å­æ ‘</span></span><br><span class="line">    System.out.println(node.val);      <span class="comment">// 3. è®¿é—®æ ¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘ï¼š</span></span><br><span class="line"><span class="comment">//       3</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     1   2</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æœ€åè®¿é—®æ ¹èŠ‚ç‚¹</li>
<li>é€‚åˆéœ€è¦å…ˆå¤„ç†å­èŠ‚ç‚¹çš„åœºæ™¯</li>
<li>å¦‚ï¼šåˆ é™¤æ ‘ã€è®¡ç®—æ ‘çš„é«˜åº¦</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨ä¸¤ä¸ªæ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">postorderIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Stack&lt;TreeNode&gt; stack1 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;TreeNode&gt; stack2 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    stack1.push(root);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ¬¡éå†ï¼šæ ¹ â†’ å³ â†’ å·¦ï¼ˆåå‘çš„ååºï¼‰</span></span><br><span class="line">    <span class="keyword">while</span> (!stack1.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack1.pop();</span><br><span class="line">        stack2.push(node);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack1.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack1.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¬¬äºŒæ¬¡éå†ï¼šå¼¹å‡º stack2ï¼ˆå¾—åˆ°æ­£ç¡®çš„ååºï¼‰</span></span><br><span class="line">    <span class="keyword">while</span> (!stack2.isEmpty()) &#123;</span><br><span class="line">        System.out.println(stack2.pop().val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(n)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°</li>
<li>ç¬¬ä¸€ä¸ªæ ˆç”Ÿæˆåå‘ååº</li>
<li>ç¬¬äºŒä¸ªæ ˆåè½¬å¾—åˆ°æ­£ç¡®é¡ºåº</li>
</ul>
<h3 id="3-4-å¤šå‰æ ‘éå†"><a href="#3-4-å¤šå‰æ ‘éå†" class="headerlink" title="3.4 å¤šå‰æ ‘éå†"></a>3.4 å¤šå‰æ ‘éå†</h3><h4 id="å¤šå‰æ ‘å‰åºéå†"><a href="#å¤šå‰æ ‘å‰åºéå†" class="headerlink" title="å¤šå‰æ ‘å‰åºéå†"></a>å¤šå‰æ ‘å‰åºéå†</h4><p><strong>éå†é¡ºåº</strong>ï¼šæ ¹ â†’ æ‰€æœ‰å­èŠ‚ç‚¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">preorderNary</span><span class="params">(NaryTreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    System.out.println(node.val);      <span class="comment">// 1. è®¿é—®æ ¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. éå†æ‰€æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (NaryTreeNode child : node.children) &#123;</span><br><span class="line">        preorderNary(child);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘ï¼š</span></span><br><span class="line"><span class="comment">//         1</span></span><br><span class="line"><span class="comment">//      /  |  \</span></span><br><span class="line"><span class="comment">//     2   3   4</span></span><br><span class="line"><span class="comment">//    / \</span></span><br><span class="line"><span class="comment">//   5   6</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 5 6 3 4</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä¸äºŒå‰æ ‘å‰åºç±»ä¼¼ï¼Œå…ˆè®¿é—®æ ¹</li>
<li>éå†æ‰€æœ‰å­èŠ‚ç‚¹è€Œä¸æ˜¯åªæœ‰å·¦å³</li>
<li>æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(h)</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨æ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">preorderNaryIterative</span><span class="params">(NaryTreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Stack&lt;NaryTreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="type">NaryTreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        System.out.println(node.val);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…³é”®ï¼šåå‘å‹æ ˆå­èŠ‚ç‚¹ï¼Œä¿è¯æ­£ç¡®çš„è®¿é—®é¡ºåº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> node.children.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            stack.push(node.children.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(h)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>åå‘å‹æ ˆæ˜¯å…³é”®ï¼ˆä»æœ€åä¸€ä¸ªå­èŠ‚ç‚¹å¼€å§‹ï¼‰</li>
<li>è¿™æ ·å¼¹å‡ºæ—¶ï¼Œç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹å…ˆå‡º</li>
<li>ä¿è¯äº†æ­£ç¡®çš„å‰åºéå†é¡ºåº</li>
</ul>
<h4 id="å¤šå‰æ ‘ååºéå†"><a href="#å¤šå‰æ ‘ååºéå†" class="headerlink" title="å¤šå‰æ ‘ååºéå†"></a>å¤šå‰æ ‘ååºéå†</h4><p><strong>éå†é¡ºåº</strong>ï¼šæ‰€æœ‰å­èŠ‚ç‚¹ â†’ æ ¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">postorderNary</span><span class="params">(NaryTreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. éå†æ‰€æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (NaryTreeNode child : node.children) &#123;</span><br><span class="line">        postorderNary(child);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    System.out.println(node.val);      <span class="comment">// 2. è®¿é—®æ ¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘åŒä¸Š</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š5 6 2 3 4 1</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å…ˆå¤„ç†æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œæœ€åå¤„ç†æ ¹</li>
<li>é€‚åˆéœ€è¦å…ˆå¤„ç†å­æ ‘çš„åœºæ™¯ï¼ˆå¦‚åˆ é™¤æ ‘ï¼‰</li>
<li>æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(h)</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨ä¸¤ä¸ªæ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">postorderNaryIterative</span><span class="params">(NaryTreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Stack&lt;NaryTreeNode&gt; stack1 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;NaryTreeNode&gt; stack2 = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    stack1.push(root);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¬¬ä¸€æ¬¡éå†ï¼šç”Ÿæˆåå‘çš„ååº</span></span><br><span class="line">    <span class="keyword">while</span> (!stack1.isEmpty()) &#123;</span><br><span class="line">        <span class="type">NaryTreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack1.pop();</span><br><span class="line">        stack2.push(node);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ­£å‘å‹æ ˆå­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (NaryTreeNode child : node.children) &#123;</span><br><span class="line">            stack1.push(child);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¬¬äºŒæ¬¡éå†ï¼šå¼¹å‡º stack2</span></span><br><span class="line">    <span class="keyword">while</span> (!stack2.isEmpty()) &#123;</span><br><span class="line">        System.out.println(stack2.pop().val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(n)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä¸äºŒå‰æ ‘ååºç±»ä¼¼ï¼Œä½¿ç”¨ä¸¤ä¸ªæ ˆ</li>
<li>ç¬¬ä¸€ä¸ªæ ˆç”Ÿæˆåå‘ååº</li>
<li>ç¬¬äºŒä¸ªæ ˆåè½¬å¾—åˆ°æ­£ç¡®é¡ºåº</li>
</ul>
<h4 id="å¤šå‰æ ‘å±‚åºéå†"><a href="#å¤šå‰æ ‘å±‚åºéå†" class="headerlink" title="å¤šå‰æ ‘å±‚åºéå†"></a>å¤šå‰æ ‘å±‚åºéå†</h4><p><strong>éå†é¡ºåº</strong>ï¼šæŒ‰å±‚ä»ä¸Šåˆ°ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">levelorderNary</span><span class="params">(NaryTreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Queue&lt;NaryTreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">NaryTreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        System.out.println(node.val);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">        <span class="keyword">for</span> (NaryTreeNode child : node.children) &#123;</span><br><span class="line">            queue.add(child);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3 4 5 6</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ä¿è¯å±‚åºè®¿é—®</li>
<li>éå†æ‰€æœ‰å­èŠ‚ç‚¹è€Œä¸æ˜¯åªæœ‰å·¦å³</li>
<li>æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œç©ºé—´å¤æ‚åº¦ O(w)</li>
</ul>
<h4 id="åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰"><a href="#åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰" class="headerlink" title="åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰"></a>åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelorderNaryList</span><span class="params">(NaryTreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">    </span><br><span class="line">    Queue&lt;NaryTreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">levelSize</span> <span class="operator">=</span> queue.size();  <span class="comment">// è®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">        List&lt;Integer&gt; currentLevel = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¤„ç†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; levelSize; i++) &#123;</span><br><span class="line">            <span class="type">NaryTreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            currentLevel.add(node.val);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å°†æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">            <span class="keyword">for</span> (NaryTreeNode child : node.children) &#123;</span><br><span class="line">                queue.add(child);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        result.add(currentLevel);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š[[1], [2, 3, 4], [5, 6]]</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å…³é”®ï¼šè®°å½•æ¯å±‚çš„èŠ‚ç‚¹æ•°</li>
<li>åœ¨å¤„ç†å½“å‰å±‚æ—¶ï¼Œåªå¤„ç† levelSize ä¸ªèŠ‚ç‚¹</li>
<li>è¿™æ ·å¯ä»¥æ¸…æ™°åœ°åˆ†ç¦»å„å±‚</li>
</ul>
<h3 id="3-5-å¤šå‰æ ‘-vs-äºŒå‰æ ‘å¯¹æ¯”"><a href="#3-5-å¤šå‰æ ‘-vs-äºŒå‰æ ‘å¯¹æ¯”" class="headerlink" title="3.5 å¤šå‰æ ‘ vs äºŒå‰æ ‘å¯¹æ¯”"></a>3.5 å¤šå‰æ ‘ vs äºŒå‰æ ‘å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>äºŒå‰æ ‘</th>
<th>å¤šå‰æ ‘</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å­èŠ‚ç‚¹æ•°</strong></td>
<td>æœ€å¤š 2 ä¸ª</td>
<td>ä»»æ„ä¸ª</td>
</tr>
<tr>
<td><strong>å‰åºéå†</strong></td>
<td>æ ¹â†’å·¦â†’å³</td>
<td>æ ¹â†’æ‰€æœ‰å­</td>
</tr>
<tr>
<td><strong>ååºéå†</strong></td>
<td>å·¦â†’å³â†’æ ¹</td>
<td>æ‰€æœ‰å­â†’æ ¹</td>
</tr>
<tr>
<td><strong>ä¸­åºéå†</strong></td>
<td>å·¦â†’æ ¹â†’å³</td>
<td>ä¸é€‚ç”¨</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>æœç´¢æ ‘ã€å †</td>
<td>æ–‡ä»¶ç³»ç»Ÿã€ç»„ç»‡ç»“æ„</td>
</tr>
<tr>
<td><strong>å®ç°å¤æ‚åº¦</strong></td>
<td>ç®€å•</td>
<td>ç¨å¤æ‚ï¼ˆå¾ªç¯éå†å­èŠ‚ç‚¹ï¼‰</td>
</tr>
</tbody></table>
<hr>
<h3 id="3-6-å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰"><a href="#3-6-å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰" class="headerlink" title="3.6 å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰"></a>3.6 å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</h3><h4 id="å±‚åºéå†ï¼ˆLevel-orderï¼‰"><a href="#å±‚åºéå†ï¼ˆLevel-orderï¼‰" class="headerlink" title="å±‚åºéå†ï¼ˆLevel-orderï¼‰"></a>å±‚åºéå†ï¼ˆLevel-orderï¼‰</h4><p><strong>éå†é¡ºåº</strong>ï¼šæŒ‰å±‚ä»ä¸Šåˆ°ä¸‹ï¼ŒåŒå±‚ä»å·¦åˆ°å³</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ€è·¯æµç¨‹ï¼š</span><br><span class="line">1. åˆå§‹åŒ–é˜Ÿåˆ—ï¼Œæ”¾å…¥æ ¹èŠ‚ç‚¹</span><br><span class="line">2. é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼š</span><br><span class="line">   a. å¼¹å‡ºé˜Ÿåˆ—å‰ç«¯èŠ‚ç‚¹</span><br><span class="line">   b. è®¿é—®è¯¥èŠ‚ç‚¹</span><br><span class="line">   c. å°†å…¶å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨é˜Ÿåˆ—å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">levelorder</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        System.out.println(node.val);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            queue.add(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            queue.add(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹æ ‘ï¼š</span></span><br><span class="line"><span class="comment">//       1</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     2   3</span></span><br><span class="line"><span class="comment">//    / \</span></span><br><span class="line"><span class="comment">//   4   5</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š1 2 3 4 5</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ä¿è¯äº†å±‚åºè®¿é—®</li>
<li>å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§å¾ˆå…³é”®</li>
<li>é€‚åˆéœ€è¦æŒ‰å±‚å¤„ç†çš„åœºæ™¯</li>
</ul>
<h4 id="åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰-1"><a href="#åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰-1" class="headerlink" title="åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰"></a>åˆ†å±‚éå†ï¼ˆè¿”å›æ¯å±‚çš„åˆ—è¡¨ï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; <span class="title function_">levelOrderList</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span> result;</span><br><span class="line">    </span><br><span class="line">    Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    queue.add(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">levelSize</span> <span class="operator">=</span> queue.size();  <span class="comment">// å…³é”®ï¼šè®°å½•å½“å‰å±‚çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">        List&lt;Integer&gt; currentLevel = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¤„ç†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; levelSize; i++) &#123;</span><br><span class="line">            <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">            currentLevel.add(node.val);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.add(node.left);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">                queue.add(node.right);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        result.add(currentLevel);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š[[1], [2, 3], [4, 5]]</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å…³é”®ï¼šè®°å½•æ¯å±‚çš„èŠ‚ç‚¹æ•°</li>
<li>åœ¨å¤„ç†å½“å‰å±‚æ—¶ï¼Œåªå¤„ç† levelSize ä¸ªèŠ‚ç‚¹</li>
<li>è¿™æ ·å¯ä»¥æ¸…æ™°åœ°åˆ†ç¦»å„å±‚</li>
</ul>
<h3 id="3-5-DFS-vs-BFS-å¯¹æ¯”"><a href="#3-5-DFS-vs-BFS-å¯¹æ¯”" class="headerlink" title="3.5 DFS vs BFS å¯¹æ¯”"></a>3.5 DFS vs BFS å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>DFSï¼ˆé€’å½’&#x2F;æ ˆï¼‰</th>
<th>BFSï¼ˆé˜Ÿåˆ—ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å®ç°</strong></td>
<td>é€’å½’æˆ–æ ˆ</td>
<td>é˜Ÿåˆ—</td>
</tr>
<tr>
<td><strong>ç©ºé—´å¤æ‚åº¦</strong></td>
<td>O(h)ï¼ˆé«˜åº¦ï¼‰</td>
<td>O(w)ï¼ˆæœ€å¤§å®½åº¦ï¼‰</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>è·¯å¾„é—®é¢˜ã€æ·±åº¦é—®é¢˜</td>
<td>æœ€çŸ­è·¯å¾„ã€å±‚çº§é—®é¢˜</td>
</tr>
<tr>
<td><strong>éå†é¡ºåº</strong></td>
<td>æ·±åº¦ä¼˜å…ˆ</td>
<td>å¹¿åº¦ä¼˜å…ˆ</td>
</tr>
</tbody></table>
<hr>
<h2 id="å››ã€å›¾çš„éå†"><a href="#å››ã€å›¾çš„éå†" class="headerlink" title="å››ã€å›¾çš„éå†"></a>å››ã€å›¾çš„éå†</h2><h3 id="4-1-åŸºæœ¬ç‰¹æ€§"><a href="#4-1-åŸºæœ¬ç‰¹æ€§" class="headerlink" title="4.1 åŸºæœ¬ç‰¹æ€§"></a>4.1 åŸºæœ¬ç‰¹æ€§</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å­˜å‚¨æ–¹å¼</strong></td>
<td>é‚»æ¥è¡¨æˆ–é‚»æ¥çŸ©é˜µ</td>
</tr>
<tr>
<td><strong>è®¿é—®å¤æ‚åº¦</strong></td>
<td>O(V+E)</td>
</tr>
<tr>
<td><strong>éå†å¤æ‚åº¦</strong></td>
<td>O(V+E)</td>
</tr>
<tr>
<td><strong>å±æ€§</strong></td>
<td>å¯èƒ½æœ‰ç¯ã€å¯èƒ½ä¸è¿é€š</td>
</tr>
</tbody></table>
<h3 id="4-2-å›¾çš„è¡¨ç¤º"><a href="#4-2-å›¾çš„è¡¨ç¤º" class="headerlink" title="4.2 å›¾çš„è¡¨ç¤º"></a>4.2 å›¾çš„è¡¨ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‚»æ¥è¡¨è¡¨ç¤º</span></span><br><span class="line">Map&lt;Integer, List&lt;Integer&gt;&gt; graph = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">graph.put(<span class="number">1</span>, Arrays.asList(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">graph.put(<span class="number">2</span>, Arrays.asList(<span class="number">1</span>, <span class="number">4</span>));</span><br><span class="line">graph.put(<span class="number">3</span>, Arrays.asList(<span class="number">1</span>));</span><br><span class="line">graph.put(<span class="number">4</span>, Arrays.asList(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚»æ¥çŸ©é˜µè¡¨ç¤º</span></span><br><span class="line"><span class="type">int</span>[][] adjMatrix = &#123;</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,  <span class="comment">// èŠ‚ç‚¹ 0 çš„é‚»æ¥</span></span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,  <span class="comment">// èŠ‚ç‚¹ 1 çš„é‚»æ¥</span></span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,  <span class="comment">// èŠ‚ç‚¹ 2 çš„é‚»æ¥</span></span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;   <span class="comment">// èŠ‚ç‚¹ 3 çš„é‚»æ¥</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰"><a href="#4-3-æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰" class="headerlink" title="4.3 æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰"></a>4.3 æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</h3><p><strong>æ€è·¯</strong>ï¼šä»èµ·ç‚¹å¼€å§‹ï¼Œæ²¿ç€ä¸€æ¡è·¯å¾„å°½å¯èƒ½æ·±åœ°æ¢ç´¢ï¼Œç›´åˆ°æ— æ³•ç»§ç»­ï¼Œç„¶åå›æº¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å®ç°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> node, Map&lt;Integer, List&lt;Integer&gt;&gt; graph, Set&lt;Integer&gt; visited)</span> &#123;</span><br><span class="line">    visited.add(node);</span><br><span class="line">    System.out.println(node);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> neighbor : graph.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!visited.contains(neighbor)) &#123;</span><br><span class="line">            dfs(neighbor, graph, visited);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">dfs(<span class="number">1</span>, graph, visited);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(V+E)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(V)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ visited é›†åˆé˜²æ­¢é‡å¤è®¿é—®ï¼ˆå¤„ç†ç¯ï¼‰</li>
<li>é€’å½’è‡ªç„¶åœ°å®ç°äº†æ·±åº¦ä¼˜å…ˆ</li>
<li>é€‚åˆæ£€æµ‹ç¯ã€æ‹“æ‰‘æ’åºç­‰</li>
</ul>
<p><strong>è¿­ä»£å®ç°</strong>ï¼ˆä½¿ç”¨æ ˆï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">dfsIterative</span><span class="params">(<span class="type">int</span> start, Map&lt;Integer, List&lt;Integer&gt;&gt; graph)</span> &#123;</span><br><span class="line">    Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    stack.push(start);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (visited.contains(node)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        visited.add(node);</span><br><span class="line">        System.out.println(node);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å‹æ ˆæ‰€æœ‰æœªè®¿é—®çš„é‚»æ¥èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> neighbor : graph.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited.contains(neighbor)) &#123;</span><br><span class="line">                stack.push(neighbor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(V+E)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(V)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ ˆæ¨¡æ‹Ÿé€’å½’</li>
<li>éœ€è¦æ£€æŸ¥æ˜¯å¦å·²è®¿é—®</li>
<li>é¿å…é‡å¤å¤„ç†</li>
</ul>
<h3 id="4-4-å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰"><a href="#4-4-å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰" class="headerlink" title="4.4 å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰"></a>4.4 å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</h3><p><strong>æ€è·¯</strong>ï¼šä»èµ·ç‚¹å¼€å§‹ï¼Œé€å±‚æ¢ç´¢æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹ï¼Œç„¶åæ¢ç´¢ä¸‹ä¸€å±‚ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(<span class="type">int</span> start, Map&lt;Integer, List&lt;Integer&gt;&gt; graph)</span> &#123;</span><br><span class="line">    Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    Queue&lt;Integer&gt; queue = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    queue.add(start);</span><br><span class="line">    visited.add(start);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">node</span> <span class="operator">=</span> queue.poll();</span><br><span class="line">        System.out.println(node);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> neighbor : graph.getOrDefault(node, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;())) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited.contains(neighbor)) &#123;</span><br><span class="line">                visited.add(neighbor);</span><br><span class="line">                queue.add(neighbor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(V+E)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(V)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>é˜Ÿåˆ—ä¿è¯äº†å¹¿åº¦ä¼˜å…ˆ</li>
<li>è®¿é—®æ—¶å°±æ ‡è®°ï¼Œé¿å…é‡å¤åŠ å…¥é˜Ÿåˆ—</li>
<li>é€‚åˆæœ€çŸ­è·¯å¾„é—®é¢˜</li>
</ul>
<h3 id="4-5-DFS-vs-BFS-å¯¹æ¯”"><a href="#4-5-DFS-vs-BFS-å¯¹æ¯”" class="headerlink" title="4.5 DFS vs BFS å¯¹æ¯”"></a>4.5 DFS vs BFS å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>DFS</th>
<th>BFS</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ•°æ®ç»“æ„</strong></td>
<td>æ ˆ</td>
<td>é˜Ÿåˆ—</td>
</tr>
<tr>
<td><strong>ç©ºé—´å¤æ‚åº¦</strong></td>
<td>O(V)</td>
<td>O(V)</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>è¿é€šæ€§ã€ç¯æ£€æµ‹ã€æ‹“æ‰‘æ’åº</td>
<td>æœ€çŸ­è·¯å¾„ã€åˆ†å±‚</td>
</tr>
<tr>
<td><strong>éå†é¡ºåº</strong></td>
<td>æ·±åº¦ä¼˜å…ˆ</td>
<td>å¹¿åº¦ä¼˜å…ˆ</td>
</tr>
</tbody></table>
<hr>
<h2 id="äº”ã€ç‰¹æ®Šæ•°æ®ç»“æ„éå†"><a href="#äº”ã€ç‰¹æ®Šæ•°æ®ç»“æ„éå†" class="headerlink" title="äº”ã€ç‰¹æ®Šæ•°æ®ç»“æ„éå†"></a>äº”ã€ç‰¹æ®Šæ•°æ®ç»“æ„éå†</h2><h3 id="5-1-äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰éå†"><a href="#5-1-äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰éå†" class="headerlink" title="5.1 äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰éå†"></a>5.1 äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰éå†</h3><p><strong>ç‰¹æ€§</strong>ï¼šå·¦å­æ ‘ &lt; æ ¹ &lt; å³å­æ ‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">inorderBST</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    inorderBST(node.left);</span><br><span class="line">    System.out.println(node.val);  <span class="comment">// è¾“å‡ºæœ‰åº</span></span><br><span class="line">    inorderBST(node.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment">//       5</span></span><br><span class="line"><span class="comment">//      / \</span></span><br><span class="line"><span class="comment">//     3   7</span></span><br><span class="line"><span class="comment">//    / \ / \</span></span><br><span class="line"><span class="comment">//   2  4 6  8</span></span><br><span class="line"><span class="comment">// ä¸­åºè¾“å‡ºï¼š2 3 4 5 6 7 8</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä¸­åºéå†çš„ç‰¹æ®Šåº”ç”¨</li>
<li>åˆ©ç”¨ BST çš„æœ‰åºæ€§</li>
<li>æ—¶é—´å¤æ‚åº¦ O(n)</li>
</ul>
<h3 id="5-2-å †çš„éå†"><a href="#5-2-å †çš„éå†" class="headerlink" title="5.2 å †çš„éå†"></a>5.2 å †çš„éå†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å †é€šå¸¸ç”¨æ•°ç»„è¡¨ç¤º</span></span><br><span class="line"><span class="type">int</span>[] heap = &#123;<span class="number">10</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰æ•°ç»„é¡ºåºéå†ï¼ˆå±‚åºï¼‰</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; heap.length; i++) &#123;</span><br><span class="line">    System.out.println(heap[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŠ‚ç‚¹å…³ç³»ï¼š</span></span><br><span class="line"><span class="comment">// èŠ‚ç‚¹ i çš„å·¦å­èŠ‚ç‚¹ï¼š2*i + 1</span></span><br><span class="line"><span class="comment">// èŠ‚ç‚¹ i çš„å³å­èŠ‚ç‚¹ï¼š2*i + 2</span></span><br><span class="line"><span class="comment">// èŠ‚ç‚¹ i çš„çˆ¶èŠ‚ç‚¹ï¼š(i-1)/2</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>å †ç”¨æ•°ç»„è¡¨ç¤ºï¼ŒæŒ‰å±‚åºå­˜å‚¨</li>
<li>éå†å°±æ˜¯æŒ‰æ•°ç»„é¡ºåºè®¿é—®</li>
<li>æ—¶é—´å¤æ‚åº¦ O(n)</li>
</ul>
<h3 id="5-3-å“ˆå¸Œè¡¨éå†"><a href="#5-3-å“ˆå¸Œè¡¨éå†" class="headerlink" title="5.3 å“ˆå¸Œè¡¨éå†"></a>5.3 å“ˆå¸Œè¡¨éå†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">map.put(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>);</span><br><span class="line">map.put(<span class="string">&quot;b&quot;</span>, <span class="number">2</span>);</span><br><span class="line">map.put(<span class="string">&quot;c&quot;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼1ï¼šéå† key</span></span><br><span class="line"><span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">    System.out.println(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šéå† value</span></span><br><span class="line"><span class="keyword">for</span> (Integer value : map.values()) &#123;</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼3ï¼šéå† entryï¼ˆæœ€é«˜æ•ˆï¼‰</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼4ï¼šè¿­ä»£å™¨</span></span><br><span class="line">Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;String, Integer&gt; entry = iterator.next();</span><br><span class="line">    System.out.println(entry.getKey() + <span class="string">&quot;: &quot;</span> + entry.getValue());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ï¼šO(n)</span></span><br><span class="line"><span class="comment">// ç©ºé—´å¤æ‚åº¦ï¼šO(1)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è·¯åˆ†æ</strong>ï¼š</p>
<ul>
<li>éå† entry æœ€é«˜æ•ˆï¼ˆé¿å…é‡å¤æŸ¥è¯¢ï¼‰</li>
<li>å“ˆå¸Œè¡¨æ— åºï¼Œéå†é¡ºåºä¸ç¡®å®š</li>
<li>éå†ä¸­åˆ é™¤éœ€è¦ç”¨è¿­ä»£å™¨</li>
</ul>
<hr>
<h2 id="å…­ã€éå†çš„é€šç”¨æ€è·¯æ€»ç»“"><a href="#å…­ã€éå†çš„é€šç”¨æ€è·¯æ€»ç»“" class="headerlink" title="å…­ã€éå†çš„é€šç”¨æ€è·¯æ€»ç»“"></a>å…­ã€éå†çš„é€šç”¨æ€è·¯æ€»ç»“</h2><h3 id="6-1-éå†çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ "><a href="#6-1-éå†çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ " class="headerlink" title="6.1 éå†çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ "></a>6.1 éå†çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ </h3><table>
<thead>
<tr>
<th>è¦ç´ </th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>è®¿é—®é¡ºåº</strong></td>
<td>æŒ‰ä»€ä¹ˆé¡ºåºè®¿é—®å…ƒç´ </td>
<td>å‰åºã€ä¸­åºã€ååºã€å±‚åº</td>
</tr>
<tr>
<td><strong>çŠ¶æ€ç®¡ç†</strong></td>
<td>å¦‚ä½•è·Ÿè¸ªå·²è®¿é—®çš„å…ƒç´ </td>
<td>visited é›†åˆã€æŒ‡é’ˆä½ç½®</td>
</tr>
<tr>
<td><strong>ç»ˆæ­¢æ¡ä»¶</strong></td>
<td>ä½•æ—¶åœæ­¢éå†</td>
<td>nullã€é˜Ÿåˆ—ä¸ºç©ºã€visited å®Œå…¨</td>
</tr>
</tbody></table>
<h3 id="6-2-é€‰æ‹©éå†æ–¹å¼çš„å†³ç­–æ ‘"><a href="#6-2-é€‰æ‹©éå†æ–¹å¼çš„å†³ç­–æ ‘" class="headerlink" title="6.2 é€‰æ‹©éå†æ–¹å¼çš„å†³ç­–æ ‘"></a>6.2 é€‰æ‹©éå†æ–¹å¼çš„å†³ç­–æ ‘</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦éå†æ•°æ®ç»“æ„</span><br><span class="line">    â†“</span><br><span class="line">æ˜¯å¦éœ€è¦ç‰¹å®šé¡ºåºï¼Ÿ</span><br><span class="line">    â”œâ”€ æ˜¯ â†’ é€‰æ‹©å¯¹åº”çš„éå†æ–¹å¼</span><br><span class="line">    â”‚       â”œâ”€ å‰åºï¼šå…ˆå¤„ç†çˆ¶èŠ‚ç‚¹</span><br><span class="line">    â”‚       â”œâ”€ ä¸­åºï¼šæœ‰åºå¤„ç†ï¼ˆBSTï¼‰</span><br><span class="line">    â”‚       â”œâ”€ ååºï¼šå…ˆå¤„ç†å­èŠ‚ç‚¹</span><br><span class="line">    â”‚       â””â”€ å±‚åºï¼šæŒ‰å±‚å¤„ç†</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€ å¦ â†’ é€‰æ‹©æœ€ç®€å•çš„æ–¹å¼</span><br><span class="line">            â”œâ”€ çº¿æ€§ç»“æ„ â†’ for å¾ªç¯</span><br><span class="line">            â”œâ”€ æ ‘ â†’ DFS æˆ– BFS</span><br><span class="line">            â””â”€ å›¾ â†’ DFS æˆ– BFS</span><br></pre></td></tr></table></figure>

<h3 id="6-3-é€’å½’-vs-è¿­ä»£"><a href="#6-3-é€’å½’-vs-è¿­ä»£" class="headerlink" title="6.3 é€’å½’ vs è¿­ä»£"></a>6.3 é€’å½’ vs è¿­ä»£</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>é€’å½’</th>
<th>è¿­ä»£</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»£ç ç®€æ´æ€§</strong></td>
<td>ç®€æ´</td>
<td>å¤æ‚</td>
</tr>
<tr>
<td><strong>ç©ºé—´å¤æ‚åº¦</strong></td>
<td>O(h)ï¼ˆæ ˆï¼‰</td>
<td>O(h)ï¼ˆæ ˆï¼‰</td>
</tr>
<tr>
<td><strong>æ ˆæº¢å‡ºé£é™©</strong></td>
<td>é«˜ï¼ˆæ·±åº¦å¤§ï¼‰</td>
<td>ä½</td>
</tr>
<tr>
<td><strong>ç†è§£éš¾åº¦</strong></td>
<td>å®¹æ˜“</td>
<td>è¾ƒéš¾</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ç•¥ä½ï¼ˆå‡½æ•°è°ƒç”¨ï¼‰</td>
<td>ç•¥é«˜</td>
</tr>
</tbody></table>
<hr>
<h2 id="ä¸ƒã€å¸¸è§éå†é—®é¢˜"><a href="#ä¸ƒã€å¸¸è§éå†é—®é¢˜" class="headerlink" title="ä¸ƒã€å¸¸è§éå†é—®é¢˜"></a>ä¸ƒã€å¸¸è§éå†é—®é¢˜</h2><h3 id="7-1-å¦‚ä½•åœ¨éå†ä¸­åˆ é™¤å…ƒç´ ï¼Ÿ"><a href="#7-1-å¦‚ä½•åœ¨éå†ä¸­åˆ é™¤å…ƒç´ ï¼Ÿ" class="headerlink" title="7.1 å¦‚ä½•åœ¨éå†ä¸­åˆ é™¤å…ƒç´ ï¼Ÿ"></a>7.1 å¦‚ä½•åœ¨éå†ä¸­åˆ é™¤å…ƒç´ ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯æ–¹å¼ï¼šç›´æ¥åˆ é™¤</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list.get(i) == <span class="number">3</span>) &#123;</span><br><span class="line">        list.remove(i);  <span class="comment">// ä¼šå¯¼è‡´ç´¢å¼•æ··ä¹±</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®æ–¹å¼1ï¼šä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line">Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (iterator.next() == <span class="number">3</span>) &#123;</span><br><span class="line">        iterator.remove();  <span class="comment">// å®‰å…¨åˆ é™¤</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®æ–¹å¼2ï¼šåå‘éå†</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> list.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">if</span> (list.get(i) == <span class="number">3</span>) &#123;</span><br><span class="line">        list.remove(i);  <span class="comment">// ä¸å½±å“åç»­ç´¢å¼•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®æ–¹å¼3ï¼šæ”¶é›†è¦åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">List&lt;Integer&gt; toRemove = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> num : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">3</span>) &#123;</span><br><span class="line">        toRemove.add(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">list.removeAll(toRemove);</span><br></pre></td></tr></table></figure>

<h3 id="7-2-å¦‚ä½•å¤„ç†ç¯å½¢ç»“æ„ï¼Ÿ"><a href="#7-2-å¦‚ä½•å¤„ç†ç¯å½¢ç»“æ„ï¼Ÿ" class="headerlink" title="7.2 å¦‚ä½•å¤„ç†ç¯å½¢ç»“æ„ï¼Ÿ"></a>7.2 å¦‚ä½•å¤„ç†ç¯å½¢ç»“æ„ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é—®é¢˜ï¼šé“¾è¡¨ä¸­å¯èƒ½æœ‰ç¯</span></span><br><span class="line"><span class="comment">// è§£å†³ï¼šä½¿ç”¨ visited é›†åˆæˆ–å¿«æ…¢æŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼1ï¼švisited é›†åˆ</span></span><br><span class="line">Set&lt;ListNode&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (visited.contains(current)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ£€æµ‹åˆ°ç¯&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    visited.add(current);</span><br><span class="line">    current = current.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šå¿«æ…¢æŒ‡é’ˆï¼ˆFloyd ç®—æ³•ï¼‰</span></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">slow</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="type">ListNode</span> <span class="variable">fast</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="keyword">while</span> (fast != <span class="literal">null</span> &amp;&amp; fast.next != <span class="literal">null</span>) &#123;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    fast = fast.next.next;</span><br><span class="line">    <span class="keyword">if</span> (slow == fast) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ£€æµ‹åˆ°ç¯&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-å¦‚ä½•å¤„ç†ä¸è¿é€šçš„å›¾ï¼Ÿ"><a href="#7-3-å¦‚ä½•å¤„ç†ä¸è¿é€šçš„å›¾ï¼Ÿ" class="headerlink" title="7.3 å¦‚ä½•å¤„ç†ä¸è¿é€šçš„å›¾ï¼Ÿ"></a>7.3 å¦‚ä½•å¤„ç†ä¸è¿é€šçš„å›¾ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é—®é¢˜ï¼šå›¾å¯èƒ½æœ‰å¤šä¸ªè¿é€šåˆ†é‡</span></span><br><span class="line"><span class="comment">// è§£å†³ï¼šå¯¹æ¯ä¸ªæœªè®¿é—®çš„èŠ‚ç‚¹è¿›è¡Œ DFS/BFS</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverseAllComponents</span><span class="params">(Map&lt;Integer, List&lt;Integer&gt;&gt; graph)</span> &#123;</span><br><span class="line">    Set&lt;Integer&gt; visited = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> node : graph.keySet()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!visited.contains(node)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;--- æ–°çš„è¿é€šåˆ†é‡ ---&quot;</span>);</span><br><span class="line">            dfs(node, graph, visited);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å…«ã€æ€§èƒ½å¯¹æ¯”æ€»ç»“"><a href="#å…«ã€æ€§èƒ½å¯¹æ¯”æ€»ç»“" class="headerlink" title="å…«ã€æ€§èƒ½å¯¹æ¯”æ€»ç»“"></a>å…«ã€æ€§èƒ½å¯¹æ¯”æ€»ç»“</h2><table>
<thead>
<tr>
<th>æ•°æ®ç»“æ„</th>
<th>éå†æ–¹å¼</th>
<th>æ—¶é—´å¤æ‚åº¦</th>
<th>ç©ºé—´å¤æ‚åº¦</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td>æ•°ç»„</td>
<td>for å¾ªç¯</td>
<td>O(n)</td>
<td>O(1)</td>
<td>é¡ºåºè®¿é—®</td>
</tr>
<tr>
<td>é“¾è¡¨</td>
<td>while å¾ªç¯</td>
<td>O(n)</td>
<td>O(1)</td>
<td>é¡ºåºè®¿é—®</td>
</tr>
<tr>
<td>æ ‘</td>
<td>DFSï¼ˆé€’å½’ï¼‰</td>
<td>O(n)</td>
<td>O(h)</td>
<td>æ·±åº¦ä¼˜å…ˆ</td>
</tr>
<tr>
<td>æ ‘</td>
<td>BFSï¼ˆé˜Ÿåˆ—ï¼‰</td>
<td>O(n)</td>
<td>O(w)</td>
<td>å¹¿åº¦ä¼˜å…ˆ</td>
</tr>
<tr>
<td>å›¾</td>
<td>DFS</td>
<td>O(V+E)</td>
<td>O(V)</td>
<td>è¿é€šæ€§æ£€æµ‹</td>
</tr>
<tr>
<td>å›¾</td>
<td>BFS</td>
<td>O(V+E)</td>
<td>O(V)</td>
<td>æœ€çŸ­è·¯å¾„</td>
</tr>
<tr>
<td>å“ˆå¸Œè¡¨</td>
<td>entry éå†</td>
<td>O(n)</td>
<td>O(1)</td>
<td>é”®å€¼å¯¹è®¿é—®</td>
</tr>
</tbody></table>
<hr>
<h2 id="ç›¸å…³ç¬”è®°"><a href="#ç›¸å…³ç¬”è®°" class="headerlink" title="ç›¸å…³ç¬”è®°"></a>ç›¸å…³ç¬”è®°</h2><ul>
<li>æ•°ç»„æ“ä½œè¯¦è§£</li>
<li>é“¾è¡¨æ“ä½œè¯¦è§£</li>
<li>æ ‘çš„æ“ä½œè¯¦è§£</li>
<li>å›¾çš„æ“ä½œè¯¦è§£</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/12/%E9%80%92%E5%BD%92%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/12/%E9%80%92%E5%BD%92%E8%AF%A6%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">é€’å½’è¯¦è§£ä¸åº”ç”¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-12 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-12T00:00:00+08:00">2026-01-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">æ•°æ®ç»“æ„</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="é€’å½’è¯¦è§£ä¸åº”ç”¨"><a href="#é€’å½’è¯¦è§£ä¸åº”ç”¨" class="headerlink" title="é€’å½’è¯¦è§£ä¸åº”ç”¨"></a>é€’å½’è¯¦è§£ä¸åº”ç”¨</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>é€’å½’</strong> æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§ï¼Œå‡½æ•°è°ƒç”¨è‡ªèº«æ¥è§£å†³é—®é¢˜ã€‚é€’å½’çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°†å¤§é—®é¢˜åˆ†è§£ä¸ºç›¸åŒçš„å°é—®é¢˜ï¼Œç›´åˆ°é—®é¢˜è¶³å¤Ÿå°å¯ä»¥ç›´æ¥æ±‚è§£</strong>ã€‚</p>
<blockquote>
<p><strong>ğŸ’¡ æç¤º: æ ¸å¿ƒæ€æƒ³</strong><br>é€’å½’ &#x3D; è‡ªæˆ‘è°ƒç”¨ + ç»ˆæ­¢æ¡ä»¶ + é—®é¢˜åˆ†è§£</p>
</blockquote>
<hr>
<h2 id="ä¸€ã€é€’å½’çš„ä¸‰ä¸ªè¦ç´ "><a href="#ä¸€ã€é€’å½’çš„ä¸‰ä¸ªè¦ç´ " class="headerlink" title="ä¸€ã€é€’å½’çš„ä¸‰ä¸ªè¦ç´ "></a>ä¸€ã€é€’å½’çš„ä¸‰ä¸ªè¦ç´ </h2><h3 id="1-1-é€’å½’çš„æœ¬è´¨"><a href="#1-1-é€’å½’çš„æœ¬è´¨" class="headerlink" title="1.1 é€’å½’çš„æœ¬è´¨"></a>1.1 é€’å½’çš„æœ¬è´¨</h3><p>é€’å½’å°±æ˜¯<strong>å‡½æ•°è°ƒç”¨è‡ªå·±</strong>ï¼Œä½†æ¯æ¬¡è°ƒç”¨éƒ½åœ¨å¤„ç†ä¸€ä¸ªæ›´å°çš„é—®é¢˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¤§é—®é¢˜</span><br><span class="line">  â†“</span><br><span class="line">åˆ†è§£ä¸ºæ›´å°çš„é—®é¢˜ + è°ƒç”¨è‡ªå·±</span><br><span class="line">  â†“</span><br><span class="line">ç»§ç»­åˆ†è§£</span><br><span class="line">  â†“</span><br><span class="line">ç›´åˆ°é—®é¢˜è¶³å¤Ÿå°</span><br><span class="line">  â†“</span><br><span class="line">ç›´æ¥æ±‚è§£ï¼ˆè¿”å›ç»“æœï¼‰</span><br><span class="line">  â†“</span><br><span class="line">é€å±‚è¿”å›ç»“æœ</span><br></pre></td></tr></table></figure>

<h3 id="1-2-é€’å½’çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶"><a href="#1-2-é€’å½’çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶" class="headerlink" title="1.2 é€’å½’çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶"></a>1.2 é€’å½’çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶</h3><table>
<thead>
<tr>
<th>æ¡ä»¶</th>
<th>è¯´æ˜</th>
<th>é‡è¦æ€§</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é€’å½’å…³ç³»</strong></td>
<td>å‡½æ•°è°ƒç”¨è‡ªèº«</td>
<td>å¿…é¡»</td>
</tr>
<tr>
<td><strong>ç»ˆæ­¢æ¡ä»¶</strong></td>
<td>ä½•æ—¶åœæ­¢é€’å½’</td>
<td><strong>å¿…é¡»</strong>ï¼ˆæ²¡æœ‰ä¼šæ— é™å¾ªç¯ï¼‰</td>
</tr>
<tr>
<td><strong>é—®é¢˜åˆ†è§£</strong></td>
<td>å¦‚ä½•å°†å¤§é—®é¢˜åˆ†è§£ä¸ºå°é—®é¢˜</td>
<td>å¿…é¡»</td>
</tr>
</tbody></table>
<h3 id="1-3-é€’å½’çš„é€šç”¨æ¨¡æ¿"><a href="#1-3-é€’å½’çš„é€šç”¨æ¨¡æ¿" class="headerlink" title="1.3 é€’å½’çš„é€šç”¨æ¨¡æ¿"></a>1.3 é€’å½’çš„é€šç”¨æ¨¡æ¿</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’å‡½æ•°çš„æ ‡å‡†æ¨¡æ¿</span></span><br><span class="line">è¿”å›å€¼ç±»å‹ recursiveFunction(å‚æ•°) &#123;</span><br><span class="line">    <span class="comment">// 1. ç»ˆæ­¢æ¡ä»¶ï¼ˆåŸºç¡€æƒ…å†µï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (ç»ˆæ­¢æ¡ä»¶) &#123;</span><br><span class="line">        <span class="keyword">return</span> åŸºç¡€æƒ…å†µçš„ç»“æœ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. é€’å½’å…³ç³»ï¼ˆé€’å½’æƒ…å†µï¼‰</span></span><br><span class="line">    <span class="comment">// è°ƒç”¨è‡ªèº«å¤„ç†æ›´å°çš„é—®é¢˜</span></span><br><span class="line">    è¿”å›å€¼ = recursiveFunction(æ›´å°çš„å‚æ•°);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. å¤„ç†ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> å¤„ç†åçš„ç»“æœ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äºŒã€é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹"><a href="#äºŒã€é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="äºŒã€é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹"></a>äºŒã€é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹</h2><h3 id="2-1-é€’å½’æ ˆçš„æ¦‚å¿µ"><a href="#2-1-é€’å½’æ ˆçš„æ¦‚å¿µ" class="headerlink" title="2.1 é€’å½’æ ˆçš„æ¦‚å¿µ"></a>2.1 é€’å½’æ ˆçš„æ¦‚å¿µ</h3><p>å½“å‡½æ•°è°ƒç”¨è‡ªå·±æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåœ¨<strong>æ ˆ</strong>ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œç¯å¢ƒã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">é€’å½’è°ƒç”¨è¿‡ç¨‹ï¼š</span><br><span class="line">recursion(5)</span><br><span class="line">  â†“ è°ƒç”¨</span><br><span class="line">recursion(4)</span><br><span class="line">  â†“ è°ƒç”¨</span><br><span class="line">recursion(3)</span><br><span class="line">  â†“ è°ƒç”¨</span><br><span class="line">recursion(2)</span><br><span class="line">  â†“ è°ƒç”¨</span><br><span class="line">recursion(1)</span><br><span class="line">  â†“ åˆ°è¾¾ç»ˆæ­¢æ¡ä»¶</span><br><span class="line">return 1</span><br><span class="line">  â†‘ è¿”å›</span><br><span class="line">return 2 * 1 = 2</span><br><span class="line">  â†‘ è¿”å›</span><br><span class="line">return 3 * 2 = 6</span><br><span class="line">  â†‘ è¿”å›</span><br><span class="line">return 4 * 6 = 24</span><br><span class="line">  â†‘ è¿”å›</span><br><span class="line">return 5 * 24 = 120</span><br></pre></td></tr></table></figure>

<h3 id="2-2-é€’å½’æ ˆçš„å†…å­˜å ç”¨"><a href="#2-2-é€’å½’æ ˆçš„å†…å­˜å ç”¨" class="headerlink" title="2.2 é€’å½’æ ˆçš„å†…å­˜å ç”¨"></a>2.2 é€’å½’æ ˆçš„å†…å­˜å ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">æ ˆå†…å­˜ï¼š</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ recursion(1)    â”‚ â† æœ€åå…¥æ ˆ</span><br><span class="line">â”‚ å±€éƒ¨å˜é‡: n=1   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ recursion(2)    â”‚</span><br><span class="line">â”‚ å±€éƒ¨å˜é‡: n=2   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ recursion(3)    â”‚</span><br><span class="line">â”‚ å±€éƒ¨å˜é‡: n=3   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ recursion(4)    â”‚</span><br><span class="line">â”‚ å±€éƒ¨å˜é‡: n=4   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ recursion(5)    â”‚ â† æœ€å…ˆå…¥æ ˆ</span><br><span class="line">â”‚ å±€éƒ¨å˜é‡: n=5   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">é€’å½’æ·±åº¦ = 5</span><br><span class="line">æ ˆç©ºé—´ = 5 Ã— æ¯ä¸ªå‡½æ•°çš„ç©ºé—´</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šå ç”¨æ ˆç©ºé—´</li>
<li>é€’å½’æ·±åº¦è¶Šæ·±ï¼Œå ç”¨çš„æ ˆç©ºé—´è¶Šå¤š</li>
<li>æ ˆç©ºé—´æœ‰é™ï¼Œè¿‡æ·±çš„é€’å½’ä¼šå¯¼è‡´æ ˆæº¢å‡º</li>
</ul>
<hr>
<h2 id="ä¸‰ã€é€’å½’çš„å®é™…ä¾‹å­"><a href="#ä¸‰ã€é€’å½’çš„å®é™…ä¾‹å­" class="headerlink" title="ä¸‰ã€é€’å½’çš„å®é™…ä¾‹å­"></a>ä¸‰ã€é€’å½’çš„å®é™…ä¾‹å­</h2><h3 id="3-1-ä¾‹å­1ï¼šè®¡ç®—é˜¶ä¹˜"><a href="#3-1-ä¾‹å­1ï¼šè®¡ç®—é˜¶ä¹˜" class="headerlink" title="3.1 ä¾‹å­1ï¼šè®¡ç®—é˜¶ä¹˜"></a>3.1 ä¾‹å­1ï¼šè®¡ç®—é˜¶ä¹˜</h3><h4 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5! = 5 Ã— 4!</span><br><span class="line">4! = 4 Ã— 3!</span><br><span class="line">3! = 3 Ã— 2!</span><br><span class="line">2! = 2 Ã— 1!</span><br><span class="line">1! = 1ï¼ˆåŸºç¡€æƒ…å†µï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>é€’å½’å…³ç³»</strong>ï¼š<code>n! = n Ã— (n-1)!</code><br><strong>ç»ˆæ­¢æ¡ä»¶</strong>ï¼š<code>n == 1</code></p>
<h4 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’æ–¹å¼</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">factorial</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;  <span class="comment">// åŸºç¡€æƒ…å†µ</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. é€’å½’å…³ç³»</span></span><br><span class="line">    <span class="comment">// è°ƒç”¨è‡ªèº«å¤„ç†æ›´å°çš„é—®é¢˜</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> n * factorial(n - <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> factorial(<span class="number">5</span>);  <span class="comment">// è¿”å› 120</span></span><br></pre></td></tr></table></figure>

<h4 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">factorial(5)</span><br><span class="line">  â†“ 5 != 1ï¼Œç»§ç»­é€’å½’</span><br><span class="line">  â†“ è®¡ç®— 5 * factorial(4)</span><br><span class="line">    â†“ factorial(4)</span><br><span class="line">    â†“ 4 != 1ï¼Œç»§ç»­é€’å½’</span><br><span class="line">    â†“ è®¡ç®— 4 * factorial(3)</span><br><span class="line">      â†“ factorial(3)</span><br><span class="line">      â†“ 3 != 1ï¼Œç»§ç»­é€’å½’</span><br><span class="line">      â†“ è®¡ç®— 3 * factorial(2)</span><br><span class="line">        â†“ factorial(2)</span><br><span class="line">        â†“ 2 != 1ï¼Œç»§ç»­é€’å½’</span><br><span class="line">        â†“ è®¡ç®— 2 * factorial(1)</span><br><span class="line">          â†“ factorial(1)</span><br><span class="line">          â†“ 1 == 1ï¼Œåˆ°è¾¾ç»ˆæ­¢æ¡ä»¶</span><br><span class="line">          â†“ return 1</span><br><span class="line">        â†“ return 2 * 1 = 2</span><br><span class="line">      â†“ return 3 * 2 = 6</span><br><span class="line">    â†“ return 4 * 6 = 24</span><br><span class="line">  â†“ return 5 * 24 = 120</span><br></pre></td></tr></table></figure>

<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)<br><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼ˆé€’å½’æ ˆæ·±åº¦ï¼‰</p>
<h3 id="3-2-ä¾‹å­2ï¼šé“¾è¡¨éå†ï¼ˆæ ‘éå†çš„åŸºç¡€ï¼‰"><a href="#3-2-ä¾‹å­2ï¼šé“¾è¡¨éå†ï¼ˆæ ‘éå†çš„åŸºç¡€ï¼‰" class="headerlink" title="3.2 ä¾‹å­2ï¼šé“¾è¡¨éå†ï¼ˆæ ‘éå†çš„åŸºç¡€ï¼‰"></a>3.2 ä¾‹å­2ï¼šé“¾è¡¨éå†ï¼ˆæ ‘éå†çš„åŸºç¡€ï¼‰</h3><h4 id="é—®é¢˜åˆ†æ-1"><a href="#é—®é¢˜åˆ†æ-1" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é“¾è¡¨ï¼š1 â†’ 2 â†’ 3 â†’ null</span><br><span class="line"></span><br><span class="line">éå†æ€è·¯ï¼š</span><br><span class="line">- è®¿é—®å½“å‰èŠ‚ç‚¹</span><br><span class="line">- é€’å½’éå†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">- ç»ˆæ­¢æ¡ä»¶ï¼šèŠ‚ç‚¹ä¸º null</span><br></pre></td></tr></table></figure>

<h4 id="é€’å½’å®ç°-1"><a href="#é€’å½’å®ç°-1" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode next;</span><br><span class="line">    </span><br><span class="line">    ListNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’éå†é“¾è¡¨</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;  <span class="comment">// åˆ°è¾¾é“¾è¡¨æœ«å°¾</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. å¤„ç†å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. é€’å½’å¤„ç†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    traverse(node.next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="type">ListNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">1</span>);</span><br><span class="line">head.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">2</span>);</span><br><span class="line">head.next.next = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">traverse(head);  <span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<h4 id="æ‰§è¡Œè¿‡ç¨‹-1"><a href="#æ‰§è¡Œè¿‡ç¨‹-1" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">traverse(node1)  // node1.val = 1</span><br><span class="line">  â†“ node1 != null</span><br><span class="line">  â†“ æ‰“å° 1</span><br><span class="line">  â†“ è°ƒç”¨ traverse(node2)</span><br><span class="line">    â†“ traverse(node2)  // node2.val = 2</span><br><span class="line">    â†“ node2 != null</span><br><span class="line">    â†“ æ‰“å° 2</span><br><span class="line">    â†“ è°ƒç”¨ traverse(node3)</span><br><span class="line">      â†“ traverse(node3)  // node3.val = 3</span><br><span class="line">      â†“ node3 != null</span><br><span class="line">      â†“ æ‰“å° 3</span><br><span class="line">      â†“ è°ƒç”¨ traverse(null)</span><br><span class="line">        â†“ traverse(null)</span><br><span class="line">        â†“ null == nullï¼Œåˆ°è¾¾ç»ˆæ­¢æ¡ä»¶</span><br><span class="line">        â†“ return</span><br><span class="line">      â†“ return</span><br><span class="line">    â†“ return</span><br><span class="line">  â†“ return</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡é€’å½’éƒ½å¤„ç†ä¸€ä¸ªèŠ‚ç‚¹</li>
<li>é€šè¿‡ <code>node.next</code> å°†é—®é¢˜åˆ†è§£ä¸ºæ›´å°çš„é—®é¢˜</li>
<li>å½“ <code>node == null</code> æ—¶åœæ­¢é€’å½’</li>
</ul>
<h3 id="3-3-ä¾‹å­3ï¼šäºŒå‰æ ‘å‰åºéå†"><a href="#3-3-ä¾‹å­3ï¼šäºŒå‰æ ‘å‰åºéå†" class="headerlink" title="3.3 ä¾‹å­3ï¼šäºŒå‰æ ‘å‰åºéå†"></a>3.3 ä¾‹å­3ï¼šäºŒå‰æ ‘å‰åºéå†</h3><h4 id="é—®é¢˜åˆ†æ-2"><a href="#é—®é¢˜åˆ†æ-2" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æ ‘ç»“æ„ï¼š</span><br><span class="line">      1</span><br><span class="line">     / \</span><br><span class="line">    2   3</span><br><span class="line"></span><br><span class="line">å‰åºéå†ï¼šæ ¹ â†’ å·¦å­æ ‘ â†’ å³å­æ ‘</span><br><span class="line">è¾“å‡ºï¼š1 2 3</span><br><span class="line"></span><br><span class="line">é€’å½’æ€è·¯ï¼š</span><br><span class="line">1. è®¿é—®æ ¹èŠ‚ç‚¹</span><br><span class="line">2. é€’å½’éå†å·¦å­æ ‘</span><br><span class="line">3. é€’å½’éå†å³å­æ ‘</span><br></pre></td></tr></table></figure>

<h4 id="é€’å½’å®ç°-2"><a href="#é€’å½’å®ç°-2" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode left;</span><br><span class="line">    TreeNode right;</span><br><span class="line">    </span><br><span class="line">    TreeNode(<span class="type">int</span> val) &#123;</span><br><span class="line">        <span class="built_in">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰åºéå†</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. å¤„ç†æ ¹èŠ‚ç‚¹</span></span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. é€’å½’å¤„ç†å·¦å­æ ‘</span></span><br><span class="line">    preorder(node.left);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. é€’å½’å¤„ç†å³å­æ ‘</span></span><br><span class="line">    preorder(node.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">2</span>);</span><br><span class="line">root.right = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">preorder(root);  <span class="comment">// è¾“å‡ºï¼š1 2 3</span></span><br></pre></td></tr></table></figure>

<h4 id="æ‰§è¡Œè¿‡ç¨‹-2"><a href="#æ‰§è¡Œè¿‡ç¨‹-2" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">preorder(node1)  // node1.val = 1</span><br><span class="line">  â†“ node1 != null</span><br><span class="line">  â†“ æ‰“å° 1</span><br><span class="line">  â†“ è°ƒç”¨ preorder(node2)  // å¤„ç†å·¦å­æ ‘</span><br><span class="line">    â†“ preorder(node2)  // node2.val = 2</span><br><span class="line">    â†“ node2 != null</span><br><span class="line">    â†“ æ‰“å° 2</span><br><span class="line">    â†“ è°ƒç”¨ preorder(null)  // å·¦å­æ ‘ä¸º null</span><br><span class="line">      â†“ return</span><br><span class="line">    â†“ è°ƒç”¨ preorder(null)  // å³å­æ ‘ä¸º null</span><br><span class="line">      â†“ return</span><br><span class="line">    â†“ return</span><br><span class="line">  â†“ è°ƒç”¨ preorder(node3)  // å¤„ç†å³å­æ ‘</span><br><span class="line">    â†“ preorder(node3)  // node3.val = 3</span><br><span class="line">    â†“ node3 != null</span><br><span class="line">    â†“ æ‰“å° 3</span><br><span class="line">    â†“ è°ƒç”¨ preorder(null)  // å·¦å­æ ‘ä¸º null</span><br><span class="line">      â†“ return</span><br><span class="line">    â†“ è°ƒç”¨ preorder(null)  // å³å­æ ‘ä¸º null</span><br><span class="line">      â†“ return</span><br><span class="line">    â†“ return</span><br><span class="line">  â†“ return</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>é€’å½’å¤„ç†ä¸‰ä¸ªéƒ¨åˆ†ï¼šæ ¹ã€å·¦å­æ ‘ã€å³å­æ ‘</li>
<li>æ¯ä¸ªé€’å½’è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¤„ç†ä¸€ä¸ªå­æ ‘</li>
<li>é€šè¿‡ <code>node == null</code> åˆ¤æ–­æ˜¯å¦ç»§ç»­é€’å½’</li>
</ul>
<hr>
<h2 id="å››ã€é€’å½’çš„ä¸‰ä¸ªå…³é”®æ¦‚å¿µ"><a href="#å››ã€é€’å½’çš„ä¸‰ä¸ªå…³é”®æ¦‚å¿µ" class="headerlink" title="å››ã€é€’å½’çš„ä¸‰ä¸ªå…³é”®æ¦‚å¿µ"></a>å››ã€é€’å½’çš„ä¸‰ä¸ªå…³é”®æ¦‚å¿µ</h2><h3 id="4-1-é€’å½’çš„â€ä¿¡ä»»â€"><a href="#4-1-é€’å½’çš„â€ä¿¡ä»»â€" class="headerlink" title="4.1 é€’å½’çš„â€ä¿¡ä»»â€"></a>4.1 é€’å½’çš„â€ä¿¡ä»»â€</h3><p><strong>å…³é”®æ€æƒ³</strong>ï¼šä¸è¦è¯•å›¾è¿½è¸ªæ•´ä¸ªé€’å½’è¿‡ç¨‹ï¼Œè€Œæ˜¯<strong>ç›¸ä¿¡é€’å½’å‡½æ•°èƒ½æ­£ç¡®å¤„ç†æ›´å°çš„é—®é¢˜</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯çš„æ€ç»´æ–¹å¼</span></span><br><span class="line"><span class="comment">// è¯•å›¾è¿½è¸ªæ•´ä¸ªé€’å½’è¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    preorder(node.left);   <span class="comment">// æˆ‘éœ€è¦çŸ¥é“è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆ...</span></span><br><span class="line">    preorder(node.right);  <span class="comment">// è¿˜æœ‰è¿™é‡Œ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®çš„æ€ç»´æ–¹å¼</span></span><br><span class="line"><span class="comment">// ç›¸ä¿¡é€’å½’å‡½æ•°èƒ½æ­£ç¡®å¤„ç†å­æ ‘</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. å¤„ç†å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. ç›¸ä¿¡ preorder èƒ½æ­£ç¡®å¤„ç†å·¦å­æ ‘</span></span><br><span class="line">    preorder(node.left);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. ç›¸ä¿¡ preorder èƒ½æ­£ç¡®å¤„ç†å³å­æ ‘</span></span><br><span class="line">    preorder(node.right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®</strong>ï¼š</p>
<ul>
<li>ä¸è¦è¯•å›¾åœ¨è„‘å­é‡Œæ¨¡æ‹Ÿæ•´ä¸ªé€’å½’è¿‡ç¨‹</li>
<li>åªéœ€è¦ç¡®ä¿ï¼šç»ˆæ­¢æ¡ä»¶æ­£ç¡® + é€’å½’å…³ç³»æ­£ç¡®</li>
<li>ç›¸ä¿¡é€’å½’å‡½æ•°èƒ½å¤„ç†æ›´å°çš„é—®é¢˜</li>
</ul>
<h3 id="4-2-é€’å½’çš„â€åˆ†æ²»â€"><a href="#4-2-é€’å½’çš„â€åˆ†æ²»â€" class="headerlink" title="4.2 é€’å½’çš„â€åˆ†æ²»â€"></a>4.2 é€’å½’çš„â€åˆ†æ²»â€</h3><p><strong>åˆ†æ²»æ€æƒ³</strong>ï¼šå°†å¤§é—®é¢˜åˆ†è§£ä¸ºç›¸åŒçš„å°é—®é¢˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å¤§é—®é¢˜ï¼šéå†æ•´ä¸ªæ ‘</span><br><span class="line">  â†“ åˆ†è§£</span><br><span class="line">å°é—®é¢˜1ï¼šå¤„ç†æ ¹èŠ‚ç‚¹</span><br><span class="line">å°é—®é¢˜2ï¼šéå†å·¦å­æ ‘ï¼ˆä¸å¤§é—®é¢˜ç›¸åŒï¼Œä½†è§„æ¨¡æ›´å°ï¼‰</span><br><span class="line">å°é—®é¢˜3ï¼šéå†å³å­æ ‘ï¼ˆä¸å¤§é—®é¢˜ç›¸åŒï¼Œä½†è§„æ¨¡æ›´å°ï¼‰</span><br><span class="line">  â†“ é€’å½’å¤„ç†å°é—®é¢˜</span><br><span class="line">  â†“ åˆå¹¶ç»“æœ</span><br><span class="line">å®Œæˆ</span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡é€’å½’éƒ½åœ¨å¤„ç†ä¸€ä¸ªæ›´å°çš„é—®é¢˜</li>
<li>é—®é¢˜çš„ç»“æ„ç›¸åŒï¼Œåªæ˜¯è§„æ¨¡ä¸åŒ</li>
<li>æœ€ç»ˆä¼šåˆ°è¾¾åŸºç¡€æƒ…å†µï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰</li>
</ul>
<h3 id="4-3-é€’å½’çš„â€å›æº¯â€"><a href="#4-3-é€’å½’çš„â€å›æº¯â€" class="headerlink" title="4.3 é€’å½’çš„â€å›æº¯â€"></a>4.3 é€’å½’çš„â€å›æº¯â€</h3><p><strong>å›æº¯æ€æƒ³</strong>ï¼šé€’å½’ä¼šè‡ªåŠ¨å›æº¯ï¼Œé€å±‚è¿”å›ç»“æœã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é€’å½’ä¸‹é™ï¼š</span><br><span class="line">level 1 â†’ level 2 â†’ level 3 â†’ ... â†’ åŸºç¡€æƒ…å†µ</span><br><span class="line">                                      â†“</span><br><span class="line">å›æº¯ä¸Šå‡ï¼š</span><br><span class="line">level 1 â† level 2 â† level 3 â† ... â† è¿”å›ç»“æœ</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ååºéå†ï¼ˆå›æº¯çš„å…¸å‹åº”ç”¨ï¼‰</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">postorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    postorder(node.left);   <span class="comment">// å…ˆå¤„ç†å·¦å­æ ‘</span></span><br><span class="line">    postorder(node.right);  <span class="comment">// å†å¤„ç†å³å­æ ‘</span></span><br><span class="line">    System.out.println(node.val);  <span class="comment">// æœ€åå¤„ç†æ ¹èŠ‚ç‚¹ï¼ˆå›æº¯æ—¶ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œè¿‡ç¨‹ï¼š</span></span><br><span class="line"><span class="comment">// 1. é€’å½’ä¸‹é™åˆ°å¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">// 2. å›æº¯æ—¶å¤„ç†èŠ‚ç‚¹ï¼ˆååºï¼‰</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äº”ã€é€’å½’-vs-è¿­ä»£"><a href="#äº”ã€é€’å½’-vs-è¿­ä»£" class="headerlink" title="äº”ã€é€’å½’ vs è¿­ä»£"></a>äº”ã€é€’å½’ vs è¿­ä»£</h2><h3 id="5-1-å¯¹æ¯”è¡¨"><a href="#5-1-å¯¹æ¯”è¡¨" class="headerlink" title="5.1 å¯¹æ¯”è¡¨"></a>5.1 å¯¹æ¯”è¡¨</h3><table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>é€’å½’</th>
<th>è¿­ä»£</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»£ç ç®€æ´æ€§</strong></td>
<td>ç®€æ´ã€æ˜“è¯»</td>
<td>å¤æ‚ã€éœ€è¦æ‰‹åŠ¨ç®¡ç†çŠ¶æ€</td>
</tr>
<tr>
<td><strong>ç©ºé—´å¤æ‚åº¦</strong></td>
<td>O(h)ï¼ˆé€’å½’æ ˆï¼‰</td>
<td>O(1)ï¼ˆé€šå¸¸ï¼‰</td>
</tr>
<tr>
<td><strong>æ—¶é—´å¤æ‚åº¦</strong></td>
<td>ç›¸åŒ</td>
<td>ç›¸åŒ</td>
</tr>
<tr>
<td><strong>æ ˆæº¢å‡ºé£é™©</strong></td>
<td>é«˜ï¼ˆæ·±åº¦å¤§æ—¶ï¼‰</td>
<td>æ— </td>
</tr>
<tr>
<td><strong>ç†è§£éš¾åº¦</strong></td>
<td>éœ€è¦ç†è§£é€’å½’æ€æƒ³</td>
<td>ç›¸å¯¹ç›´è§‚</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ç•¥ä½ï¼ˆå‡½æ•°è°ƒç”¨å¼€é”€ï¼‰</td>
<td>ç•¥é«˜</td>
</tr>
</tbody></table>
<h3 id="5-2-é€’å½’-vs-è¿­ä»£ï¼šé“¾è¡¨éå†"><a href="#5-2-é€’å½’-vs-è¿­ä»£ï¼šé“¾è¡¨éå†" class="headerlink" title="5.2 é€’å½’ vs è¿­ä»£ï¼šé“¾è¡¨éå†"></a>5.2 é€’å½’ vs è¿­ä»£ï¼šé“¾è¡¨éå†</h3><h4 id="é€’å½’æ–¹å¼"><a href="#é€’å½’æ–¹å¼" class="headerlink" title="é€’å½’æ–¹å¼"></a>é€’å½’æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    traverse(node.next);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜ç‚¹ï¼šç®€æ´ã€æ˜“è¯»</span></span><br><span class="line"><span class="comment">// ç¼ºç‚¹ï¼šå ç”¨æ ˆç©ºé—´ï¼Œé“¾è¡¨å¾ˆé•¿æ—¶å¯èƒ½æ ˆæº¢å‡º</span></span><br></pre></td></tr></table></figure>

<h4 id="è¿­ä»£æ–¹å¼"><a href="#è¿­ä»£æ–¹å¼" class="headerlink" title="è¿­ä»£æ–¹å¼"></a>è¿­ä»£æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode node)</span> &#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">current</span> <span class="operator">=</span> node;</span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(current.val);</span><br><span class="line">        current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜ç‚¹ï¼šä¸å ç”¨é¢å¤–æ ˆç©ºé—´ï¼Œæ•ˆç‡é«˜</span></span><br><span class="line"><span class="comment">// ç¼ºç‚¹ï¼šéœ€è¦æ‰‹åŠ¨ç®¡ç†æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-é€’å½’-vs-è¿­ä»£ï¼šæ ‘éå†"><a href="#5-3-é€’å½’-vs-è¿­ä»£ï¼šæ ‘éå†" class="headerlink" title="5.3 é€’å½’ vs è¿­ä»£ï¼šæ ‘éå†"></a>5.3 é€’å½’ vs è¿­ä»£ï¼šæ ‘éå†</h3><h4 id="é€’å½’æ–¹å¼ï¼ˆå‰åºï¼‰"><a href="#é€’å½’æ–¹å¼ï¼ˆå‰åºï¼‰" class="headerlink" title="é€’å½’æ–¹å¼ï¼ˆå‰åºï¼‰"></a>é€’å½’æ–¹å¼ï¼ˆå‰åºï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(node.val);</span><br><span class="line">    preorder(node.left);</span><br><span class="line">    preorder(node.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç ç®€æ´ï¼Œé€»è¾‘æ¸…æ™°</span></span><br></pre></td></tr></table></figure>

<h4 id="è¿­ä»£æ–¹å¼ï¼ˆå‰åºï¼‰"><a href="#è¿­ä»£æ–¹å¼ï¼ˆå‰åºï¼‰" class="headerlink" title="è¿­ä»£æ–¹å¼ï¼ˆå‰åºï¼‰"></a>è¿­ä»£æ–¹å¼ï¼ˆå‰åºï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">preorderIterative</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    stack.push(root);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">node</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">        System.out.println(node.val);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="literal">null</span>) &#123;</span><br><span class="line">            stack.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦æ‰‹åŠ¨ç®¡ç†æ ˆï¼Œé€»è¾‘å¤æ‚</span></span><br></pre></td></tr></table></figure>

<p><strong>å…³é”®è§‚å¯Ÿ</strong>ï¼š</p>
<ul>
<li>é€’å½’æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨ç³»ç»Ÿæ ˆ</li>
<li>è¿­ä»£æ˜¯æ‰‹åŠ¨ç®¡ç†æ ˆ</li>
<li>é€’å½’ç®€æ´ï¼Œè¿­ä»£é«˜æ•ˆ</li>
</ul>
<hr>
<h2 id="å…­ã€é€’å½’çš„å¸¸è§é™·é˜±"><a href="#å…­ã€é€’å½’çš„å¸¸è§é™·é˜±" class="headerlink" title="å…­ã€é€’å½’çš„å¸¸è§é™·é˜±"></a>å…­ã€é€’å½’çš„å¸¸è§é™·é˜±</h2><h3 id="6-1-é™·é˜±1ï¼šæ²¡æœ‰ç»ˆæ­¢æ¡ä»¶"><a href="#6-1-é™·é˜±1ï¼šæ²¡æœ‰ç»ˆæ­¢æ¡ä»¶" class="headerlink" title="6.1 é™·é˜±1ï¼šæ²¡æœ‰ç»ˆæ­¢æ¡ä»¶"></a>6.1 é™·é˜±1ï¼šæ²¡æœ‰ç»ˆæ­¢æ¡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šæ— é™é€’å½’</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n + <span class="number">1</span>);  <span class="comment">// æ°¸è¿œä¸ä¼šåœæ­¢</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šæœ‰ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">10</span>) <span class="keyword">return</span>;  <span class="comment">// ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-é™·é˜±2ï¼šç»ˆæ­¢æ¡ä»¶æ°¸è¿œä¸ä¼šåˆ°è¾¾"><a href="#6-2-é™·é˜±2ï¼šç»ˆæ­¢æ¡ä»¶æ°¸è¿œä¸ä¼šåˆ°è¾¾" class="headerlink" title="6.2 é™·é˜±2ï¼šç»ˆæ­¢æ¡ä»¶æ°¸è¿œä¸ä¼šåˆ°è¾¾"></a>6.2 é™·é˜±2ï¼šç»ˆæ­¢æ¡ä»¶æ°¸è¿œä¸ä¼šåˆ°è¾¾</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šç»ˆæ­¢æ¡ä»¶é”™è¯¯</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n - <span class="number">2</span>);  <span class="comment">// å¦‚æœ n æ˜¯å¥‡æ•°ï¼Œæ°¸è¿œä¸ä¼šç­‰äº 0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šç»ˆæ­¢æ¡ä»¶æ­£ç¡®</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="keyword">return</span>;  <span class="comment">// åŒ…å«æ‰€æœ‰åœæ­¢æƒ…å†µ</span></span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-é™·é˜±3ï¼šé—®é¢˜æ²¡æœ‰çœŸæ­£åˆ†è§£"><a href="#6-3-é™·é˜±3ï¼šé—®é¢˜æ²¡æœ‰çœŸæ­£åˆ†è§£" class="headerlink" title="6.3 é™·é˜±3ï¼šé—®é¢˜æ²¡æœ‰çœŸæ­£åˆ†è§£"></a>6.3 é™·é˜±3ï¼šé—®é¢˜æ²¡æœ‰çœŸæ­£åˆ†è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šé—®é¢˜æ²¡æœ‰å˜å°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n);  <span class="comment">// é—®é¢˜å¤§å°æ²¡å˜ï¼Œæ— é™é€’å½’</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šé—®é¢˜é€æ­¥å˜å°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    System.out.println(n);</span><br><span class="line">    recursion(n - <span class="number">1</span>);  <span class="comment">// é—®é¢˜é€æ­¥å˜å°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-é™·é˜±4ï¼šæ ˆæº¢å‡º"><a href="#6-4-é™·é˜±4ï¼šæ ˆæº¢å‡º" class="headerlink" title="6.4 é™·é˜±4ï¼šæ ˆæº¢å‡º"></a>6.4 é™·é˜±4ï¼šæ ˆæº¢å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ å±é™©ï¼šé€’å½’æ·±åº¦å¤ªå¤§</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    recursion(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">recursion(<span class="number">100000</span>);  <span class="comment">// æ ˆæº¢å‡ºï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… è§£å†³ï¼šä½¿ç”¨è¿­ä»£æˆ–å¢åŠ æ ˆå¤§å°</span></span><br><span class="line"><span class="comment">// æ–¹å¼1ï¼šä½¿ç”¨è¿­ä»£</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100000</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šå¢åŠ æ ˆå¤§å°ï¼ˆJVM å‚æ•°ï¼‰</span></span><br><span class="line"><span class="comment">// java -Xss10m MyProgram</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸ƒã€é€’å½’çš„åº”ç”¨åœºæ™¯"><a href="#ä¸ƒã€é€’å½’çš„åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸ƒã€é€’å½’çš„åº”ç”¨åœºæ™¯"></a>ä¸ƒã€é€’å½’çš„åº”ç”¨åœºæ™¯</h2><h3 id="7-1-é€‚åˆç”¨é€’å½’çš„åœºæ™¯"><a href="#7-1-é€‚åˆç”¨é€’å½’çš„åœºæ™¯" class="headerlink" title="7.1 é€‚åˆç”¨é€’å½’çš„åœºæ™¯"></a>7.1 é€‚åˆç”¨é€’å½’çš„åœºæ™¯</h3><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>åŸå› </th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ ‘&#x2F;å›¾éå†</strong></td>
<td>å¤©ç„¶çš„é€’å½’ç»“æ„</td>
<td>å‰åºã€ä¸­åºã€ååºéå†</td>
</tr>
<tr>
<td><strong>åˆ†æ²»ç®—æ³•</strong></td>
<td>é—®é¢˜å¯åˆ†è§£</td>
<td>å¿«é€Ÿæ’åºã€å½’å¹¶æ’åº</td>
</tr>
<tr>
<td><strong>å›æº¯ç®—æ³•</strong></td>
<td>éœ€è¦å°è¯•æ‰€æœ‰å¯èƒ½</td>
<td>N çš‡åã€ç»„åˆé—®é¢˜</td>
</tr>
<tr>
<td><strong>åŠ¨æ€è§„åˆ’</strong></td>
<td>æœ‰é‡å å­é—®é¢˜</td>
<td>æ–æ³¢é‚£å¥‘æ•°åˆ—</td>
</tr>
</tbody></table>
<h3 id="7-2-ä¸é€‚åˆç”¨é€’å½’çš„åœºæ™¯"><a href="#7-2-ä¸é€‚åˆç”¨é€’å½’çš„åœºæ™¯" class="headerlink" title="7.2 ä¸é€‚åˆç”¨é€’å½’çš„åœºæ™¯"></a>7.2 ä¸é€‚åˆç”¨é€’å½’çš„åœºæ™¯</h3><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>åŸå› </th>
<th>æ›¿ä»£æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>çº¿æ€§éå†</strong></td>
<td>è¿­ä»£æ›´é«˜æ•ˆ</td>
<td>ä½¿ç”¨ while å¾ªç¯</td>
</tr>
<tr>
<td><strong>æ·±åº¦å¾ˆå¤§</strong></td>
<td>å®¹æ˜“æ ˆæº¢å‡º</td>
<td>ä½¿ç”¨è¿­ä»£æˆ–å¢åŠ æ ˆå¤§å°</td>
</tr>
<tr>
<td><strong>æ€§èƒ½å…³é”®</strong></td>
<td>å‡½æ•°è°ƒç”¨å¼€é”€å¤§</td>
<td>ä½¿ç”¨è¿­ä»£</td>
</tr>
</tbody></table>
<hr>
<h2 id="å…«ã€é€’å½’çš„è°ƒè¯•æŠ€å·§"><a href="#å…«ã€é€’å½’çš„è°ƒè¯•æŠ€å·§" class="headerlink" title="å…«ã€é€’å½’çš„è°ƒè¯•æŠ€å·§"></a>å…«ã€é€’å½’çš„è°ƒè¯•æŠ€å·§</h2><h3 id="8-1-æ‰“å°é€’å½’æ ˆ"><a href="#8-1-æ‰“å°é€’å½’æ ˆ" class="headerlink" title="8.1 æ‰“å°é€’å½’æ ˆ"></a>8.1 æ‰“å°é€’å½’æ ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">preorder</span><span class="params">(TreeNode node, <span class="type">int</span> depth)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰“å°ç¼©è¿›è¡¨ç¤ºæ·±åº¦</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">indent</span> <span class="operator">=</span> <span class="string">&quot;  &quot;</span>.repeat(depth);</span><br><span class="line">    System.out.println(indent + <span class="string">&quot;è¿›å…¥: &quot;</span> + node.val);</span><br><span class="line">    </span><br><span class="line">    preorder(node.left, depth + <span class="number">1</span>);</span><br><span class="line">    preorder(node.right, depth + <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(indent + <span class="string">&quot;è¿”å›: &quot;</span> + node.val);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">// è¿›å…¥: 1</span></span><br><span class="line"><span class="comment">//   è¿›å…¥: 2</span></span><br><span class="line"><span class="comment">//   è¿”å›: 2</span></span><br><span class="line"><span class="comment">//   è¿›å…¥: 3</span></span><br><span class="line"><span class="comment">//   è¿”å›: 3</span></span><br><span class="line"><span class="comment">// è¿”å›: 1</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-éªŒè¯ç»ˆæ­¢æ¡ä»¶"><a href="#8-2-éªŒè¯ç»ˆæ­¢æ¡ä»¶" class="headerlink" title="8.2 éªŒè¯ç»ˆæ­¢æ¡ä»¶"></a>8.2 éªŒè¯ç»ˆæ­¢æ¡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// æ·»åŠ æ—¥å¿—éªŒè¯ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€’å½’è°ƒç”¨: n = &quot;</span> + n);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ°è¾¾ç»ˆæ­¢æ¡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    recursion(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-æ£€æŸ¥é—®é¢˜åˆ†è§£"><a href="#8-3-æ£€æŸ¥é—®é¢˜åˆ†è§£" class="headerlink" title="8.3 æ£€æŸ¥é—®é¢˜åˆ†è§£"></a>8.3 æ£€æŸ¥é—®é¢˜åˆ†è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">recursion</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å¤„ç†é—®é¢˜å¤§å°: &quot;</span> + n);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// éªŒè¯é—®é¢˜ç¡®å®åœ¨å˜å°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">nextSize</span> <span class="operator">=</span> n - <span class="number">1</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;ä¸‹ä¸€ä¸ªé—®é¢˜å¤§å°: &quot;</span> + nextSize);</span><br><span class="line">    </span><br><span class="line">    recursion(nextSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¹ã€é€’å½’æ€ç»´çš„åŸ¹å…»"><a href="#ä¹ã€é€’å½’æ€ç»´çš„åŸ¹å…»" class="headerlink" title="ä¹ã€é€’å½’æ€ç»´çš„åŸ¹å…»"></a>ä¹ã€é€’å½’æ€ç»´çš„åŸ¹å…»</h2><h3 id="9-1-ä¸‰æ­¥æ³•"><a href="#9-1-ä¸‰æ­¥æ³•" class="headerlink" title="9.1 ä¸‰æ­¥æ³•"></a>9.1 ä¸‰æ­¥æ³•</h3><p><strong>ç¬¬1æ­¥</strong>ï¼šæ˜ç¡®é€’å½’çš„ä¸‰ä¸ªè¦ç´ </p>
<ul>
<li>ç»ˆæ­¢æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>é€’å½’å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚ä½•åˆ†è§£é—®é¢˜ï¼Ÿ</li>
</ul>
<p><strong>ç¬¬2æ­¥</strong>ï¼šç›¸ä¿¡é€’å½’</p>
<ul>
<li>ä¸è¦è¯•å›¾è¿½è¸ªæ•´ä¸ªè¿‡ç¨‹</li>
<li>åªéœ€ç¡®ä¿é€»è¾‘æ­£ç¡®</li>
<li>ç›¸ä¿¡é€’å½’èƒ½å¤„ç†æ›´å°çš„é—®é¢˜</li>
</ul>
<p><strong>ç¬¬3æ­¥</strong>ï¼šéªŒè¯</p>
<ul>
<li>æµ‹è¯•åŸºç¡€æƒ…å†µ</li>
<li>æµ‹è¯•ç®€å•æƒ…å†µï¼ˆn&#x3D;1, 2, 3ï¼‰</li>
<li>æµ‹è¯•å¤æ‚æƒ…å†µ</li>
</ul>
<h3 id="9-2-ç»ƒä¹ å»ºè®®"><a href="#9-2-ç»ƒä¹ å»ºè®®" class="headerlink" title="9.2 ç»ƒä¹ å»ºè®®"></a>9.2 ç»ƒä¹ å»ºè®®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»ç®€å•åˆ°å¤æ‚</span></span><br><span class="line"><span class="number">1.</span> é˜¶ä¹˜ï¼šfactorial(n)</span><br><span class="line"><span class="number">2.</span> æ–æ³¢é‚£å¥‘ï¼šfib(n)</span><br><span class="line"><span class="number">3.</span> é“¾è¡¨éå†ï¼štraverse(node)</span><br><span class="line"><span class="number">4.</span> æ ‘éå†ï¼špreorder(node)</span><br><span class="line"><span class="number">5.</span> äºŒåˆ†æŸ¥æ‰¾ï¼šbinarySearch(arr, target)</span><br><span class="line"><span class="number">6.</span> å¿«é€Ÿæ’åºï¼šquickSort(arr)</span><br><span class="line"><span class="number">7.</span> å›æº¯ï¼špermutation(arr)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ç›¸å…³ç¬”è®°"><a href="#ç›¸å…³ç¬”è®°" class="headerlink" title="ç›¸å…³ç¬”è®°"></a>ç›¸å…³ç¬”è®°</h2><ul>
<li>å±æ€§æ•°æ®ç»“æ„éå†è¯¦è§£</li>
<li>é“¾è¡¨æ“ä½œè¯¦è§£</li>
<li>æ ‘çš„æ“ä½œè¯¦è§£</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Flux%E6%98%AF%E7%AE%A1%E9%81%93%E4%B8%8D%E6%98%AF%E5%AE%B9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/Flux%E6%98%AF%E7%AE%A1%E9%81%93%E4%B8%8D%E6%98%AF%E5%AE%B9%E5%99%A8/" class="post-title-link" itemprop="url">Fluxæ˜¯ç®¡é“ä¸æ˜¯å®¹å™¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/Reactive-Streams/" itemprop="url" rel="index"><span itemprop="name">Reactive Streams</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Flux-æ˜¯ç®¡é“ï¼Œä¸æ˜¯å®¹å™¨"><a href="#Flux-æ˜¯ç®¡é“ï¼Œä¸æ˜¯å®¹å™¨" class="headerlink" title="Flux æ˜¯ç®¡é“ï¼Œä¸æ˜¯å®¹å™¨"></a>Flux æ˜¯ç®¡é“ï¼Œä¸æ˜¯å®¹å™¨</h1><h2 id="å¸¸è§è¯¯è§£"><a href="#å¸¸è§è¯¯è§£" class="headerlink" title="å¸¸è§è¯¯è§£"></a>å¸¸è§è¯¯è§£</h2><p>å¾ˆå¤šäººåˆå­¦ Reactor æ—¶ä¼šæœ‰è¿™æ ·çš„è¯¯è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç†è§£ï¼šFlux å°±åƒ Listï¼Œæ˜¯è£…æ•°æ®çš„å®¹å™¨</span></span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);  <span class="comment">// 3ä¸ªå…ƒç´ ï¼Œç¡®å®šçš„</span></span><br><span class="line">Flux&lt;String&gt; flux = Flux.just(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);      <span class="comment">// ä¹Ÿæ˜¯3ä¸ªå…ƒç´ ï¼Œç¡®å®šçš„ï¼Ÿ</span></span><br></pre></td></tr></table></figure>

<p>è¿™ç§ç†è§£åœ¨ç®€å•åœºæ™¯ä¸‹æ²¡é—®é¢˜ï¼Œä½†ä¼šå¯¼è‡´æ— æ³•ç†è§£å¤æ‚åœºæ™¯ã€‚</p>
<hr>
<h2 id="æ­£ç¡®ç†è§£ï¼šFlux-æ˜¯æ•°æ®ç®¡é“"><a href="#æ­£ç¡®ç†è§£ï¼šFlux-æ˜¯æ•°æ®ç®¡é“" class="headerlink" title="æ­£ç¡®ç†è§£ï¼šFlux æ˜¯æ•°æ®ç®¡é“"></a>æ­£ç¡®ç†è§£ï¼šFlux æ˜¯æ•°æ®ç®¡é“</h2><h3 id="ç®¡é“-vs-å®¹å™¨"><a href="#ç®¡é“-vs-å®¹å™¨" class="headerlink" title="ç®¡é“ vs å®¹å™¨"></a>ç®¡é“ vs å®¹å™¨</h3><table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>å®¹å™¨ï¼ˆListï¼‰</th>
<th>ç®¡é“ï¼ˆFluxï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ•°æ®å­˜å‚¨</strong></td>
<td>æ•°æ®å­˜åœ¨å†…å­˜ä¸­</td>
<td>æ•°æ®æµç»ç®¡é“</td>
</tr>
<tr>
<td><strong>æ•°æ®æ—¶æœº</strong></td>
<td>åˆ›å»ºæ—¶å°±æœ‰</td>
<td>è®¢é˜…åæ‰å¼€å§‹æµåŠ¨</td>
</tr>
<tr>
<td><strong>æ•°æ®æ¥æº</strong></td>
<td>å·²çŸ¥ã€å›ºå®š</td>
<td>å¯ä»¥æ˜¯ä»»ä½•æºå¤´</td>
</tr>
<tr>
<td><strong>æ•°æ®æ•°é‡</strong></td>
<td>ç¡®å®šçš„</td>
<td>å¯èƒ½ä¸ç¡®å®š</td>
</tr>
<tr>
<td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td>
<td>ä¸€ç›´å­˜åœ¨</td>
<td>æµå®Œå°±ç»“æŸ</td>
</tr>
</tbody></table>
<h3 id="å½¢è±¡æ¯”å–»"><a href="#å½¢è±¡æ¯”å–»" class="headerlink" title="å½¢è±¡æ¯”å–»"></a>å½¢è±¡æ¯”å–»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å®¹å™¨ï¼ˆListï¼‰åƒä¸€ä¸ªæ°´æ¡¶ï¼š</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  æ°´æ°´æ°´  â”‚  â† æ°´å·²ç»åœ¨æ¡¶é‡Œäº†</span><br><span class="line">â”‚  æ°´æ°´æ°´  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">ç®¡é“ï¼ˆFluxï¼‰åƒä¸€æ ¹æ°´ç®¡ï¼š</span><br><span class="line">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">æ°´æº â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚  æ°´ç®¡   â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–¶ å‡ºæ°´å£</span><br><span class="line">ï¼ˆä¸Šæ¸¸ï¼‰              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 ï¼ˆä¸‹æ¸¸ï¼‰</span><br><span class="line">                         â†‘</span><br><span class="line">                    æ°´æµç»è¿™é‡Œ</span><br><span class="line">                    ä½†ä¸å­˜å‚¨åœ¨è¿™é‡Œ</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å®é™…æ¡ˆä¾‹ï¼šè°ƒç”¨å¤§æ¨¡å‹-API"><a href="#å®é™…æ¡ˆä¾‹ï¼šè°ƒç”¨å¤§æ¨¡å‹-API" class="headerlink" title="å®é™…æ¡ˆä¾‹ï¼šè°ƒç”¨å¤§æ¨¡å‹ API"></a>å®é™…æ¡ˆä¾‹ï¼šè°ƒç”¨å¤§æ¨¡å‹ API</h2><h3 id="åœºæ™¯æè¿°"><a href="#åœºæ™¯æè¿°" class="headerlink" title="åœºæ™¯æè¿°"></a>åœºæ™¯æè¿°</h3><p>è°ƒç”¨ OpenAI&#x2F;Claude ç­‰å¤§æ¨¡å‹ APIï¼Œè¿”å›æµå¼å“åº”ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;String&gt; response = webClient.post()</span><br><span class="line">    .uri(<span class="string">&quot;https://api.openai.com/v1/chat/completions&quot;</span>)</span><br><span class="line">    .header(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Bearer &quot;</span> + apiKey)</span><br><span class="line">    .bodyValue(Map.of(</span><br><span class="line">        <span class="string">&quot;model&quot;</span>, <span class="string">&quot;gpt-4&quot;</span>,</span><br><span class="line">        <span class="string">&quot;messages&quot;</span>, List.of(Map.of(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>, <span class="string">&quot;ä½ å¥½&quot;</span>)),</span><br><span class="line">        <span class="string">&quot;stream&quot;</span>, <span class="literal">true</span></span><br><span class="line">    ))</span><br><span class="line">    .retrieve()</span><br><span class="line">    .bodyToFlux(String.class);</span><br></pre></td></tr></table></figure>

<h3 id="é—®é¢˜ï¼šFlux-é‡Œæœ‰å¤šå°‘æ•°æ®ï¼Ÿ"><a href="#é—®é¢˜ï¼šFlux-é‡Œæœ‰å¤šå°‘æ•°æ®ï¼Ÿ" class="headerlink" title="é—®é¢˜ï¼šFlux é‡Œæœ‰å¤šå°‘æ•°æ®ï¼Ÿ"></a>é—®é¢˜ï¼šFlux é‡Œæœ‰å¤šå°‘æ•°æ®ï¼Ÿ</h3><p><strong>ç­”æ¡ˆï¼šä¸çŸ¥é“ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“ï¼</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ª Flux åˆ›å»ºæ—¶ï¼Œå¤§æ¨¡å‹è¿˜æ²¡å¼€å§‹å›å¤</span></span><br><span class="line"><span class="comment">// æ•°æ®é‡å®Œå…¨å–å†³äºå¤§æ¨¡å‹è¦è¯´å¤šå°‘è¯</span></span><br><span class="line">Flux&lt;String&gt; response = callLLM(<span class="string">&quot;è¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯èƒ½è¿”å› 10 ä¸ª chunkï¼Œä¹Ÿå¯èƒ½è¿”å› 100 ä¸ª</span></span><br><span class="line"><span class="comment">// Flux ä¸å…³å¿ƒï¼Œå®ƒåªè´Ÿè´£æŠŠæ•°æ®ä»ä¸Šæ¸¸ä¼ åˆ°ä¸‹æ¸¸</span></span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµåŠ¨è¿‡ç¨‹"><a href="#æ•°æ®æµåŠ¨è¿‡ç¨‹" class="headerlink" title="æ•°æ®æµåŠ¨è¿‡ç¨‹"></a>æ•°æ®æµåŠ¨è¿‡ç¨‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚                        æ—¶é—´çº¿                                    â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T0: åˆ›å»º Flux                                                  â”‚</span><br><span class="line">â”‚      Flux&lt;String&gt; flux = callLLM(prompt);                       â”‚</span><br><span class="line">â”‚      æ­¤æ—¶ï¼šç®¡é“å·²å»ºç«‹ï¼Œä½†æ²¡æœ‰æ•°æ®æµåŠ¨                              â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T1: è®¢é˜… Flux                                                  â”‚</span><br><span class="line">â”‚      flux.subscribe(chunk -&gt; print(chunk));                     â”‚</span><br><span class="line">â”‚      æ­¤æ—¶ï¼šå‘ä¸Šæ¸¸å‘é€è¯·æ±‚ï¼Œå¼€å§‹ç­‰å¾…æ•°æ®                            â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T2: å¤§æ¨¡å‹å¼€å§‹å›å¤                                              â”‚</span><br><span class="line">â”‚      ä¸Šæ¸¸å‘é€ onNext(&quot;ä½ &quot;)                                       â”‚</span><br><span class="line">â”‚      ä¸‹æ¸¸æ”¶åˆ° &quot;ä½ &quot;ï¼Œæ‰“å°                                         â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T3: å¤§æ¨¡å‹ç»§ç»­å›å¤                                              â”‚</span><br><span class="line">â”‚      ä¸Šæ¸¸å‘é€ onNext(&quot;å¥½&quot;)                                       â”‚</span><br><span class="line">â”‚      ä¸‹æ¸¸æ”¶åˆ° &quot;å¥½&quot;ï¼Œæ‰“å°                                         â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T4: å¤§æ¨¡å‹ç»§ç»­å›å¤                                              â”‚</span><br><span class="line">â”‚      ä¸Šæ¸¸å‘é€ onNext(&quot;ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹&quot;)                             â”‚</span><br><span class="line">â”‚      ä¸‹æ¸¸æ”¶åˆ°ï¼Œæ‰“å°                                              â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  T5: å¤§æ¨¡å‹å›å¤å®Œæ¯•                                              â”‚</span><br><span class="line">â”‚      ä¸Šæ¸¸å‘é€ onComplete()                                       â”‚</span><br><span class="line">â”‚      ä¸‹æ¸¸çŸ¥é“æµç»“æŸäº†                                            â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/chat&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span></span><br><span class="line"><span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(<span class="meta">@RequestParam</span> String prompt)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. åˆ›å»º Fluxï¼ˆæ­¤æ—¶æ²¡æœ‰æ•°æ®ï¼‰</span></span><br><span class="line">    Flux&lt;String&gt; response = webClient.post()</span><br><span class="line">        .uri(<span class="string">&quot;/v1/chat/completions&quot;</span>)</span><br><span class="line">        .bodyValue(buildRequest(prompt))</span><br><span class="line">        .retrieve()</span><br><span class="line">        .bodyToFlux(ChatResponse.class)</span><br><span class="line">        .map(r -&gt; r.getChoices().get(<span class="number">0</span>).getDelta().getContent())</span><br><span class="line">        .filter(Objects::nonNull);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. è¿”å› Fluxï¼ˆSpring WebFlux ä¼šè‡ªåŠ¨è®¢é˜…å¹¶æµå¼è¿”å›ç»™å‰ç«¯ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. å‰ç«¯ä¼šé€å­—æ”¶åˆ°å¤§æ¨¡å‹çš„å›å¤</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Flux-çš„æ•°æ®æ¥æº"><a href="#Flux-çš„æ•°æ®æ¥æº" class="headerlink" title="Flux çš„æ•°æ®æ¥æº"></a>Flux çš„æ•°æ®æ¥æº</h2><p>Flux çš„æ•°æ®å¯ä»¥æ¥è‡ªå„ç§æºå¤´ï¼š</p>
<h3 id="1-é™æ€æ•°æ®ï¼ˆç¡®å®šçš„ï¼‰"><a href="#1-é™æ€æ•°æ®ï¼ˆç¡®å®šçš„ï¼‰" class="headerlink" title="1. é™æ€æ•°æ®ï¼ˆç¡®å®šçš„ï¼‰"></a>1. é™æ€æ•°æ®ï¼ˆç¡®å®šçš„ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åœ¨åˆ›å»ºæ—¶å°±ç¡®å®šäº†</span></span><br><span class="line">Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">Flux.fromIterable(list);</span><br><span class="line">Flux.fromArray(array);</span><br></pre></td></tr></table></figure>

<h3 id="2-ç”Ÿæˆè§„åˆ™ï¼ˆæŒ‰è§„åˆ™äº§ç”Ÿï¼‰"><a href="#2-ç”Ÿæˆè§„åˆ™ï¼ˆæŒ‰è§„åˆ™äº§ç”Ÿï¼‰" class="headerlink" title="2. ç”Ÿæˆè§„åˆ™ï¼ˆæŒ‰è§„åˆ™äº§ç”Ÿï¼‰"></a>2. ç”Ÿæˆè§„åˆ™ï¼ˆæŒ‰è§„åˆ™äº§ç”Ÿï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰è§„åˆ™ç”Ÿæˆï¼Œæ•°é‡å¯èƒ½æ— é™</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">100</span>);                    <span class="comment">// 1åˆ°100</span></span><br><span class="line">Flux.interval(Duration.ofSeconds(<span class="number">1</span>));  <span class="comment">// æ¯ç§’ä¸€ä¸ªï¼Œæ— é™</span></span><br></pre></td></tr></table></figure>

<h3 id="3-å¤–éƒ¨æ•°æ®æºï¼ˆä¸ç¡®å®šçš„ï¼‰"><a href="#3-å¤–éƒ¨æ•°æ®æºï¼ˆä¸ç¡®å®šçš„ï¼‰" class="headerlink" title="3. å¤–éƒ¨æ•°æ®æºï¼ˆä¸ç¡®å®šçš„ï¼‰"></a>3. å¤–éƒ¨æ•°æ®æºï¼ˆä¸ç¡®å®šçš„ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®æ¥è‡ªå¤–éƒ¨ï¼Œæ•°é‡ä¸ç¡®å®š</span></span><br><span class="line">Flux&lt;String&gt; httpResponse = webClient.get().retrieve().bodyToFlux(String.class);</span><br><span class="line">Flux&lt;Message&gt; kafkaMessages = kafkaReceiver.receive();</span><br><span class="line">Flux&lt;String&gt; websocketMessages = session.receive().map(WebSocketMessage::getPayloadAsText);</span><br><span class="line">Flux&lt;String&gt; fileLines = Flux.using(</span><br><span class="line">    () -&gt; Files.lines(path),</span><br><span class="line">    Flux::fromStream,</span><br><span class="line">    Stream::close</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="4-æ‰‹åŠ¨æ¨é€ï¼ˆSinksï¼‰"><a href="#4-æ‰‹åŠ¨æ¨é€ï¼ˆSinksï¼‰" class="headerlink" title="4. æ‰‹åŠ¨æ¨é€ï¼ˆSinksï¼‰"></a>4. æ‰‹åŠ¨æ¨é€ï¼ˆSinksï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½ è‡ªå·±å†³å®šä»€ä¹ˆæ—¶å€™å‘é€ä»€ä¹ˆæ•°æ®</span></span><br><span class="line">Sinks.Many&lt;String&gt; sink = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;æ¶ˆæ¯1&quot;</span>);</span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;æ¶ˆæ¯2&quot;</span>);</span><br><span class="line">Flux&lt;String&gt; flux = sink.asFlux();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Flux-æ€ä¹ˆçŸ¥é“æ•°æ®ç»“æŸï¼Ÿ"><a href="#Flux-æ€ä¹ˆçŸ¥é“æ•°æ®ç»“æŸï¼Ÿ" class="headerlink" title="Flux æ€ä¹ˆçŸ¥é“æ•°æ®ç»“æŸï¼Ÿ"></a>Flux æ€ä¹ˆçŸ¥é“æ•°æ®ç»“æŸï¼Ÿ</h2><h3 id="ä¸‰ç§ç»ˆæ­¢ä¿¡å·"><a href="#ä¸‰ç§ç»ˆæ­¢ä¿¡å·" class="headerlink" title="ä¸‰ç§ç»ˆæ­¢ä¿¡å·"></a>ä¸‰ç§ç»ˆæ­¢ä¿¡å·</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">flux.subscribe(</span><br><span class="line">    data -&gt; &#123; &#125;,           <span class="comment">// onNext: æ”¶åˆ°æ•°æ®</span></span><br><span class="line">    error -&gt; &#123; &#125;,          <span class="comment">// onError: å‘ç”Ÿé”™è¯¯ï¼Œæµç»ˆæ­¢</span></span><br><span class="line">    () -&gt; &#123; &#125;              <span class="comment">// onComplete: æ­£å¸¸å®Œæˆï¼Œæµç»ˆæ­¢</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="è°å‘é€ç»ˆæ­¢ä¿¡å·ï¼Ÿ"><a href="#è°å‘é€ç»ˆæ­¢ä¿¡å·ï¼Ÿ" class="headerlink" title="è°å‘é€ç»ˆæ­¢ä¿¡å·ï¼Ÿ"></a>è°å‘é€ç»ˆæ­¢ä¿¡å·ï¼Ÿ</h3><p><strong>ä¸Šæ¸¸ï¼ˆç”Ÿäº§è€…ï¼‰å†³å®šä½•æ—¶ç»“æŸ</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1ï¼šé™æ€æ•°æ® - å‘å®Œå°±ç»“æŸ</span></span><br><span class="line">Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// å†…éƒ¨ï¼šonNext(1), onNext(2), onNext(3), onComplete()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2ï¼šHTTP å“åº” - æœåŠ¡ç«¯å…³é—­è¿æ¥æ—¶ç»“æŸ</span></span><br><span class="line">webClient.get().retrieve().bodyToFlux(String.class);</span><br><span class="line"><span class="comment">// å†…éƒ¨ï¼šonNext(chunk1), onNext(chunk2), ..., onComplete()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹3ï¼šæ— é™æµ - æ°¸ä¸ç»“æŸï¼ˆé™¤éå‡ºé”™æˆ–å–æ¶ˆï¼‰</span></span><br><span class="line">Flux.interval(Duration.ofSeconds(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// å†…éƒ¨ï¼šonNext(0), onNext(1), onNext(2), ... (æ°¸è¿œç»§ç»­)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹4ï¼šæ‰‹åŠ¨æ§åˆ¶ - ä½ å†³å®šä½•æ—¶ç»“æŸ</span></span><br><span class="line">Sinks.Many&lt;String&gt; sink = Sinks.many().unicast().onBackpressureBuffer();</span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">sink.tryEmitComplete();  <span class="comment">// ä½ å†³å®šç»“æŸ</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å¯¹æ¯”ï¼šä»€ä¹ˆæ—¶å€™ç”¨-Fluxï¼Œä»€ä¹ˆæ—¶å€™ç”¨-Sinks"><a href="#å¯¹æ¯”ï¼šä»€ä¹ˆæ—¶å€™ç”¨-Fluxï¼Œä»€ä¹ˆæ—¶å€™ç”¨-Sinks" class="headerlink" title="å¯¹æ¯”ï¼šä»€ä¹ˆæ—¶å€™ç”¨ Fluxï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Sinks"></a>å¯¹æ¯”ï¼šä»€ä¹ˆæ—¶å€™ç”¨ Fluxï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Sinks</h2><h3 id="ä½ æ˜¯æ¶ˆè´¹è€…-â†’-ç”¨-Flux"><a href="#ä½ æ˜¯æ¶ˆè´¹è€…-â†’-ç”¨-Flux" class="headerlink" title="ä½ æ˜¯æ¶ˆè´¹è€… â†’ ç”¨ Flux"></a>ä½ æ˜¯æ¶ˆè´¹è€… â†’ ç”¨ Flux</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šè°ƒç”¨åˆ«äººçš„ APIï¼Œæ¥æ”¶æ•°æ®</span></span><br><span class="line">Flux&lt;String&gt; response = callExternalAPI();</span><br><span class="line">response.subscribe(data -&gt; process(data));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœºæ™¯ï¼šä»æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">Flux&lt;User&gt; users = userRepository.findAll();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœºæ™¯ï¼šè¯»å–æ–‡ä»¶</span></span><br><span class="line">Flux&lt;String&gt; lines = readFileLines(path);</span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®ç”±åˆ«äººäº§ç”Ÿï¼Œä½ åªéœ€è¦æ¥æ”¶å’Œå¤„ç†ã€‚</p>
<h3 id="ä½ æ˜¯ç”Ÿäº§è€…-â†’-ç”¨-Sinks"><a href="#ä½ æ˜¯ç”Ÿäº§è€…-â†’-ç”¨-Sinks" class="headerlink" title="ä½ æ˜¯ç”Ÿäº§è€… â†’ ç”¨ Sinks"></a>ä½ æ˜¯ç”Ÿäº§è€… â†’ ç”¨ Sinks</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœºæ™¯ï¼šWebSocket æœåŠ¡ç«¯ï¼Œä¸»åŠ¨æ¨é€æ¶ˆæ¯</span></span><br><span class="line">Sinks.Many&lt;String&gt; sink = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æŸä¸ªäº‹ä»¶è§¦å‘æ—¶å‘é€æ•°æ®</span></span><br><span class="line"><span class="meta">@EventListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onUserLogin</span><span class="params">(UserLoginEvent event)</span> &#123;</span><br><span class="line">    sink.tryEmitNext(<span class="string">&quot;ç”¨æˆ· &quot;</span> + event.getUsername() + <span class="string">&quot; ç™»å½•äº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®¢æˆ·ç«¯è®¢é˜…è¿™ä¸ªæµ</span></span><br><span class="line"><span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">getNotifications</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sink.asFlux();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®ç”±ä½ äº§ç”Ÿï¼Œä½ éœ€è¦ä¸»åŠ¨æ¨é€ã€‚</p>
<h3 id="å¯¹æ¯”è¡¨"><a href="#å¯¹æ¯”è¡¨" class="headerlink" title="å¯¹æ¯”è¡¨"></a>å¯¹æ¯”è¡¨</h3><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>è§’è‰²</th>
<th>ä½¿ç”¨</th>
<th>æ•°æ®æ¥æº</th>
</tr>
</thead>
<tbody><tr>
<td>è°ƒç”¨ HTTP API</td>
<td>æ¶ˆè´¹è€…</td>
<td>Flux</td>
<td>æœåŠ¡ç«¯è¿”å›</td>
</tr>
<tr>
<td>æŸ¥è¯¢æ•°æ®åº“</td>
<td>æ¶ˆè´¹è€…</td>
<td>Flux</td>
<td>æ•°æ®åº“è¿”å›</td>
</tr>
<tr>
<td>è¯»å–æ¶ˆæ¯é˜Ÿåˆ—</td>
<td>æ¶ˆè´¹è€…</td>
<td>Flux</td>
<td>é˜Ÿåˆ—æ¨é€</td>
</tr>
<tr>
<td>WebSocket æ¨é€</td>
<td>ç”Ÿäº§è€…</td>
<td>Sinks</td>
<td>ä½ ä¸»åŠ¨å‘é€</td>
</tr>
<tr>
<td>äº‹ä»¶å¹¿æ’­</td>
<td>ç”Ÿäº§è€…</td>
<td>Sinks</td>
<td>ä½ ä¸»åŠ¨å‘é€</td>
</tr>
<tr>
<td>å°è£…å›è°ƒ API</td>
<td>ç”Ÿäº§è€…</td>
<td>Sinks</td>
<td>å›è°ƒè§¦å‘æ—¶å‘é€</td>
</tr>
</tbody></table>
<hr>
<h2 id="æ·±å…¥ç†è§£ï¼šæ‡’åŠ è½½ä¸è®¢é˜…"><a href="#æ·±å…¥ç†è§£ï¼šæ‡’åŠ è½½ä¸è®¢é˜…" class="headerlink" title="æ·±å…¥ç†è§£ï¼šæ‡’åŠ è½½ä¸è®¢é˜…"></a>æ·±å…¥ç†è§£ï¼šæ‡’åŠ è½½ä¸è®¢é˜…</h2><h3 id="Flux-æ˜¯æ‡’åŠ è½½çš„"><a href="#Flux-æ˜¯æ‡’åŠ è½½çš„" class="headerlink" title="Flux æ˜¯æ‡’åŠ è½½çš„"></a>Flux æ˜¯æ‡’åŠ è½½çš„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™è¡Œä»£ç æ‰§è¡Œæ—¶ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è°ƒç”¨ API</span></span><br><span class="line">Flux&lt;String&gt; flux = webClient.get().uri(<span class="string">&quot;/api&quot;</span>).retrieve().bodyToFlux(String.class);</span><br><span class="line">System.out.println(<span class="string">&quot;Flux åˆ›å»ºå®Œæˆ&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªæœ‰è®¢é˜…æ—¶ï¼Œæ‰çœŸæ­£å‘èµ·è¯·æ±‚</span></span><br><span class="line">flux.subscribe(data -&gt; System.out.println(<span class="string">&quot;æ”¶åˆ°: &quot;</span> + data));</span><br><span class="line">System.out.println(<span class="string">&quot;è®¢é˜…å®Œæˆ&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºé¡ºåºï¼š</span></span><br><span class="line"><span class="comment">// Flux åˆ›å»ºå®Œæˆ</span></span><br><span class="line"><span class="comment">// è®¢é˜…å®Œæˆ</span></span><br><span class="line"><span class="comment">// æ”¶åˆ°: xxxï¼ˆå¼‚æ­¥ï¼Œç¨åè¾“å‡ºï¼‰</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¯æ¬¡è®¢é˜…éƒ½æ˜¯ç‹¬ç«‹çš„"><a href="#æ¯æ¬¡è®¢é˜…éƒ½æ˜¯ç‹¬ç«‹çš„" class="headerlink" title="æ¯æ¬¡è®¢é˜…éƒ½æ˜¯ç‹¬ç«‹çš„"></a>æ¯æ¬¡è®¢é˜…éƒ½æ˜¯ç‹¬ç«‹çš„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;String&gt; flux = webClient.get().uri(<span class="string">&quot;/api/random&quot;</span>).retrieve().bodyToFlux(String.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡è®¢é˜… - å‘èµ·ç¬¬ä¸€æ¬¡è¯·æ±‚</span></span><br><span class="line">flux.subscribe(data -&gt; System.out.println(<span class="string">&quot;è®¢é˜…1: &quot;</span> + data));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒæ¬¡è®¢é˜… - å‘èµ·ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç‹¬ç«‹çš„ï¼‰</span></span><br><span class="line">flux.subscribe(data -&gt; System.out.println(<span class="string">&quot;è®¢é˜…2: &quot;</span> + data));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¤æ¬¡è®¢é˜…å¯èƒ½æ”¶åˆ°ä¸åŒçš„æ•°æ®ï¼</span></span><br></pre></td></tr></table></figure>

<h3 id="å†·æµ-vs-çƒ­æµ"><a href="#å†·æµ-vs-çƒ­æµ" class="headerlink" title="å†·æµ vs çƒ­æµ"></a>å†·æµ vs çƒ­æµ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†·æµï¼šæ¯ä¸ªè®¢é˜…è€…éƒ½ä»å¤´å¼€å§‹</span></span><br><span class="line">Flux&lt;Integer&gt; cold = Flux.range(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">cold.subscribe(i -&gt; System.out.println(<span class="string">&quot;A: &quot;</span> + i));  <span class="comment">// A: 1, 2, 3</span></span><br><span class="line">cold.subscribe(i -&gt; System.out.println(<span class="string">&quot;B: &quot;</span> + i));  <span class="comment">// B: 1, 2, 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çƒ­æµï¼šè®¢é˜…è€…å…±äº«æ•°æ®æµ</span></span><br><span class="line">Sinks.Many&lt;Integer&gt; sink = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line">Flux&lt;Integer&gt; hot = sink.asFlux();</span><br><span class="line"></span><br><span class="line">hot.subscribe(i -&gt; System.out.println(<span class="string">&quot;A: &quot;</span> + i));</span><br><span class="line">sink.tryEmitNext(<span class="number">1</span>);  <span class="comment">// A: 1</span></span><br><span class="line">hot.subscribe(i -&gt; System.out.println(<span class="string">&quot;B: &quot;</span> + i));</span><br><span class="line">sink.tryEmitNext(<span class="number">2</span>);  <span class="comment">// A: 2, B: 2ï¼ˆB æ²¡æ”¶åˆ° 1ï¼‰</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å®æˆ˜ï¼šå¤§æ¨¡å‹æµå¼è°ƒç”¨å®Œæ•´ç¤ºä¾‹"><a href="#å®æˆ˜ï¼šå¤§æ¨¡å‹æµå¼è°ƒç”¨å®Œæ•´ç¤ºä¾‹" class="headerlink" title="å®æˆ˜ï¼šå¤§æ¨¡å‹æµå¼è°ƒç”¨å®Œæ•´ç¤ºä¾‹"></a>å®æˆ˜ï¼šå¤§æ¨¡å‹æµå¼è°ƒç”¨å®Œæ•´ç¤ºä¾‹</h2><h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/chat&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WebClient webClient;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(<span class="meta">@RequestParam</span> String prompt)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> webClient.post()</span><br><span class="line">            .uri(<span class="string">&quot;https://api.openai.com/v1/chat/completions&quot;</span>)</span><br><span class="line">            .header(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Bearer &quot;</span> + apiKey)</span><br><span class="line">            .bodyValue(Map.of(</span><br><span class="line">                <span class="string">&quot;model&quot;</span>, <span class="string">&quot;gpt-4&quot;</span>,</span><br><span class="line">                <span class="string">&quot;messages&quot;</span>, List.of(Map.of(<span class="string">&quot;role&quot;</span>, <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>, prompt)),</span><br><span class="line">                <span class="string">&quot;stream&quot;</span>, <span class="literal">true</span></span><br><span class="line">            ))</span><br><span class="line">            .retrieve()</span><br><span class="line">            .bodyToFlux(String.class)</span><br><span class="line">            .filter(line -&gt; !line.equals(<span class="string">&quot;[DONE]&quot;</span>))</span><br><span class="line">            .map(<span class="built_in">this</span>::extractContent)</span><br><span class="line">            .filter(Objects::nonNull)</span><br><span class="line">            .doOnNext(chunk -&gt; log.debug(<span class="string">&quot;å‘é€: &#123;&#125;&quot;</span>, chunk))</span><br><span class="line">            .doOnComplete(() -&gt; log.info(<span class="string">&quot;æµå¼å“åº”å®Œæˆ&quot;</span>))</span><br><span class="line">            .doOnError(e -&gt; log.error(<span class="string">&quot;æµå¼å“åº”é”™è¯¯&quot;</span>, e));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">extractContent</span><span class="params">(String line)</span> &#123;</span><br><span class="line">        <span class="comment">// è§£æ SSE æ•°æ®ï¼Œæå–å†…å®¹</span></span><br><span class="line">        <span class="comment">// data: &#123;&quot;choices&quot;:[&#123;&quot;delta&quot;:&#123;&quot;content&quot;:&quot;ä½ å¥½&quot;&#125;&#125;]&#125;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">node</span> <span class="operator">=</span> objectMapper.readTree(line.substring(<span class="number">6</span>));</span><br><span class="line">            <span class="keyword">return</span> node.at(<span class="string">&quot;/choices/0/delta/content&quot;</span>).asText(<span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‰ç«¯æ¥æ”¶"><a href="#å‰ç«¯æ¥æ”¶" class="headerlink" title="å‰ç«¯æ¥æ”¶"></a>å‰ç«¯æ¥æ”¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ EventSource æ¥æ”¶ SSE</span></span><br><span class="line"><span class="keyword">const</span> eventSource = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">&#x27;/api/chat?prompt=ä½ å¥½&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventSource.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// é€å­—æ˜¾ç¤º</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;response&#x27;</span>).<span class="property">textContent</span> += event.<span class="property">data</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">eventSource.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    eventSource.<span class="title function_">close</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ fetch</span></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/chat?prompt=ä½ å¥½&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reader = response.<span class="property">body</span>.<span class="title function_">getReader</span>();</span><br><span class="line"><span class="keyword">const</span> decoder = <span class="keyword">new</span> <span class="title class_">TextDecoder</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; done, value &#125; = <span class="keyword">await</span> reader.<span class="title function_">read</span>();</span><br><span class="line">    <span class="keyword">if</span> (done) <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">const</span> chunk = decoder.<span class="title function_">decode</span>(value);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;response&#x27;</span>).<span class="property">textContent</span> += chunk;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Flux æ˜¯ç®¡é“</strong></td>
<td>æ•°æ®æµç»ç®¡é“ï¼Œä¸å­˜å‚¨åœ¨ç®¡é“ä¸­</td>
</tr>
<tr>
<td><strong>æ•°æ®ä½•æ—¶ç¡®å®š</strong></td>
<td>å–å†³äºä¸Šæ¸¸ï¼Œå¯èƒ½åˆ›å»ºæ—¶ç¡®å®šï¼Œä¹Ÿå¯èƒ½è¿è¡Œæ—¶æ‰çŸ¥é“</td>
</tr>
<tr>
<td><strong>æ•°æ®æ•°é‡</strong></td>
<td>ç”±ä¸Šæ¸¸å†³å®šï¼Œä¸‹æ¸¸ä¸éœ€è¦æå‰çŸ¥é“</td>
</tr>
<tr>
<td><strong>æµä½•æ—¶ç»“æŸ</strong></td>
<td>ä¸Šæ¸¸å‘é€ <code>onComplete()</code> æˆ– <code>onError()</code></td>
</tr>
<tr>
<td><strong>æ‡’åŠ è½½</strong></td>
<td>åˆ›å»º Flux ä¸æ‰§è¡Œï¼Œè®¢é˜…æ—¶æ‰æ‰§è¡Œ</td>
</tr>
<tr>
<td><strong>Sinks çš„ä½œç”¨</strong></td>
<td>è®©ä½ æˆä¸ºä¸Šæ¸¸ï¼Œä¸»åŠ¨æ¨é€æ•°æ®</td>
</tr>
</tbody></table>
<p><strong>æ ¸å¿ƒç†è§£</strong>ï¼š</p>
<ul>
<li>Flux ä¸æ˜¯â€è£…äº†å¤šå°‘æ•°æ®â€ï¼Œè€Œæ˜¯â€æ•°æ®ä»å“ªæ¥ã€å¾€å“ªå»â€</li>
<li>ä½ ä¸éœ€è¦çŸ¥é“ Flux é‡Œæœ‰å¤šå°‘æ•°æ®ï¼Œåªéœ€è¦å¤„ç†æµè¿‡æ¥çš„æ¯ä¸€ä¸ªæ•°æ®</li>
<li>è¿™å°±æ˜¯å“åº”å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>å¯¹æ•°æ®æµåšå‡ºå“åº”</strong></li>
</ul>
<hr>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li>Sinks è¯¦è§£</li>
<li>Project Reactor å®ç°</li>
<li>WebFlux - Reactoræ ¸å¿ƒAPI</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/ForkJoinPool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/ForkJoinPool/" class="post-title-link" itemprop="url">ForkJoinPool</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">å¹¶å‘ç¼–ç¨‹</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" itemprop="url" rel="index"><span itemprop="name">çº¿ç¨‹æ± </span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ForkJoinPool"><a href="#ForkJoinPool" class="headerlink" title="ForkJoinPool"></a>ForkJoinPool</h1><blockquote>
<p><strong>â„¹ï¸ ä¿¡æ¯: è¡ç”Ÿæ¥æº</strong><br>æœ¬ç¬”è®°è¡ç”Ÿè‡ª çº¿ç¨‹æ± ç±»å‹-WorkStealingPool</p>
</blockquote>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><code>ForkJoinPool</code> æ˜¯ Java 7 å¼•å…¥çš„ç‰¹æ®Šçº¿ç¨‹æ± ï¼Œä¸“ä¸º<strong>åˆ†æ²»ç®—æ³•</strong>å’Œ<strong>å¹¶è¡Œè®¡ç®—</strong>è®¾è®¡ã€‚å®ƒæ˜¯ <code>ExecutorService</code> çš„å®ç°ï¼Œä½†é‡‡ç”¨äº†å®Œå…¨ä¸åŒçš„ä»»åŠ¡è°ƒåº¦ç­–ç•¥ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚                        ForkJoinPool                            â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚  æ ¸å¿ƒæ€æƒ³: Forkï¼ˆæ‹†åˆ†ï¼‰ + Joinï¼ˆåˆå¹¶ï¼‰                          â”‚</span><br><span class="line">â”‚  è°ƒåº¦ç­–ç•¥: Work-Stealingï¼ˆå·¥ä½œçªƒå–ï¼‰                            â”‚</span><br><span class="line">â”‚  é€‚ç”¨åœºæ™¯: é€’å½’ä»»åŠ¡ã€å¹¶è¡Œè®¡ç®—ã€åˆ†æ²»ç®—æ³•                          â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="Fork-ä¸-Join"><a href="#Fork-ä¸-Join" class="headerlink" title="Fork ä¸ Join"></a>Fork ä¸ Join</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>è¯´æ˜</th>
<th>æ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Fork</strong></td>
<td>å°†å¤§ä»»åŠ¡æ‹†åˆ†æˆå°ä»»åŠ¡ï¼Œå¼‚æ­¥æ‰§è¡Œ</td>
<td><code>task.fork()</code></td>
</tr>
<tr>
<td><strong>Join</strong></td>
<td>ç­‰å¾…å­ä»»åŠ¡å®Œæˆï¼Œè·å–ç»“æœ</td>
<td><code>task.join()</code></td>
</tr>
</tbody></table>
<h3 id="åˆ†æ²»æ€æƒ³å›¾è§£"><a href="#åˆ†æ²»æ€æƒ³å›¾è§£" class="headerlink" title="åˆ†æ²»æ€æƒ³å›¾è§£"></a>åˆ†æ²»æ€æƒ³å›¾è§£</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">            â”‚   å¤§ä»»åŠ¡    â”‚</span><br><span class="line">            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                   â”‚ fork</span><br><span class="line">      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">      â–¼            â–¼            â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ å­ä»»åŠ¡1 â”‚  â”‚ å­ä»»åŠ¡2 â”‚  â”‚ å­ä»»åŠ¡3 â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><br><span class="line">     â”‚            â”‚            â”‚</span><br><span class="line">     â–¼            â–¼            â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ ç»“æœ1   â”‚  â”‚ ç»“æœ2   â”‚  â”‚ ç»“æœ3   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜</span><br><span class="line">     â”‚            â”‚            â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                  â”‚ join</span><br><span class="line">            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”</span><br><span class="line">            â”‚  åˆå¹¶ç»“æœ  â”‚</span><br><span class="line">            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å·¥ä½œçªƒå–ç®—æ³•ï¼ˆWork-Stealingï¼‰"><a href="#å·¥ä½œçªƒå–ç®—æ³•ï¼ˆWork-Stealingï¼‰" class="headerlink" title="å·¥ä½œçªƒå–ç®—æ³•ï¼ˆWork-Stealingï¼‰"></a>å·¥ä½œçªƒå–ç®—æ³•ï¼ˆWork-Stealingï¼‰</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>æ¯ä¸ªå·¥ä½œçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ª<strong>åŒç«¯é˜Ÿåˆ—ï¼ˆDequeï¼‰</strong>ï¼š</p>
<ul>
<li><strong>è‡ªå·±çš„ä»»åŠ¡</strong>ï¼šä»é˜Ÿåˆ—<strong>å¤´éƒ¨</strong>å–ï¼ˆLIFOï¼‰</li>
<li><strong>çªƒå–ä»–äººä»»åŠ¡</strong>ï¼šä»é˜Ÿåˆ—<strong>å°¾éƒ¨</strong>å–ï¼ˆFIFOï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚                     ForkJoinPool                                â”‚</span><br><span class="line">â”‚                                                                 â”‚</span><br><span class="line">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚</span><br><span class="line">â”‚  â”‚  Worker-1   â”‚    â”‚  Worker-2   â”‚    â”‚  Worker-3   â”‚         â”‚</span><br><span class="line">â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚</span><br><span class="line">â”‚  â”‚ å¤´ [T1]     â”‚    â”‚ å¤´ [T4]     â”‚    â”‚ å¤´ [ç©ºé—²]   â”‚         â”‚</span><br><span class="line">â”‚  â”‚    [T2]     â”‚    â”‚    [T5]     â”‚    â”‚             â”‚         â”‚</span><br><span class="line">â”‚  â”‚    [T3]     â”‚    â”‚             â”‚    â”‚             â”‚         â”‚</span><br><span class="line">â”‚  â”‚ å°¾          â”‚    â”‚ å°¾          â”‚    â”‚ å°¾    â†‘     â”‚         â”‚</span><br><span class="line">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜         â”‚</span><br><span class="line">â”‚         â”‚                  â”‚                  â”‚                â”‚</span><br><span class="line">â”‚         â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚</span><br><span class="line">â”‚         â”‚                    Worker-3 ä» Worker-2 å°¾éƒ¨çªƒå– T5   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ºä»€ä¹ˆä»å°¾éƒ¨çªƒå–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä»å°¾éƒ¨çªƒå–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä»å°¾éƒ¨çªƒå–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä»å°¾éƒ¨çªƒå–ï¼Ÿ</h3><table>
<thead>
<tr>
<th>åŸå› </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å‡å°‘ç«äº‰</strong></td>
<td>å·¥ä½œçº¿ç¨‹ä»å¤´éƒ¨å–ï¼Œçªƒå–ä»å°¾éƒ¨ï¼Œé¿å…é”äº‰ç”¨</td>
</tr>
<tr>
<td><strong>ä»»åŠ¡ç‰¹æ€§</strong></td>
<td>å°¾éƒ¨é€šå¸¸æ˜¯è¾ƒå¤§çš„ä»»åŠ¡ï¼ˆåˆš fork å‡ºæ¥çš„ï¼‰ï¼Œçªƒå–åå¯ç»§ç»­æ‹†åˆ†</td>
</tr>
<tr>
<td><strong>å±€éƒ¨æ€§</strong></td>
<td>å¤´éƒ¨ä»»åŠ¡æ˜¯æœ€è¿‘æäº¤çš„ï¼Œç¼“å­˜å‹å¥½</td>
</tr>
</tbody></table>
<hr>
<h2 id="æ ¸å¿ƒç±»ç»“æ„"><a href="#æ ¸å¿ƒç±»ç»“æ„" class="headerlink" title="æ ¸å¿ƒç±»ç»“æ„"></a>æ ¸å¿ƒç±»ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚          ForkJoinTask&lt;V&gt;              â”‚  æŠ½è±¡åŸºç±»</span><br><span class="line">â”‚  â”œâ”€â”€ fork()    å¼‚æ­¥æ‰§è¡Œ               â”‚</span><br><span class="line">â”‚  â”œâ”€â”€ join()    ç­‰å¾…ç»“æœ               â”‚</span><br><span class="line">â”‚  â””â”€â”€ invoke()  åŒæ­¥æ‰§è¡Œ               â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                â”‚</span><br><span class="line">        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">        â–¼               â–¼</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚RecursiveTask  â”‚ â”‚ RecursiveAction â”‚</span><br><span class="line">â”‚   &lt;V&gt;         â”‚ â”‚                 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ æœ‰è¿”å›å€¼      â”‚ â”‚ æ— è¿”å›å€¼        â”‚</span><br><span class="line">â”‚ compute()â†’V   â”‚ â”‚ compute()â†’void  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="1-RecursiveTaskï¼šæœ‰è¿”å›å€¼ï¼ˆæ•°ç»„æ±‚å’Œï¼‰"><a href="#1-RecursiveTaskï¼šæœ‰è¿”å›å€¼ï¼ˆæ•°ç»„æ±‚å’Œï¼‰" class="headerlink" title="1. RecursiveTaskï¼šæœ‰è¿”å›å€¼ï¼ˆæ•°ç»„æ±‚å’Œï¼‰"></a>1. RecursiveTaskï¼šæœ‰è¿”å›å€¼ï¼ˆæ•°ç»„æ±‚å’Œï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SumTask</span> <span class="keyword">extends</span> <span class="title class_">RecursiveTask</span>&lt;Long&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THRESHOLD</span> <span class="operator">=</span> <span class="number">1000</span>;  <span class="comment">// é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">long</span>[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> start;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SumTask</span><span class="params">(<span class="type">long</span>[] array, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Long <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> end - start;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä»»åŠ¡è¶³å¤Ÿå°ï¼Œç›´æ¥è®¡ç®—</span></span><br><span class="line">        <span class="keyword">if</span> (length &lt;= THRESHOLD) &#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; end; i++) &#123;</span><br><span class="line">                sum += array[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‹†åˆ†ä»»åŠ¡</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> start + length / <span class="number">2</span>;</span><br><span class="line">        <span class="type">SumTask</span> <span class="variable">leftTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, start, mid);</span><br><span class="line">        <span class="type">SumTask</span> <span class="variable">rightTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, mid, end);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¼‚æ­¥æ‰§è¡Œå·¦åŠéƒ¨åˆ†</span></span><br><span class="line">        leftTask.fork();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åŒæ­¥æ‰§è¡Œå³åŠéƒ¨åˆ†ï¼ˆå½“å‰çº¿ç¨‹ï¼‰</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">rightResult</span> <span class="operator">=</span> rightTask.compute();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç­‰å¾…å·¦åŠéƒ¨åˆ†å®Œæˆå¹¶åˆå¹¶ç»“æœ</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">leftResult</span> <span class="operator">=</span> leftTask.join();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> leftResult + rightResult;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">long</span>[] array = <span class="keyword">new</span> <span class="title class_">long</span>[<span class="number">10000000</span>];</span><br><span class="line">    Arrays.fill(array, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> ForkJoinPool.commonPool();</span><br><span class="line">    <span class="type">SumTask</span> <span class="variable">task</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, <span class="number">0</span>, array.length);</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="variable">result</span> <span class="operator">=</span> pool.invoke(task);  <span class="comment">// åŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Sum: &quot;</span> + result);  <span class="comment">// è¾“å‡º: Sum: 10000000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-RecursiveActionï¼šæ— è¿”å›å€¼ï¼ˆå¹¶è¡Œæ’åºï¼‰"><a href="#2-RecursiveActionï¼šæ— è¿”å›å€¼ï¼ˆå¹¶è¡Œæ’åºï¼‰" class="headerlink" title="2. RecursiveActionï¼šæ— è¿”å›å€¼ï¼ˆå¹¶è¡Œæ’åºï¼‰"></a>2. RecursiveActionï¼šæ— è¿”å›å€¼ï¼ˆå¹¶è¡Œæ’åºï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParallelMergeSort</span> <span class="keyword">extends</span> <span class="title class_">RecursiveAction</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THRESHOLD</span> <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span>[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> start;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ParallelMergeSort</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (end - start &lt;= THRESHOLD) &#123;</span><br><span class="line">            <span class="comment">// å°æ•°ç»„ç›´æ¥ç”¨ Arrays.sort</span></span><br><span class="line">            Arrays.sort(array, start, end);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (start + end) / <span class="number">2</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¹¶è¡Œæ’åºä¸¤åŠ</span></span><br><span class="line">        <span class="type">ParallelMergeSort</span> <span class="variable">left</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ParallelMergeSort</span>(array, start, mid);</span><br><span class="line">        <span class="type">ParallelMergeSort</span> <span class="variable">right</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ParallelMergeSort</span>(array, mid, end);</span><br><span class="line">        </span><br><span class="line">        invokeAll(left, right);  <span class="comment">// å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªä»»åŠ¡</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆå¹¶å·²æ’åºçš„ä¸¤åŠ</span></span><br><span class="line">        merge(array, start, mid, end);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> start, <span class="type">int</span> mid, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆå¹¶é€»è¾‘...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ForkJoinPool-åˆ›å»ºæ–¹å¼"><a href="#ForkJoinPool-åˆ›å»ºæ–¹å¼" class="headerlink" title="ForkJoinPool åˆ›å»ºæ–¹å¼"></a>ForkJoinPool åˆ›å»ºæ–¹å¼</h2><h3 id="1-å…¬å…±æ± ï¼ˆæ¨èï¼‰"><a href="#1-å…¬å…±æ± ï¼ˆæ¨èï¼‰" class="headerlink" title="1. å…¬å…±æ± ï¼ˆæ¨èï¼‰"></a>1. å…¬å…±æ± ï¼ˆæ¨èï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å…¬å…±æ± ï¼ˆJVM å…±äº«ï¼Œçº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° - 1ï¼‰</span></span><br><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">commonPool</span> <span class="operator">=</span> ForkJoinPool.commonPool();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> commonPool.invoke(task);</span><br></pre></td></tr></table></figure>

<h3 id="2-è‡ªå®šä¹‰æ± "><a href="#2-è‡ªå®šä¹‰æ± " class="headerlink" title="2. è‡ªå®šä¹‰æ± "></a>2. è‡ªå®šä¹‰æ± </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰çº¿ç¨‹æ•°</span></span><br><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">customPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®Œæ•´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>(</span><br><span class="line">    <span class="number">4</span>,                                    <span class="comment">// å¹¶è¡Œåº¦</span></span><br><span class="line">    ForkJoinPool.defaultForkJoinWorkerThreadFactory,  <span class="comment">// çº¿ç¨‹å·¥å‚</span></span><br><span class="line">    <span class="literal">null</span>,                                 <span class="comment">// å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line">    <span class="literal">true</span>                                  <span class="comment">// asyncModeï¼ˆtrue=FIFOï¼Œfalse=LIFOï¼‰</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="3-é€šè¿‡-Executors-å·¥å‚"><a href="#3-é€šè¿‡-Executors-å·¥å‚" class="headerlink" title="3. é€šè¿‡ Executors å·¥å‚"></a>3. é€šè¿‡ Executors å·¥å‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java 8+ WorkStealingPool åº•å±‚å°±æ˜¯ ForkJoinPool</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newWorkStealingPool();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æäº¤ä»»åŠ¡çš„æ–¹å¼"><a href="#æäº¤ä»»åŠ¡çš„æ–¹å¼" class="headerlink" title="æäº¤ä»»åŠ¡çš„æ–¹å¼"></a>æäº¤ä»»åŠ¡çš„æ–¹å¼</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody><tr>
<td><code>invoke(task)</code></td>
<td>åŒæ­¥æ‰§è¡Œï¼Œé˜»å¡ç›´åˆ°å®Œæˆ</td>
<td>ä»»åŠ¡ç»“æœ</td>
</tr>
<tr>
<td><code>execute(task)</code></td>
<td>å¼‚æ­¥æ‰§è¡Œï¼Œä¸ç­‰å¾…ç»“æœ</td>
<td>void</td>
</tr>
<tr>
<td><code>submit(task)</code></td>
<td>å¼‚æ­¥æ‰§è¡Œï¼Œè¿”å› Future</td>
<td><code>ForkJoinTask&lt;V&gt;</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> ForkJoinPool.commonPool();</span><br><span class="line"><span class="type">SumTask</span> <span class="variable">task</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SumTask</span>(array, <span class="number">0</span>, array.length);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼1ï¼šåŒæ­¥</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> pool.invoke(task);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼2ï¼šå¼‚æ­¥æäº¤</span></span><br><span class="line">ForkJoinTask&lt;Long&gt; future = pool.submit(task);</span><br><span class="line"><span class="type">Long</span> <span class="variable">result</span> <span class="operator">=</span> future.get();  <span class="comment">// é˜»å¡ç­‰å¾…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼3ï¼šå¼‚æ­¥æ‰§è¡Œï¼ˆä¸å…³å¿ƒç»“æœï¼‰</span></span><br><span class="line">pool.execute(task);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸æ™®é€šçº¿ç¨‹æ± å¯¹æ¯”"><a href="#ä¸æ™®é€šçº¿ç¨‹æ± å¯¹æ¯”" class="headerlink" title="ä¸æ™®é€šçº¿ç¨‹æ± å¯¹æ¯”"></a>ä¸æ™®é€šçº¿ç¨‹æ± å¯¹æ¯”</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>ThreadPoolExecutor</th>
<th>ForkJoinPool</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»»åŠ¡é˜Ÿåˆ—</strong></td>
<td>å…±äº«é˜Ÿåˆ—ï¼ˆå•ä¸€ï¼‰</td>
<td>æ¯çº¿ç¨‹ç‹¬ç«‹åŒç«¯é˜Ÿåˆ—</td>
</tr>
<tr>
<td><strong>è°ƒåº¦ç­–ç•¥</strong></td>
<td>å…ˆè¿›å…ˆå‡º</td>
<td>å·¥ä½œçªƒå–</td>
</tr>
<tr>
<td><strong>é€‚ç”¨ä»»åŠ¡</strong></td>
<td>ç‹¬ç«‹ä»»åŠ¡</td>
<td>å¯æ‹†åˆ†çš„é€’å½’ä»»åŠ¡</td>
</tr>
<tr>
<td><strong>è´Ÿè½½å‡è¡¡</strong></td>
<td>ä¾èµ–é˜Ÿåˆ—è°ƒåº¦</td>
<td>å·¥ä½œçªƒå–è‡ªåŠ¨å‡è¡¡</td>
</tr>
<tr>
<td><strong>CPU åˆ©ç”¨</strong></td>
<td>å¯èƒ½æœ‰çº¿ç¨‹ç©ºé—²</td>
<td>æ›´é«˜æ•ˆï¼ˆå‡å°‘ç©ºé—²ï¼‰</td>
</tr>
<tr>
<td><strong>ä»»åŠ¡ç²’åº¦</strong></td>
<td>ä»»æ„</td>
<td>é€‚åˆå¯æ‹†åˆ†ä»»åŠ¡</td>
</tr>
</tbody></table>
<hr>
<h2 id="å®é™…åº”ç”¨åœºæ™¯"><a href="#å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®é™…åº”ç”¨åœºæ™¯"></a>å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="1-Java-8-å¹¶è¡Œæµ"><a href="#1-Java-8-å¹¶è¡Œæµ" class="headerlink" title="1. Java 8 å¹¶è¡Œæµ"></a>1. Java 8 å¹¶è¡Œæµ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parallelStream() åº•å±‚ä½¿ç”¨ ForkJoinPool.commonPool()</span></span><br><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> numbers.parallelStream()</span><br><span class="line">                 .mapToInt(Integer::intValue)</span><br><span class="line">                 .sum();</span><br></pre></td></tr></table></figure>

<h3 id="2-CompletableFuture-é»˜è®¤æ‰§è¡Œå™¨"><a href="#2-CompletableFuture-é»˜è®¤æ‰§è¡Œå™¨" class="headerlink" title="2. CompletableFuture é»˜è®¤æ‰§è¡Œå™¨"></a>2. CompletableFuture é»˜è®¤æ‰§è¡Œå™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤ä½¿ç”¨ ForkJoinPool.commonPool()</span></span><br><span class="line">CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-å¤§æ•°æ®å¤„ç†"><a href="#3-å¤§æ•°æ®å¤„ç†" class="headerlink" title="3. å¤§æ•°æ®å¤„ç†"></a>3. å¤§æ•°æ®å¤„ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¹¶è¡Œå¤„ç†å¤§é‡æ•°æ®</span></span><br><span class="line">Arrays.parallelSort(largeArray);</span><br><span class="line">Arrays.parallelSetAll(array, i -&gt; i * <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><h3 id="1-é˜ˆå€¼è®¾ç½®"><a href="#1-é˜ˆå€¼è®¾ç½®" class="headerlink" title="1. é˜ˆå€¼è®¾ç½®"></a>1. é˜ˆå€¼è®¾ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é˜ˆå€¼å¤ªå°ï¼šæ‹†åˆ†å¼€é”€ &gt; å¹¶è¡Œæ”¶ç›Š</span></span><br><span class="line"><span class="comment">// é˜ˆå€¼å¤ªå¤§ï¼šæ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸</span></span><br><span class="line"><span class="comment">// ç»éªŒå€¼ï¼šæ ¹æ®ä»»åŠ¡å¤æ‚åº¦å’Œæ•°æ®é‡æµ‹è¯•ç¡®å®š</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THRESHOLD</span> <span class="operator">=</span> <span class="number">1000</span>;  <span class="comment">// éœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</span></span><br></pre></td></tr></table></figure>

<h3 id="2-é¿å…é˜»å¡æ“ä½œ"><a href="#2-é¿å…é˜»å¡æ“ä½œ" class="headerlink" title="2. é¿å…é˜»å¡æ“ä½œ"></a>2. é¿å…é˜»å¡æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ é”™è¯¯ï¼šåœ¨ ForkJoinPool ä¸­æ‰§è¡Œé˜»å¡ IO</span></span><br><span class="line"><span class="keyword">protected</span> Long <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸è¦åœ¨è¿™é‡Œåš IO æ“ä½œï¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> httpClient.get(url);  <span class="comment">// é˜»å¡ï¼Œæµªè´¹çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">return</span> process(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… æ­£ç¡®ï¼šForkJoinPool åªç”¨äº CPU è®¡ç®—</span></span><br><span class="line"><span class="comment">// IO æ“ä½œä½¿ç”¨å…¶ä»–çº¿ç¨‹æ± </span></span><br></pre></td></tr></table></figure>

<h3 id="3-å…¬å…±æ± çš„é£é™©"><a href="#3-å…¬å…±æ± çš„é£é™©" class="headerlink" title="3. å…¬å…±æ± çš„é£é™©"></a>3. å…¬å…±æ± çš„é£é™©</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰€æœ‰å¹¶è¡Œæµå…±äº« commonPool</span></span><br><span class="line"><span class="comment">// å¦‚æœæŸä¸ªä»»åŠ¡é˜»å¡ï¼Œä¼šå½±å“å…¶ä»–ä»»åŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å†³æ–¹æ¡ˆï¼šä¸ºå…³é”®ä»»åŠ¡åˆ›å»ºç‹¬ç«‹çš„ ForkJoinPool</span></span><br><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">customPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>(<span class="number">8</span>);</span><br><span class="line">customPool.submit(() -&gt; &#123;</span><br><span class="line">    <span class="comment">// ç‹¬ç«‹æ‰§è¡Œï¼Œä¸å½±å“ commonPool</span></span><br><span class="line">    myParallelStream.forEach(...);</span><br><span class="line">&#125;).get();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li><strong>ä¸Šä¸€ç¯‡</strong>ï¼š03-çº¿ç¨‹æ± ç±»å‹</li>
<li><strong>çº¿ç¨‹æ± åŸç†</strong>ï¼š02-çº¿ç¨‹æ± åŸç†</li>
<li><strong>çº¿ç¨‹æ± ç®€ä»‹</strong>ï¼š01-çº¿ç¨‹æ± ç®€ä»‹</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Java%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/Java%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/" class="post-title-link" itemprop="url">Javaå¼•ç”¨ç±»å‹</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">å¹¶å‘ç¼–ç¨‹</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">åŸºç¡€çŸ¥è¯†</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Java-å¼•ç”¨ç±»å‹"><a href="#Java-å¼•ç”¨ç±»å‹" class="headerlink" title="Java å¼•ç”¨ç±»å‹"></a>Java å¼•ç”¨ç±»å‹</h1><blockquote>
<p><strong>â„¹ï¸ ä¿¡æ¯: è¡ç”Ÿæ¥æº</strong><br>æœ¬ç¬”è®°è¡ç”Ÿè‡ª ThreadLocalåŸç†-å¼±å¼•ç”¨è®¾è®¡</p>
</blockquote>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java ä» JDK 1.2 å¼€å§‹æä¾›äº†å››ç§å¼•ç”¨ç±»å‹ï¼Œç”¨äºæ›´çµæ´»åœ°æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œåƒåœ¾å›æ”¶è¡Œä¸ºã€‚</p>
<h2 id="å››ç§å¼•ç”¨ç±»å‹"><a href="#å››ç§å¼•ç”¨ç±»å‹" class="headerlink" title="å››ç§å¼•ç”¨ç±»å‹"></a>å››ç§å¼•ç”¨ç±»å‹</h2><table>
<thead>
<tr>
<th>å¼•ç”¨ç±»å‹</th>
<th>ç±»</th>
<th>GC å›æ”¶æ—¶æœº</th>
<th>æ˜¯å¦å¯è·å–å¯¹è±¡</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å¼ºå¼•ç”¨</strong></td>
<td>ç›´æ¥å¼•ç”¨</td>
<td>æ°¸ä¸å›æ”¶ï¼ˆé™¤éä¸å¯è¾¾ï¼‰</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><strong>è½¯å¼•ç”¨</strong></td>
<td><code>SoftReference</code></td>
<td>å†…å­˜ä¸è¶³æ—¶å›æ”¶</td>
<td>æ˜¯ï¼ˆæœªå›æ”¶å‰ï¼‰</td>
</tr>
<tr>
<td><strong>å¼±å¼•ç”¨</strong></td>
<td><code>WeakReference</code></td>
<td>ä¸‹æ¬¡ GC æ—¶å›æ”¶</td>
<td>æ˜¯ï¼ˆæœªå›æ”¶å‰ï¼‰</td>
</tr>
<tr>
<td><strong>è™šå¼•ç”¨</strong></td>
<td><code>PhantomReference</code></td>
<td>éšæ—¶å¯èƒ½å›æ”¶</td>
<td>å¦</td>
</tr>
</tbody></table>
<p>^ref-types</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[å¼•ç”¨å¼ºåº¦] --&gt; B[å¼ºå¼•ç”¨ Strong]</span><br><span class="line">    B --&gt; C[è½¯å¼•ç”¨ Soft]</span><br><span class="line">    C --&gt; D[å¼±å¼•ç”¨ Weak]</span><br><span class="line">    D --&gt; E[è™šå¼•ç”¨ Phantom]</span><br><span class="line">    </span><br><span class="line">    style B fill:#ff6b6b</span><br><span class="line">    style C fill:#feca57</span><br><span class="line">    style D fill:#48dbfb</span><br><span class="line">    style E fill:#c8d6e5</span><br></pre></td></tr></table></figure>

<h2 id="è¯¦ç»†è¯´æ˜"><a href="#è¯¦ç»†è¯´æ˜" class="headerlink" title="è¯¦ç»†è¯´æ˜"></a>è¯¦ç»†è¯´æ˜</h2><h3 id="1-å¼ºå¼•ç”¨ï¼ˆStrong-Referenceï¼‰"><a href="#1-å¼ºå¼•ç”¨ï¼ˆStrong-Referenceï¼‰" class="headerlink" title="1. å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰"></a>1. å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰</h3><p>æœ€å¸¸è§çš„å¼•ç”¨ç±»å‹ï¼Œåªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢« GC å›æ”¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();  <span class="comment">// å¼ºå¼•ç”¨</span></span><br><span class="line">obj = <span class="literal">null</span>;                 <span class="comment">// æ–­å¼€å¼•ç”¨åæ‰å¯èƒ½è¢«å›æ”¶</span></span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é»˜è®¤çš„å¼•ç”¨ç±»å‹</li>
<li>å³ä½¿ OOM ä¹Ÿä¸ä¼šå›æ”¶å¼ºå¼•ç”¨å¯¹è±¡</li>
<li>éœ€è¦æ‰‹åŠ¨ç½® null æ‰èƒ½è®© GC å›æ”¶</li>
</ul>
<h3 id="2-è½¯å¼•ç”¨ï¼ˆSoft-Referenceï¼‰"><a href="#2-è½¯å¼•ç”¨ï¼ˆSoft-Referenceï¼‰" class="headerlink" title="2. è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰"></a>2. è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</h3><p>å†…å­˜å……è¶³æ—¶ä¸ä¼šå›æ”¶ï¼Œå†…å­˜ä¸è¶³æ—¶ä¼šè¢«å›æ”¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SoftReference&lt;<span class="type">byte</span>[]&gt; softRef = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>]);</span><br><span class="line"></span><br><span class="line"><span class="type">byte</span>[] data = softRef.get();  <span class="comment">// è·å–å¯¹è±¡ï¼Œå¯èƒ½ä¸º null</span></span><br><span class="line"><span class="keyword">if</span> (data == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡å·²è¢«å›æ”¶ï¼Œéœ€è¦é‡æ–°åˆ›å»º</span></span><br><span class="line">    data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç¼“å­˜</strong></td>
<td>å›¾ç‰‡ç¼“å­˜ã€ç½‘é¡µç¼“å­˜</td>
</tr>
<tr>
<td><strong>å†…å­˜æ•æ„Ÿæ•°æ®</strong></td>
<td>å¯é‡å»ºçš„å¤§å¯¹è±¡</td>
</tr>
</tbody></table>
<h3 id="3-å¼±å¼•ç”¨ï¼ˆWeak-Referenceï¼‰"><a href="#3-å¼±å¼•ç”¨ï¼ˆWeak-Referenceï¼‰" class="headerlink" title="3. å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰"></a>3. å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰</h3><p>åªè¦å‘ç”Ÿ GCï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šè¢«å›æ”¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WeakReference&lt;Object&gt; weakRef = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Object</span>());</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> weakRef.get();  <span class="comment">// å¯èƒ½è¿”å› null</span></span><br><span class="line"><span class="keyword">if</span> (obj == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡å·²è¢« GC å›æ”¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¼±å¼•ç”¨è§£å†³çš„é—®é¢˜</strong>ï¼š</p>
<blockquote>
<p><strong>âš ï¸ é‡è¦: æ ¸å¿ƒä»·å€¼</strong><br>å¼±å¼•ç”¨å…è®¸å¯¹è±¡åœ¨æ²¡æœ‰å…¶ä»–å¼ºå¼•ç”¨æ—¶è¢« GC å›æ”¶ï¼Œ<strong>é¿å…å†…å­˜æ³„æ¼</strong>ã€‚</p>
</blockquote>
<p>ä»¥ ThreadLocal ä¸ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocalMap.Entry çš„ key ä½¿ç”¨å¼±å¼•ç”¨</span><br><span class="line"></span><br><span class="line">åœºæ™¯ï¼šThreadLocal å˜é‡ä¸å†ä½¿ç”¨</span><br><span class="line">â”œâ”€â”€ å¦‚æœ key æ˜¯å¼ºå¼•ç”¨ â†’ ThreadLocal å¯¹è±¡æ— æ³•å›æ”¶ â†’ å†…å­˜æ³„æ¼</span><br><span class="line">â””â”€â”€ å¦‚æœ key æ˜¯å¼±å¼•ç”¨ â†’ ThreadLocal å¯¹è±¡å¯è¢« GC å›æ”¶ â†’ é¿å…æ³„æ¼</span><br></pre></td></tr></table></figure>

<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ThreadLocalMap</strong></td>
<td>Entry çš„ key ä½¿ç”¨å¼±å¼•ç”¨</td>
</tr>
<tr>
<td><strong>WeakHashMap</strong></td>
<td>key è¢«å›æ”¶åè‡ªåŠ¨ç§»é™¤ entry</td>
</tr>
<tr>
<td><strong>ç›‘å¬å™¨&#x2F;å›è°ƒ</strong></td>
<td>é¿å…å› æ³¨å†Œç›‘å¬å™¨å¯¼è‡´å¯¹è±¡æ— æ³•å›æ”¶</td>
</tr>
</tbody></table>
<h3 id="4-è™šå¼•ç”¨ï¼ˆPhantom-Referenceï¼‰"><a href="#4-è™šå¼•ç”¨ï¼ˆPhantom-Referenceï¼‰" class="headerlink" title="4. è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰"></a>4. è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰</h3><p>æœ€å¼±çš„å¼•ç”¨ï¼Œæ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–å¯¹è±¡ï¼Œä¸»è¦ç”¨äºè·Ÿè¸ªå¯¹è±¡è¢«å›æ”¶çš„çŠ¶æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ReferenceQueue&lt;Object&gt; queue = <span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>&lt;&gt;();</span><br><span class="line">PhantomReference&lt;Object&gt; phantomRef = <span class="keyword">new</span> <span class="title class_">PhantomReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Object</span>(), queue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// get() æ°¸è¿œè¿”å› null</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> phantomRef.get();  <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡è¢«å›æ”¶åï¼Œè™šå¼•ç”¨ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line">Reference&lt;?&gt; ref = queue.poll();</span><br><span class="line"><span class="keyword">if</span> (ref != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯¹è±¡å·²è¢«å›æ”¶ï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>èµ„æºæ¸…ç†</strong></td>
<td>æ›¿ä»£ finalize() è¿›è¡Œèµ„æºé‡Šæ”¾</td>
</tr>
<tr>
<td><strong>å †å¤–å†…å­˜ç®¡ç†</strong></td>
<td>DirectByteBuffer çš„ Cleaner æœºåˆ¶</td>
</tr>
<tr>
<td><strong>å¯¹è±¡å›æ”¶ç›‘æ§</strong></td>
<td>è·Ÿè¸ªå¯¹è±¡ä½•æ—¶è¢« GC å›æ”¶</td>
</tr>
</tbody></table>
<h2 id="å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰"><a href="#å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰" class="headerlink" title="å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰"></a>å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰</h2><p>è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨éƒ½å¯ä»¥å…³è”å¼•ç”¨é˜Ÿåˆ—ï¼Œå½“å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œå¼•ç”¨å¯¹è±¡ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ReferenceQueue&lt;Object&gt; queue = <span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>&lt;&gt;();</span><br><span class="line">WeakReference&lt;Object&gt; weakRef = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Object</span>(), queue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// GC åæ£€æŸ¥é˜Ÿåˆ—</span></span><br><span class="line">System.gc();</span><br><span class="line">Reference&lt;?&gt; ref = queue.poll();</span><br><span class="line"><span class="keyword">if</span> (ref == weakRef) &#123;</span><br><span class="line">    <span class="comment">// å¼±å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡å·²è¢«å›æ”¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¯¹æ¯”æ€»ç»“"><a href="#å¯¹æ¯”æ€»ç»“" class="headerlink" title="å¯¹æ¯”æ€»ç»“"></a>å¯¹æ¯”æ€»ç»“</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>å¼ºå¼•ç”¨</th>
<th>è½¯å¼•ç”¨</th>
<th>å¼±å¼•ç”¨</th>
<th>è™šå¼•ç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å›æ”¶æ—¶æœº</strong></td>
<td>ä¸å¯è¾¾æ—¶</td>
<td>å†…å­˜ä¸è¶³æ—¶</td>
<td>GC æ—¶</td>
<td>éšæ—¶</td>
</tr>
<tr>
<td><strong>get() è¿”å›</strong></td>
<td>å¯¹è±¡</td>
<td>å¯¹è±¡&#x2F;null</td>
<td>å¯¹è±¡&#x2F;null</td>
<td>null</td>
</tr>
<tr>
<td><strong>å…¸å‹ç”¨é€”</strong></td>
<td>æ™®é€šå¯¹è±¡</td>
<td>ç¼“å­˜</td>
<td>é¿å…å†…å­˜æ³„æ¼</td>
<td>å›æ”¶è·Ÿè¸ª</td>
</tr>
<tr>
<td><strong>æ˜¯å¦éœ€è¦é˜Ÿåˆ—</strong></td>
<td>-</td>
<td>å¯é€‰</td>
<td>å¯é€‰</td>
<td>å¿…é¡»</td>
</tr>
</tbody></table>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li>Java&#x2F;å¹¶å‘ç¼–ç¨‹&#x2F;åŸºç¡€çŸ¥è¯†&#x2F;ThreadLocalåŸç† - è¡ç”Ÿæ¥æºï¼Œå¼±å¼•ç”¨çš„å…¸å‹åº”ç”¨</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Reactive%20Streams%E8%A7%84%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/Reactive%20Streams%E8%A7%84%E8%8C%83/" class="post-title-link" itemprop="url">Reactive Streamsè§„èŒƒ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/Reactive-Streams/" itemprop="url" rel="index"><span itemprop="name">Reactive Streams</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Reactive-Streams-è§„èŒƒ"><a href="#Reactive-Streams-è§„èŒƒ" class="headerlink" title="Reactive Streams è§„èŒƒ"></a>Reactive Streams è§„èŒƒ</h1><h2 id="ä»€ä¹ˆæ˜¯-Reactive-Streams"><a href="#ä»€ä¹ˆæ˜¯-Reactive-Streams" class="headerlink" title="ä»€ä¹ˆæ˜¯ Reactive Streams"></a>ä»€ä¹ˆæ˜¯ Reactive Streams</h2><p>Reactive Streams æ˜¯ JVM ä¸Š<strong>å“åº”å¼ç¼–ç¨‹çš„æ ‡å‡†è§„èŒƒ</strong>ï¼Œå®šä¹‰äº†å¼‚æ­¥æµå¤„ç†çš„æ¥å£å’Œåè®®ã€‚</p>
<ul>
<li><strong>å‘èµ·è€…</strong>ï¼šNetflixã€Pivotalã€Lightbendã€Twitter ç­‰å…¬å¸è”åˆåˆ¶å®š</li>
<li><strong>ç›®æ ‡</strong>ï¼šè§£å†³å¼‚æ­¥æ•°æ®æµå¤„ç†ä¸­çš„èƒŒå‹é—®é¢˜</li>
<li><strong>Java 9</strong>ï¼šå·²çº³å…¥ JDKï¼Œä½äº <code>java.util.concurrent.Flow</code></li>
</ul>
<h2 id="å››ä¸ªæ ¸å¿ƒæ¥å£"><a href="#å››ä¸ªæ ¸å¿ƒæ¥å£" class="headerlink" title="å››ä¸ªæ ¸å¿ƒæ¥å£"></a>å››ä¸ªæ ¸å¿ƒæ¥å£</h2><p>Reactive Streams åªå®šä¹‰äº† 4 ä¸ªæ¥å£ï¼Œéå¸¸ç®€æ´ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å‘å¸ƒè€… - æ•°æ®çš„ç”Ÿäº§è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Publisher</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">subscribe</span><span class="params">(Subscriber&lt;? <span class="built_in">super</span> T&gt; s)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è®¢é˜…è€… - æ•°æ®çš„æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Subscriber</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onSubscribe</span><span class="params">(Subscription s)</span>;  <span class="comment">// è®¢é˜…æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onNext</span><span class="params">(T t)</span>;                   <span class="comment">// æ¥æ”¶æ•°æ®</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Throwable t)</span>;          <span class="comment">// å‘ç”Ÿé”™è¯¯</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onComplete</span><span class="params">()</span>;                  <span class="comment">// æ•°æ®æµç»“æŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. è®¢é˜…å…³ç³» - è¿æ¥å‘å¸ƒè€…å’Œè®¢é˜…è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Subscription</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">request</span><span class="params">(<span class="type">long</span> n)</span>;  <span class="comment">// è¯·æ±‚ n ä¸ªæ•°æ®ï¼ˆèƒŒå‹æ ¸å¿ƒï¼‰</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span>;         <span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å¤„ç†å™¨ - æ—¢æ˜¯è®¢é˜…è€…åˆæ˜¯å‘å¸ƒè€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Processor</span>&lt;T, R&gt; <span class="keyword">extends</span> <span class="title class_">Subscriber</span>&lt;T&gt;, Publisher&lt;R&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº¤äº’æµç¨‹"><a href="#äº¤äº’æµç¨‹" class="headerlink" title="äº¤äº’æµç¨‹"></a>äº¤äº’æµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚   Publisher  â”‚                      â”‚  Subscriber  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">       â”‚                                     â”‚</span><br><span class="line">       â”‚  1. subscribe(subscriber)           â”‚</span><br><span class="line">       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚</span><br><span class="line">       â”‚                                     â”‚</span><br><span class="line">       â”‚  2. onSubscribe(subscription)       â”‚</span><br><span class="line">       â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚</span><br><span class="line">       â”‚                                     â”‚</span><br><span class="line">       â”‚  3. request(n) è¯·æ±‚nä¸ªæ•°æ®          â”‚</span><br><span class="line">       â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚</span><br><span class="line">       â”‚                                     â”‚</span><br><span class="line">       â”‚  4. onNext(data) å‘é€æ•°æ®ï¼ˆæœ€å¤šnä¸ªï¼‰â”‚</span><br><span class="line">       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚</span><br><span class="line">       â”‚         ... é‡å¤ 3-4 ...            â”‚</span><br><span class="line">       â”‚                                     â”‚</span><br><span class="line">       â”‚  5. onComplete() æˆ– onError()       â”‚</span><br><span class="line">       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚</span><br><span class="line">       â–¼                                     â–¼</span><br></pre></td></tr></table></figure>

<h2 id="èƒŒå‹ï¼ˆBackpressureï¼‰"><a href="#èƒŒå‹ï¼ˆBackpressureï¼‰" class="headerlink" title="èƒŒå‹ï¼ˆBackpressureï¼‰"></a>èƒŒå‹ï¼ˆBackpressureï¼‰</h2><p>èƒŒå‹æ˜¯ Reactive Streams çš„<strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼Œè§£å†³ç”Ÿäº§è€…é€Ÿåº¦å¿«äºæ¶ˆè´¹è€…çš„é—®é¢˜ã€‚</p>
<h3 id="æ²¡æœ‰èƒŒå‹çš„é—®é¢˜"><a href="#æ²¡æœ‰èƒŒå‹çš„é—®é¢˜" class="headerlink" title="æ²¡æœ‰èƒŒå‹çš„é—®é¢˜"></a>æ²¡æœ‰èƒŒå‹çš„é—®é¢˜</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿäº§è€…ï¼š1000æ¡/ç§’  â”€â”€â”€â”€â”€â”€â–¶  æ¶ˆè´¹è€…ï¼š100æ¡/ç§’</span><br><span class="line">                              â†“</span><br><span class="line">                         å†…å­˜æº¢å‡ºï¼</span><br></pre></td></tr></table></figure>

<h3 id="æœ‰èƒŒå‹çš„è§£å†³æ–¹æ¡ˆ"><a href="#æœ‰èƒŒå‹çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="æœ‰èƒŒå‹çš„è§£å†³æ–¹æ¡ˆ"></a>æœ‰èƒŒå‹çš„è§£å†³æ–¹æ¡ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶ˆè´¹è€…æ§åˆ¶é€Ÿåº¦</span></span><br><span class="line">subscription.request(<span class="number">10</span>);  <span class="comment">// æˆ‘åªè¦10æ¡</span></span><br><span class="line"><span class="comment">// ç”Ÿäº§è€…æœ€å¤šå‘10æ¡ï¼Œç„¶åç­‰å¾…ä¸‹ä¸€æ¬¡ request</span></span><br></pre></td></tr></table></figure>

<h3 id="èƒŒå‹åè®®è§„åˆ™"><a href="#èƒŒå‹åè®®è§„åˆ™" class="headerlink" title="èƒŒå‹åè®®è§„åˆ™"></a>èƒŒå‹åè®®è§„åˆ™</h3><ol>
<li><strong>Subscriber ä¸»åŠ¨è¯·æ±‚</strong>ï¼šé€šè¿‡ <code>request(n)</code> å‘Šè¯‰ Publisher éœ€è¦å¤šå°‘æ•°æ®</li>
<li><strong>Publisher éµå®ˆçº¦å®š</strong>ï¼šæœ€å¤šå‘é€ n ä¸ªæ•°æ®ï¼Œä¸èƒ½è¶…å‘</li>
<li><strong>ç´¯ç§¯è¯·æ±‚</strong>ï¼šå¤šæ¬¡ <code>request()</code> çš„æ•°é‡ä¼šç´¯åŠ </li>
<li><strong>æ— é™è¯·æ±‚</strong>ï¼š<code>request(Long.MAX_VALUE)</code> è¡¨ç¤ºä¸é™åˆ¶</li>
</ol>
<h2 id="è§„èŒƒçš„å®ç°"><a href="#è§„èŒƒçš„å®ç°" class="headerlink" title="è§„èŒƒçš„å®ç°"></a>è§„èŒƒçš„å®ç°</h2><table>
<thead>
<tr>
<th>å®ç°</th>
<th>è¯´æ˜</th>
<th>ä½¿ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Project Reactor</strong></td>
<td>Spring é»˜è®¤å®ç°</td>
<td>Spring WebFlux</td>
</tr>
<tr>
<td><strong>RxJava</strong></td>
<td>Netflix å¼€æº</td>
<td>Androidã€é€šç”¨</td>
</tr>
<tr>
<td><strong>Akka Streams</strong></td>
<td>Lightbend å¼€æº</td>
<td>Scala ç”Ÿæ€</td>
</tr>
<tr>
<td><strong>Java 9 Flow</strong></td>
<td>JDK å†…ç½®</td>
<td>æ ‡å‡†åº“</td>
</tr>
</tbody></table>
<p>Spring ç”Ÿæ€ä½¿ç”¨çš„æ˜¯ <strong>Project Reactor</strong>ï¼Œä¸‹ä¸€ç¯‡è¯¦ç»†ä»‹ç»ã€‚</p>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li>ä¸‹ä¸€ç¯‡ï¼šProject Reactor å®ç°</li>
<li>WebFlux - å“åº”å¼ç¼–ç¨‹åŸºç¡€</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/Reactor%20API%E5%8F%82%E8%80%83/" class="post-title-link" itemprop="url">Reactor APIå‚è€ƒ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/Reactive-Streams/" itemprop="url" rel="index"><span itemprop="name">Reactive Streams</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Reactor-API-å‚è€ƒ"><a href="#Reactor-API-å‚è€ƒ" class="headerlink" title="Reactor API å‚è€ƒ"></a>Reactor API å‚è€ƒ</h1><p>Project Reactor æä¾›äº†ä¸°å¯Œçš„æ“ä½œç¬¦ï¼Œæœ¬æ–‡æŒ‰åŠŸèƒ½åˆ†ç±»æ•´ç†ã€‚</p>
<hr>
<h2 id="ä¸€ã€åˆ›å»ºæ“ä½œç¬¦"><a href="#ä¸€ã€åˆ›å»ºæ“ä½œç¬¦" class="headerlink" title="ä¸€ã€åˆ›å»ºæ“ä½œç¬¦"></a>ä¸€ã€åˆ›å»ºæ“ä½œç¬¦</h2><h3 id="Mono-åˆ›å»º"><a href="#Mono-åˆ›å»º" class="headerlink" title="Mono åˆ›å»º"></a>Mono åˆ›å»º</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>Mono.just(T)</code></td>
<td>åˆ›å»ºåŒ…å«å•ä¸ªå€¼çš„ Mono</td>
<td><code>Mono.just(&quot;hello&quot;)</code></td>
</tr>
<tr>
<td><code>Mono.empty()</code></td>
<td>åˆ›å»ºç©ºçš„ Mono</td>
<td><code>Mono.empty()</code></td>
</tr>
<tr>
<td><code>Mono.error(Throwable)</code></td>
<td>åˆ›å»ºé”™è¯¯ Mono</td>
<td><code>Mono.error(new RuntimeException())</code></td>
</tr>
<tr>
<td><code>Mono.never()</code></td>
<td>æ°¸ä¸å‘å‡ºä¿¡å·çš„ Mono</td>
<td><code>Mono.never()</code></td>
</tr>
<tr>
<td><code>Mono.defer(Supplier)</code></td>
<td>å»¶è¿Ÿåˆ›å»ºï¼Œæ¯æ¬¡è®¢é˜…éƒ½æ‰§è¡Œ</td>
<td><code>Mono.defer(() -&gt; Mono.just(getValue()))</code></td>
</tr>
<tr>
<td><code>Mono.fromCallable(Callable)</code></td>
<td>ä» Callable åˆ›å»º</td>
<td><code>Mono.fromCallable(() -&gt; compute())</code></td>
</tr>
<tr>
<td><code>Mono.fromSupplier(Supplier)</code></td>
<td>ä» Supplier åˆ›å»º</td>
<td><code>Mono.fromSupplier(() -&gt; getValue())</code></td>
</tr>
<tr>
<td><code>Mono.fromFuture(CompletableFuture)</code></td>
<td>ä» Future åˆ›å»º</td>
<td><code>Mono.fromFuture(future)</code></td>
</tr>
<tr>
<td><code>Mono.fromRunnable(Runnable)</code></td>
<td>ä» Runnable åˆ›å»ºï¼ˆæ— è¿”å›å€¼ï¼‰</td>
<td><code>Mono.fromRunnable(() -&gt; doSomething())</code></td>
</tr>
<tr>
<td><code>Mono.delay(Duration)</code></td>
<td>å»¶è¿Ÿåå‘å‡º 0L</td>
<td><code>Mono.delay(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>Mono.create(Consumer&lt;MonoSink&gt;)</code></td>
<td>ç¼–ç¨‹å¼åˆ›å»º</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mono.create ç¤ºä¾‹</span></span><br><span class="line">Mono.create(sink -&gt; &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> doAsyncWork();</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="literal">null</span>) &#123;</span><br><span class="line">        sink.success(result);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        sink.error(<span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;å¤±è´¥&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="Flux-åˆ›å»º"><a href="#Flux-åˆ›å»º" class="headerlink" title="Flux åˆ›å»º"></a>Flux åˆ›å»º</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>Flux.just(T...)</code></td>
<td>ä»å¤šä¸ªå€¼åˆ›å»º</td>
<td><code>Flux.just(1, 2, 3)</code></td>
</tr>
<tr>
<td><code>Flux.fromIterable(Iterable)</code></td>
<td>ä»é›†åˆåˆ›å»º</td>
<td><code>Flux.fromIterable(list)</code></td>
</tr>
<tr>
<td><code>Flux.fromArray(T[])</code></td>
<td>ä»æ•°ç»„åˆ›å»º</td>
<td><code>Flux.fromArray(array)</code></td>
</tr>
<tr>
<td><code>Flux.fromStream(Stream)</code></td>
<td>ä» Stream åˆ›å»º</td>
<td><code>Flux.fromStream(stream)</code></td>
</tr>
<tr>
<td><code>Flux.range(int, int)</code></td>
<td>åˆ›å»ºæ•´æ•°åºåˆ—</td>
<td><code>Flux.range(1, 10)</code></td>
</tr>
<tr>
<td><code>Flux.interval(Duration)</code></td>
<td>å®šæ—¶å‘å‡ºé€’å¢æ•°å­—</td>
<td><code>Flux.interval(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>Flux.empty()</code></td>
<td>åˆ›å»ºç©º Flux</td>
<td><code>Flux.empty()</code></td>
</tr>
<tr>
<td><code>Flux.error(Throwable)</code></td>
<td>åˆ›å»ºé”™è¯¯ Flux</td>
<td><code>Flux.error(new Exception())</code></td>
</tr>
<tr>
<td><code>Flux.never()</code></td>
<td>æ°¸ä¸å‘å‡ºä¿¡å·</td>
<td><code>Flux.never()</code></td>
</tr>
<tr>
<td><code>Flux.defer(Supplier)</code></td>
<td>å»¶è¿Ÿåˆ›å»º</td>
<td><code>Flux.defer(() -&gt; Flux.just(getData()))</code></td>
</tr>
<tr>
<td><code>Flux.generate(Consumer)</code></td>
<td>åŒæ­¥ç”Ÿæˆï¼ˆä¸€æ¬¡ä¸€ä¸ªï¼‰</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
<tr>
<td><code>Flux.create(Consumer)</code></td>
<td>å¼‚æ­¥ç”Ÿæˆï¼ˆå¯å¤šä¸ªï¼‰</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
<tr>
<td><code>Flux.push(Consumer)</code></td>
<td>å•çº¿ç¨‹å¼‚æ­¥ç”Ÿæˆ</td>
<td>ç±»ä¼¼ create</td>
</tr>
<tr>
<td><code>Flux.using(Callable, Function, Consumer)</code></td>
<td>èµ„æºç®¡ç†</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
<tr>
<td><code>Flux.concat(Publisher...)</code></td>
<td>é¡ºåºè¿æ¥å¤šä¸ªæµ</td>
<td><code>Flux.concat(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.merge(Publisher...)</code></td>
<td>å¹¶è¡Œåˆå¹¶å¤šä¸ªæµ</td>
<td><code>Flux.merge(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.zip(Publisher...)</code></td>
<td>ç»„åˆå¤šä¸ªæµ</td>
<td><code>Flux.zip(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>Flux.combineLatest(Publisher...)</code></td>
<td>ç»„åˆæœ€æ–°å€¼</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Flux.generate ç¤ºä¾‹ - åŒæ­¥ç”Ÿæˆ</span></span><br><span class="line">Flux.generate(</span><br><span class="line">    () -&gt; <span class="number">0</span>,  <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">    (state, sink) -&gt; &#123;</span><br><span class="line">        sink.next(<span class="string">&quot;å€¼: &quot;</span> + state);</span><br><span class="line">        <span class="keyword">if</span> (state == <span class="number">10</span>) sink.complete();</span><br><span class="line">        <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flux.create ç¤ºä¾‹ - å¼‚æ­¥ç”Ÿæˆ</span></span><br><span class="line">Flux.create(sink -&gt; &#123;</span><br><span class="line">    eventSource.onData(data -&gt; sink.next(data));</span><br><span class="line">    eventSource.onError(e -&gt; sink.error(e));</span><br><span class="line">    eventSource.onComplete(() -&gt; sink.complete());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flux.using ç¤ºä¾‹ - èµ„æºç®¡ç†</span></span><br><span class="line">Flux.using(</span><br><span class="line">    () -&gt; <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file.txt&quot;</span>),  <span class="comment">// åˆ›å»ºèµ„æº</span></span><br><span class="line">    inputStream -&gt; Flux.just(readData(inputStream)),  <span class="comment">// ä½¿ç”¨èµ„æº</span></span><br><span class="line">    inputStream -&gt; inputStream.close()  <span class="comment">// å…³é—­èµ„æº</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äºŒã€è½¬æ¢æ“ä½œç¬¦"><a href="#äºŒã€è½¬æ¢æ“ä½œç¬¦" class="headerlink" title="äºŒã€è½¬æ¢æ“ä½œç¬¦"></a>äºŒã€è½¬æ¢æ“ä½œç¬¦</h2><h3 id="åŸºæœ¬è½¬æ¢"><a href="#åŸºæœ¬è½¬æ¢" class="headerlink" title="åŸºæœ¬è½¬æ¢"></a>åŸºæœ¬è½¬æ¢</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>map(Function)</code></td>
<td>åŒæ­¥è½¬æ¢æ¯ä¸ªå…ƒç´ </td>
<td><code>flux.map(i -&gt; i * 2)</code></td>
</tr>
<tr>
<td><code>flatMap(Function)</code></td>
<td>å¼‚æ­¥è½¬æ¢ï¼Œç»“æœåˆå¹¶ï¼ˆæ— åºï¼‰</td>
<td><code>flux.flatMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>flatMapSequential(Function)</code></td>
<td>å¼‚æ­¥è½¬æ¢ï¼Œä¿æŒé¡ºåº</td>
<td><code>flux.flatMapSequential(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>concatMap(Function)</code></td>
<td>å¼‚æ­¥è½¬æ¢ï¼Œé¡ºåºæ‰§è¡Œ</td>
<td><code>flux.concatMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>switchMap(Function)</code></td>
<td>åˆ‡æ¢åˆ°æ–°æµï¼Œå–æ¶ˆæ—§æµ</td>
<td><code>flux.switchMap(id -&gt; fetchUser(id))</code></td>
</tr>
<tr>
<td><code>cast(Class)</code></td>
<td>ç±»å‹è½¬æ¢</td>
<td><code>flux.cast(String.class)</code></td>
</tr>
<tr>
<td><code>ofType(Class)</code></td>
<td>è¿‡æ»¤å¹¶è½¬æ¢ç±»å‹</td>
<td><code>flux.ofType(String.class)</code></td>
</tr>
<tr>
<td><code>index()</code></td>
<td>æ·»åŠ ç´¢å¼•</td>
<td><code>flux.index()</code> â†’ <code>Tuple2&lt;Long, T&gt;</code></td>
</tr>
<tr>
<td><code>timestamp()</code></td>
<td>æ·»åŠ æ—¶é—´æˆ³</td>
<td><code>flux.timestamp()</code> â†’ <code>Tuple2&lt;Long, T&gt;</code></td>
</tr>
<tr>
<td><code>elapsed()</code></td>
<td>æ·»åŠ æ—¶é—´é—´éš”</td>
<td><code>flux.elapsed()</code></td>
</tr>
</tbody></table>
<h3 id="flatMap-å˜ä½“å¯¹æ¯”"><a href="#flatMap-å˜ä½“å¯¹æ¯”" class="headerlink" title="flatMap å˜ä½“å¯¹æ¯”"></a>flatMap å˜ä½“å¯¹æ¯”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flatMap:           å¹¶è¡Œæ‰§è¡Œï¼Œç»“æœæ— åº</span><br><span class="line">flatMapSequential: å¹¶è¡Œæ‰§è¡Œï¼Œç»“æœæœ‰åº</span><br><span class="line">concatMap:         é¡ºåºæ‰§è¡Œï¼Œç»“æœæœ‰åº</span><br><span class="line">switchMap:         åˆ‡æ¢æ–°æµï¼Œå–æ¶ˆæ—§æµ</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flatMap vs concatMap</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .flatMap(i -&gt; Mono.just(i).delayElement(Duration.ofMillis(<span class="number">100</span> - i * <span class="number">30</span>)))</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// å¯èƒ½è¾“å‡º: 3, 2, 1</span></span><br><span class="line"></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .concatMap(i -&gt; Mono.just(i).delayElement(Duration.ofMillis(<span class="number">100</span>)))</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// è¾“å‡º: 1, 2, 3</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸‰ã€è¿‡æ»¤æ“ä½œç¬¦"><a href="#ä¸‰ã€è¿‡æ»¤æ“ä½œç¬¦" class="headerlink" title="ä¸‰ã€è¿‡æ»¤æ“ä½œç¬¦"></a>ä¸‰ã€è¿‡æ»¤æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>filter(Predicate)</code></td>
<td>è¿‡æ»¤å…ƒç´ </td>
<td><code>flux.filter(i -&gt; i &gt; 5)</code></td>
</tr>
<tr>
<td><code>filterWhen(Function)</code></td>
<td>å¼‚æ­¥è¿‡æ»¤</td>
<td><code>flux.filterWhen(i -&gt; checkAsync(i))</code></td>
</tr>
<tr>
<td><code>distinct()</code></td>
<td>å»é‡</td>
<td><code>flux.distinct()</code></td>
</tr>
<tr>
<td><code>distinctUntilChanged()</code></td>
<td>è¿ç»­å»é‡</td>
<td><code>flux.distinctUntilChanged()</code></td>
</tr>
<tr>
<td><code>take(long)</code></td>
<td>å–å‰ n ä¸ª</td>
<td><code>flux.take(5)</code></td>
</tr>
<tr>
<td><code>takeLast(int)</code></td>
<td>å–æœ€å n ä¸ª</td>
<td><code>flux.takeLast(3)</code></td>
</tr>
<tr>
<td><code>takeUntil(Predicate)</code></td>
<td>å–ç›´åˆ°æ¡ä»¶æ»¡è¶³</td>
<td><code>flux.takeUntil(i -&gt; i &gt; 10)</code></td>
</tr>
<tr>
<td><code>takeWhile(Predicate)</code></td>
<td>å–å½“æ¡ä»¶æ»¡è¶³æ—¶</td>
<td><code>flux.takeWhile(i -&gt; i &lt; 10)</code></td>
</tr>
<tr>
<td><code>skip(long)</code></td>
<td>è·³è¿‡å‰ n ä¸ª</td>
<td><code>flux.skip(5)</code></td>
</tr>
<tr>
<td><code>skipLast(int)</code></td>
<td>è·³è¿‡æœ€å n ä¸ª</td>
<td><code>flux.skipLast(3)</code></td>
</tr>
<tr>
<td><code>skipUntil(Predicate)</code></td>
<td>è·³è¿‡ç›´åˆ°æ¡ä»¶æ»¡è¶³</td>
<td><code>flux.skipUntil(i -&gt; i &gt; 5)</code></td>
</tr>
<tr>
<td><code>skipWhile(Predicate)</code></td>
<td>è·³è¿‡å½“æ¡ä»¶æ»¡è¶³æ—¶</td>
<td><code>flux.skipWhile(i -&gt; i &lt; 5)</code></td>
</tr>
<tr>
<td><code>first()</code></td>
<td>å–ç¬¬ä¸€ä¸ªï¼ˆå·²åºŸå¼ƒï¼‰</td>
<td>ä½¿ç”¨ <code>next()</code></td>
</tr>
<tr>
<td><code>next()</code></td>
<td>å–ç¬¬ä¸€ä¸ªï¼Œè¿”å› Mono</td>
<td><code>flux.next()</code></td>
</tr>
<tr>
<td><code>last()</code></td>
<td>å–æœ€åä¸€ä¸ª</td>
<td><code>flux.last()</code></td>
</tr>
<tr>
<td><code>last(T)</code></td>
<td>å–æœ€åä¸€ä¸ªï¼Œæœ‰é»˜è®¤å€¼</td>
<td><code>flux.last(defaultValue)</code></td>
</tr>
<tr>
<td><code>single()</code></td>
<td>æœŸæœ›åªæœ‰ä¸€ä¸ªå…ƒç´ </td>
<td><code>flux.single()</code></td>
</tr>
<tr>
<td><code>singleOrEmpty()</code></td>
<td>æœŸæœ› 0 æˆ– 1 ä¸ªå…ƒç´ </td>
<td><code>flux.singleOrEmpty()</code></td>
</tr>
<tr>
<td><code>elementAt(int)</code></td>
<td>å–æŒ‡å®šä½ç½®å…ƒç´ </td>
<td><code>flux.elementAt(5)</code></td>
</tr>
<tr>
<td><code>ignoreElements()</code></td>
<td>å¿½ç•¥æ‰€æœ‰å…ƒç´ </td>
<td><code>flux.ignoreElements()</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="å››ã€ç»„åˆæ“ä½œç¬¦"><a href="#å››ã€ç»„åˆæ“ä½œç¬¦" class="headerlink" title="å››ã€ç»„åˆæ“ä½œç¬¦"></a>å››ã€ç»„åˆæ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>concat(Publisher...)</code></td>
<td>é¡ºåºè¿æ¥</td>
<td><code>Flux.concat(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>concatWith(Publisher)</code></td>
<td>ä¸å¦ä¸€ä¸ªæµè¿æ¥</td>
<td><code>flux1.concatWith(flux2)</code></td>
</tr>
<tr>
<td><code>merge(Publisher...)</code></td>
<td>å¹¶è¡Œåˆå¹¶</td>
<td><code>Flux.merge(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>mergeWith(Publisher)</code></td>
<td>ä¸å¦ä¸€ä¸ªæµåˆå¹¶</td>
<td><code>flux1.mergeWith(flux2)</code></td>
</tr>
<tr>
<td><code>mergeSequential(Publisher...)</code></td>
<td>å¹¶è¡Œæ‰§è¡Œï¼Œé¡ºåºè¾“å‡º</td>
<td><code>Flux.mergeSequential(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>zip(Publisher...)</code></td>
<td>ä¸€å¯¹ä¸€ç»„åˆ</td>
<td><code>Flux.zip(flux1, flux2)</code></td>
</tr>
<tr>
<td><code>zipWith(Publisher)</code></td>
<td>ä¸å¦ä¸€ä¸ªæµç»„åˆ</td>
<td><code>flux1.zipWith(flux2)</code></td>
</tr>
<tr>
<td><code>zipWith(Publisher, BiFunction)</code></td>
<td>ç»„åˆå¹¶è½¬æ¢</td>
<td><code>flux1.zipWith(flux2, (a, b) -&gt; a + b)</code></td>
</tr>
<tr>
<td><code>combineLatest(Publisher...)</code></td>
<td>ç»„åˆæœ€æ–°å€¼</td>
<td><code>Flux.combineLatest(flux1, flux2, combiner)</code></td>
</tr>
<tr>
<td><code>startWith(T...)</code></td>
<td>åœ¨å¼€å¤´æ·»åŠ å…ƒç´ </td>
<td><code>flux.startWith(0)</code></td>
</tr>
<tr>
<td><code>and(Publisher)</code></td>
<td>ç­‰å¾…ä¸¤ä¸ªéƒ½å®Œæˆ</td>
<td><code>mono1.and(mono2)</code></td>
</tr>
<tr>
<td><code>when(Publisher...)</code></td>
<td>ç­‰å¾…æ‰€æœ‰å®Œæˆ</td>
<td><code>Mono.when(mono1, mono2)</code></td>
</tr>
<tr>
<td><code>then()</code></td>
<td>å¿½ç•¥å…ƒç´ ï¼Œåªå…³å¿ƒå®Œæˆ</td>
<td><code>flux.then()</code></td>
</tr>
<tr>
<td><code>thenMany(Publisher)</code></td>
<td>å®Œæˆååˆ‡æ¢åˆ°å¦ä¸€ä¸ªæµ</td>
<td><code>mono.thenMany(flux)</code></td>
</tr>
<tr>
<td><code>thenReturn(T)</code></td>
<td>å®Œæˆåè¿”å›å›ºå®šå€¼</td>
<td><code>mono.thenReturn(&quot;done&quot;)</code></td>
</tr>
</tbody></table>
<h3 id="ç»„åˆæ“ä½œç¬¦å¯¹æ¯”"><a href="#ç»„åˆæ“ä½œç¬¦å¯¹æ¯”" class="headerlink" title="ç»„åˆæ“ä½œç¬¦å¯¹æ¯”"></a>ç»„åˆæ“ä½œç¬¦å¯¹æ¯”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">concat:  Aå®Œæˆ â†’ Bå¼€å§‹ï¼Œé¡ºåºæ‰§è¡Œ</span><br><span class="line">merge:   Aå’ŒBåŒæ—¶æ‰§è¡Œï¼Œè°å¿«è°å…ˆè¾“å‡º</span><br><span class="line">zip:     Aå’ŒBä¸€å¯¹ä¸€é…å¯¹ï¼Œ(a1,b1), (a2,b2)...</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// zip ç¤ºä¾‹</span></span><br><span class="line">Flux&lt;String&gt; names = Flux.just(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">Flux&lt;Integer&gt; ages = Flux.just(<span class="number">25</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">Flux.zip(names, ages, (name, age) -&gt; name + <span class="string">&quot;: &quot;</span> + age)</span><br><span class="line">    .subscribe(System.out::println);</span><br><span class="line"><span class="comment">// è¾“å‡º: å¼ ä¸‰: 25, æå››: 30</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äº”ã€é”™è¯¯å¤„ç†æ“ä½œç¬¦"><a href="#äº”ã€é”™è¯¯å¤„ç†æ“ä½œç¬¦" class="headerlink" title="äº”ã€é”™è¯¯å¤„ç†æ“ä½œç¬¦"></a>äº”ã€é”™è¯¯å¤„ç†æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>onErrorReturn(T)</code></td>
<td>é”™è¯¯æ—¶è¿”å›é»˜è®¤å€¼</td>
<td><code>flux.onErrorReturn(defaultValue)</code></td>
</tr>
<tr>
<td><code>onErrorReturn(Predicate, T)</code></td>
<td>ç‰¹å®šé”™è¯¯è¿”å›é»˜è®¤å€¼</td>
<td><code>flux.onErrorReturn(e -&gt; e instanceof IOException, default)</code></td>
</tr>
<tr>
<td><code>onErrorResume(Function)</code></td>
<td>é”™è¯¯æ—¶åˆ‡æ¢åˆ°å¤‡ç”¨æµ</td>
<td><code>flux.onErrorResume(e -&gt; backupFlux)</code></td>
</tr>
<tr>
<td><code>onErrorMap(Function)</code></td>
<td>è½¬æ¢é”™è¯¯ç±»å‹</td>
<td><code>flux.onErrorMap(e -&gt; new CustomException(e))</code></td>
</tr>
<tr>
<td><code>onErrorContinue(BiConsumer)</code></td>
<td>é”™è¯¯æ—¶è·³è¿‡ç»§ç»­</td>
<td><code>flux.onErrorContinue((e, v) -&gt; log.error(e))</code></td>
</tr>
<tr>
<td><code>onErrorStop()</code></td>
<td>é”™è¯¯æ—¶åœæ­¢</td>
<td><code>flux.onErrorStop()</code></td>
</tr>
<tr>
<td><code>doOnError(Consumer)</code></td>
<td>é”™è¯¯æ—¶æ‰§è¡Œå‰¯ä½œç”¨</td>
<td><code>flux.doOnError(e -&gt; log.error(e))</code></td>
</tr>
<tr>
<td><code>retry()</code></td>
<td>æ— é™é‡è¯•</td>
<td><code>flux.retry()</code></td>
</tr>
<tr>
<td><code>retry(long)</code></td>
<td>é‡è¯• n æ¬¡</td>
<td><code>flux.retry(3)</code></td>
</tr>
<tr>
<td><code>retryWhen(Retry)</code></td>
<td>è‡ªå®šä¹‰é‡è¯•ç­–ç•¥</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// retryWhen ç¤ºä¾‹</span></span><br><span class="line">flux.retryWhen(Retry.backoff(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>))</span><br><span class="line">    .maxBackoff(Duration.ofSeconds(<span class="number">10</span>))</span><br><span class="line">    .filter(e -&gt; e <span class="keyword">instanceof</span> IOException)</span><br><span class="line">    .onRetryExhaustedThrow((spec, signal) -&gt; signal.failure())</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡æ•°é€€é¿é‡è¯•</span></span><br><span class="line">flux.retryWhen(Retry.backoff(<span class="number">5</span>, Duration.ofMillis(<span class="number">100</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å›ºå®šé—´éš”é‡è¯•</span></span><br><span class="line">flux.retryWhen(Retry.fixedDelay(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>)));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å…­ã€å‰¯ä½œç”¨æ“ä½œç¬¦ï¼ˆdoOn-ç³»åˆ—ï¼‰"><a href="#å…­ã€å‰¯ä½œç”¨æ“ä½œç¬¦ï¼ˆdoOn-ç³»åˆ—ï¼‰" class="headerlink" title="å…­ã€å‰¯ä½œç”¨æ“ä½œç¬¦ï¼ˆdoOn ç³»åˆ—ï¼‰"></a>å…­ã€å‰¯ä½œç”¨æ“ä½œç¬¦ï¼ˆdoOn ç³»åˆ—ï¼‰</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>è§¦å‘æ—¶æœº</th>
</tr>
</thead>
<tbody><tr>
<td><code>doOnNext(Consumer)</code></td>
<td>æ¯ä¸ªå…ƒç´ </td>
<td>onNext ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnError(Consumer)</code></td>
<td>å‘ç”Ÿé”™è¯¯</td>
<td>onError ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnComplete(Runnable)</code></td>
<td>å®Œæˆæ—¶</td>
<td>onComplete ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnSubscribe(Consumer)</code></td>
<td>è®¢é˜…æ—¶</td>
<td>onSubscribe ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnRequest(LongConsumer)</code></td>
<td>è¯·æ±‚æ•°æ®æ—¶</td>
<td>request ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnCancel(Runnable)</code></td>
<td>å–æ¶ˆæ—¶</td>
<td>cancel ä¿¡å·</td>
</tr>
<tr>
<td><code>doOnTerminate(Runnable)</code></td>
<td>ç»ˆæ­¢æ—¶ï¼ˆå®Œæˆæˆ–é”™è¯¯ï¼‰</td>
<td>onComplete æˆ– onError</td>
</tr>
<tr>
<td><code>doAfterTerminate(Runnable)</code></td>
<td>ç»ˆæ­¢å</td>
<td>ç»ˆæ­¢ä¿¡å·å‘é€å</td>
</tr>
<tr>
<td><code>doOnEach(Consumer&lt;Signal&gt;)</code></td>
<td>æ¯ä¸ªä¿¡å·</td>
<td>æ‰€æœ‰ä¿¡å·</td>
</tr>
<tr>
<td><code>doFirst(Runnable)</code></td>
<td>è®¢é˜…å‰</td>
<td>è®¢é˜…é“¾å»ºç«‹å‰</td>
</tr>
<tr>
<td><code>doFinally(Consumer&lt;SignalType&gt;)</code></td>
<td>æœ€ç»ˆæ‰§è¡Œ</td>
<td>ä»»ä½•ç»ˆæ­¢æƒ…å†µ</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç›‘æ§</span></span><br><span class="line">flux</span><br><span class="line">    .doFirst(() -&gt; log.info(<span class="string">&quot;å¼€å§‹&quot;</span>))</span><br><span class="line">    .doOnSubscribe(s -&gt; log.info(<span class="string">&quot;è®¢é˜…&quot;</span>))</span><br><span class="line">    .doOnRequest(n -&gt; log.info(<span class="string">&quot;è¯·æ±‚: &quot;</span> + n))</span><br><span class="line">    .doOnNext(v -&gt; log.info(<span class="string">&quot;æ”¶åˆ°: &quot;</span> + v))</span><br><span class="line">    .doOnError(e -&gt; log.error(<span class="string">&quot;é”™è¯¯&quot;</span>, e))</span><br><span class="line">    .doOnComplete(() -&gt; log.info(<span class="string">&quot;å®Œæˆ&quot;</span>))</span><br><span class="line">    .doOnCancel(() -&gt; log.info(<span class="string">&quot;å–æ¶ˆ&quot;</span>))</span><br><span class="line">    .doOnTerminate(() -&gt; log.info(<span class="string">&quot;ç»ˆæ­¢&quot;</span>))</span><br><span class="line">    .doAfterTerminate(() -&gt; log.info(<span class="string">&quot;ç»ˆæ­¢å&quot;</span>))</span><br><span class="line">    .doFinally(type -&gt; log.info(<span class="string">&quot;æœ€ç»ˆ: &quot;</span> + type))</span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¸ƒã€è°ƒåº¦å™¨æ“ä½œç¬¦"><a href="#ä¸ƒã€è°ƒåº¦å™¨æ“ä½œç¬¦" class="headerlink" title="ä¸ƒã€è°ƒåº¦å™¨æ“ä½œç¬¦"></a>ä¸ƒã€è°ƒåº¦å™¨æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>subscribeOn(Scheduler)</code></td>
<td>æŒ‡å®šè®¢é˜…çº¿ç¨‹</td>
<td><code>flux.subscribeOn(Schedulers.boundedElastic())</code></td>
</tr>
<tr>
<td><code>publishOn(Scheduler)</code></td>
<td>æŒ‡å®šå‘å¸ƒçº¿ç¨‹</td>
<td><code>flux.publishOn(Schedulers.parallel())</code></td>
</tr>
</tbody></table>
<h3 id="è°ƒåº¦å™¨ç±»å‹"><a href="#è°ƒåº¦å™¨ç±»å‹" class="headerlink" title="è°ƒåº¦å™¨ç±»å‹"></a>è°ƒåº¦å™¨ç±»å‹</h3><table>
<thead>
<tr>
<th>Scheduler</th>
<th>è¯´æ˜</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>Schedulers.immediate()</code></td>
<td>å½“å‰çº¿ç¨‹</td>
<td>æµ‹è¯•ã€ç®€å•åœºæ™¯</td>
</tr>
<tr>
<td><code>Schedulers.single()</code></td>
<td>å•çº¿ç¨‹</td>
<td>é¡ºåºæ‰§è¡Œ</td>
</tr>
<tr>
<td><code>Schedulers.parallel()</code></td>
<td>å¹¶è¡Œçº¿ç¨‹æ± ï¼ˆCPUæ ¸å¿ƒæ•°ï¼‰</td>
<td>CPU å¯†é›†å‹</td>
</tr>
<tr>
<td><code>Schedulers.boundedElastic()</code></td>
<td>å¼¹æ€§çº¿ç¨‹æ± ï¼ˆæœ‰ä¸Šé™ï¼‰</td>
<td>I&#x2F;O å¯†é›†å‹ã€é˜»å¡æ“ä½œ</td>
</tr>
<tr>
<td><code>Schedulers.fromExecutor(Executor)</code></td>
<td>è‡ªå®šä¹‰çº¿ç¨‹æ± </td>
<td>ç‰¹æ®Šéœ€æ±‚</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// subscribeOn vs publishOn</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;ç”Ÿæˆ: &quot;</span> + i))  <span class="comment">// boundedElastic çº¿ç¨‹</span></span><br><span class="line">    .subscribeOn(Schedulers.boundedElastic())</span><br><span class="line">    .publishOn(Schedulers.parallel())</span><br><span class="line">    .doOnNext(i -&gt; log.info(<span class="string">&quot;å¤„ç†: &quot;</span> + i))  <span class="comment">// parallel çº¿ç¨‹</span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å…«ã€ç¼“å†²ä¸çª—å£æ“ä½œç¬¦"><a href="#å…«ã€ç¼“å†²ä¸çª—å£æ“ä½œç¬¦" class="headerlink" title="å…«ã€ç¼“å†²ä¸çª—å£æ“ä½œç¬¦"></a>å…«ã€ç¼“å†²ä¸çª—å£æ“ä½œç¬¦</h2><h3 id="ç¼“å†²ï¼ˆæ”¶é›†ä¸º-Listï¼‰"><a href="#ç¼“å†²ï¼ˆæ”¶é›†ä¸º-Listï¼‰" class="headerlink" title="ç¼“å†²ï¼ˆæ”¶é›†ä¸º Listï¼‰"></a>ç¼“å†²ï¼ˆæ”¶é›†ä¸º Listï¼‰</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>buffer()</code></td>
<td>æ”¶é›†æ‰€æœ‰å…ƒç´ </td>
<td><code>flux.buffer()</code> â†’ <code>Flux&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>buffer(int)</code></td>
<td>æŒ‰æ•°é‡ç¼“å†²</td>
<td><code>flux.buffer(10)</code></td>
</tr>
<tr>
<td><code>buffer(Duration)</code></td>
<td>æŒ‰æ—¶é—´ç¼“å†²</td>
<td><code>flux.buffer(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>buffer(int, int)</code></td>
<td>æ»‘åŠ¨çª—å£ç¼“å†²</td>
<td><code>flux.buffer(3, 1)</code></td>
</tr>
<tr>
<td><code>bufferUntil(Predicate)</code></td>
<td>ç¼“å†²ç›´åˆ°æ¡ä»¶æ»¡è¶³</td>
<td><code>flux.bufferUntil(i -&gt; i % 10 == 0)</code></td>
</tr>
<tr>
<td><code>bufferWhile(Predicate)</code></td>
<td>ç¼“å†²å½“æ¡ä»¶æ»¡è¶³æ—¶</td>
<td><code>flux.bufferWhile(i -&gt; i &lt; 10)</code></td>
</tr>
<tr>
<td><code>bufferTimeout(int, Duration)</code></td>
<td>æ•°é‡æˆ–æ—¶é—´è§¦å‘</td>
<td><code>flux.bufferTimeout(100, Duration.ofSeconds(1))</code></td>
</tr>
</tbody></table>
<h3 id="çª—å£ï¼ˆæ”¶é›†ä¸º-Fluxï¼‰"><a href="#çª—å£ï¼ˆæ”¶é›†ä¸º-Fluxï¼‰" class="headerlink" title="çª—å£ï¼ˆæ”¶é›†ä¸º Fluxï¼‰"></a>çª—å£ï¼ˆæ”¶é›†ä¸º Fluxï¼‰</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>window(int)</code></td>
<td>æŒ‰æ•°é‡åˆ†çª—å£</td>
<td><code>flux.window(10)</code> â†’ <code>Flux&lt;Flux&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>window(Duration)</code></td>
<td>æŒ‰æ—¶é—´åˆ†çª—å£</td>
<td><code>flux.window(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>windowUntil(Predicate)</code></td>
<td>åˆ†çª—å£ç›´åˆ°æ¡ä»¶æ»¡è¶³</td>
<td><code>flux.windowUntil(i -&gt; i % 10 == 0)</code></td>
</tr>
</tbody></table>
<h3 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h3><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>groupBy(Function)</code></td>
<td>æŒ‰ key åˆ†ç»„</td>
<td><code>flux.groupBy(User::getType)</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// groupBy ç¤ºä¾‹</span></span><br><span class="line">flux.groupBy(user -&gt; user.getType())</span><br><span class="line">    .flatMap(group -&gt; group</span><br><span class="line">        .collectList()</span><br><span class="line">        .map(list -&gt; group.key() + <span class="string">&quot;: &quot;</span> + list.size())</span><br><span class="line">    )</span><br><span class="line">    .subscribe(System.out::println);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ä¹ã€èšåˆæ“ä½œç¬¦"><a href="#ä¹ã€èšåˆæ“ä½œç¬¦" class="headerlink" title="ä¹ã€èšåˆæ“ä½œç¬¦"></a>ä¹ã€èšåˆæ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>è¿”å›ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>count()</code></td>
<td>è®¡æ•°</td>
<td><code>Mono&lt;Long&gt;</code></td>
</tr>
<tr>
<td><code>reduce(BiFunction)</code></td>
<td>å½’çº¦</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>reduce(T, BiFunction)</code></td>
<td>å¸¦åˆå§‹å€¼å½’çº¦</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>reduceWith(Supplier, BiFunction)</code></td>
<td>å»¶è¿Ÿåˆå§‹å€¼å½’çº¦</td>
<td><code>Mono&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>scan(BiFunction)</code></td>
<td>ç´¯ç§¯ï¼ˆå‘å‡ºä¸­é—´ç»“æœï¼‰</td>
<td><code>Flux&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>scan(T, BiFunction)</code></td>
<td>å¸¦åˆå§‹å€¼ç´¯ç§¯</td>
<td><code>Flux&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>collect(Collector)</code></td>
<td>æ”¶é›†åˆ°é›†åˆ</td>
<td><code>Mono&lt;R&gt;</code></td>
</tr>
<tr>
<td><code>collectList()</code></td>
<td>æ”¶é›†ä¸º List</td>
<td><code>Mono&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMap(Function)</code></td>
<td>æ”¶é›†ä¸º Map</td>
<td><code>Mono&lt;Map&lt;K, T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMap(Function, Function)</code></td>
<td>æ”¶é›†ä¸º Mapï¼ˆæŒ‡å®š valueï¼‰</td>
<td><code>Mono&lt;Map&lt;K, V&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectMultimap(Function)</code></td>
<td>æ”¶é›†ä¸º Multimap</td>
<td><code>Mono&lt;Map&lt;K, Collection&lt;T&gt;&gt;&gt;</code></td>
</tr>
<tr>
<td><code>collectSortedList()</code></td>
<td>æ”¶é›†ä¸ºæ’åº List</td>
<td><code>Mono&lt;List&lt;T&gt;&gt;</code></td>
</tr>
<tr>
<td><code>all(Predicate)</code></td>
<td>æ˜¯å¦å…¨éƒ¨æ»¡è¶³</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>any(Predicate)</code></td>
<td>æ˜¯å¦æœ‰æ»¡è¶³çš„</td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>hasElements()</code></td>
<td>æ˜¯å¦æœ‰å…ƒç´ </td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
<tr>
<td><code>hasElement(T)</code></td>
<td>æ˜¯å¦åŒ…å«å…ƒç´ </td>
<td><code>Mono&lt;Boolean&gt;</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reduce ç¤ºä¾‹</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .reduce((a, b) -&gt; a + b)</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// scan ç¤ºä¾‹ï¼ˆå‘å‡ºä¸­é—´ç»“æœï¼‰</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .scan((a, b) -&gt; a + b)</span><br><span class="line">    .subscribe(System.out::println);  <span class="comment">// 1, 3, 6, 10, 15</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åã€æ—¶é—´æ“ä½œç¬¦"><a href="#åã€æ—¶é—´æ“ä½œç¬¦" class="headerlink" title="åã€æ—¶é—´æ“ä½œç¬¦"></a>åã€æ—¶é—´æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>delayElements(Duration)</code></td>
<td>å»¶è¿Ÿæ¯ä¸ªå…ƒç´ </td>
<td><code>flux.delayElements(Duration.ofMillis(100))</code></td>
</tr>
<tr>
<td><code>delaySequence(Duration)</code></td>
<td>å»¶è¿Ÿæ•´ä¸ªåºåˆ—</td>
<td><code>flux.delaySequence(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>delaySubscription(Duration)</code></td>
<td>å»¶è¿Ÿè®¢é˜…</td>
<td><code>flux.delaySubscription(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>timeout(Duration)</code></td>
<td>è¶…æ—¶</td>
<td><code>flux.timeout(Duration.ofSeconds(5))</code></td>
</tr>
<tr>
<td><code>timeout(Duration, Publisher)</code></td>
<td>è¶…æ—¶ååˆ‡æ¢</td>
<td><code>flux.timeout(Duration.ofSeconds(5), backupFlux)</code></td>
</tr>
<tr>
<td><code>sample(Duration)</code></td>
<td>é‡‡æ ·</td>
<td><code>flux.sample(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>sampleFirst(Duration)</code></td>
<td>é‡‡æ ·ç¬¬ä¸€ä¸ª</td>
<td><code>flux.sampleFirst(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>throttleFirst(Duration)</code></td>
<td>èŠ‚æµï¼ˆå–ç¬¬ä¸€ä¸ªï¼‰</td>
<td><code>flux.throttleFirst(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>throttleLast(Duration)</code></td>
<td>èŠ‚æµï¼ˆå–æœ€åä¸€ä¸ªï¼‰</td>
<td><code>flux.throttleLast(Duration.ofSeconds(1))</code></td>
</tr>
<tr>
<td><code>elapsed()</code></td>
<td>æ·»åŠ æ—¶é—´é—´éš”</td>
<td><code>flux.elapsed()</code></td>
</tr>
<tr>
<td><code>timed()</code></td>
<td>æ·»åŠ æ—¶é—´ä¿¡æ¯</td>
<td><code>flux.timed()</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="åä¸€ã€èƒŒå‹æ“ä½œç¬¦"><a href="#åä¸€ã€èƒŒå‹æ“ä½œç¬¦" class="headerlink" title="åä¸€ã€èƒŒå‹æ“ä½œç¬¦"></a>åä¸€ã€èƒŒå‹æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>onBackpressureBuffer()</code></td>
<td>æ— é™ç¼“å†²</td>
<td><code>flux.onBackpressureBuffer()</code></td>
</tr>
<tr>
<td><code>onBackpressureBuffer(int)</code></td>
<td>æœ‰é™ç¼“å†²</td>
<td><code>flux.onBackpressureBuffer(100)</code></td>
</tr>
<tr>
<td><code>onBackpressureBuffer(int, Consumer)</code></td>
<td>ç¼“å†²æ»¡æ—¶å›è°ƒ</td>
<td><code>flux.onBackpressureBuffer(100, v -&gt; log.warn(&quot;æº¢å‡º&quot;))</code></td>
</tr>
<tr>
<td><code>onBackpressureDrop()</code></td>
<td>ä¸¢å¼ƒ</td>
<td><code>flux.onBackpressureDrop()</code></td>
</tr>
<tr>
<td><code>onBackpressureDrop(Consumer)</code></td>
<td>ä¸¢å¼ƒå¹¶å›è°ƒ</td>
<td><code>flux.onBackpressureDrop(v -&gt; log.warn(&quot;ä¸¢å¼ƒ: &quot; + v))</code></td>
</tr>
<tr>
<td><code>onBackpressureLatest()</code></td>
<td>åªä¿ç•™æœ€æ–°</td>
<td><code>flux.onBackpressureLatest()</code></td>
</tr>
<tr>
<td><code>onBackpressureError()</code></td>
<td>æŠ›å‡ºå¼‚å¸¸</td>
<td><code>flux.onBackpressureError()</code></td>
</tr>
<tr>
<td><code>limitRate(int)</code></td>
<td>é™åˆ¶è¯·æ±‚é€Ÿç‡</td>
<td><code>flux.limitRate(100)</code></td>
</tr>
<tr>
<td><code>limitRequest(long)</code></td>
<td>é™åˆ¶æ€»è¯·æ±‚æ•°</td>
<td><code>flux.limitRequest(1000)</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="åäºŒã€æ¡ä»¶æ“ä½œç¬¦"><a href="#åäºŒã€æ¡ä»¶æ“ä½œç¬¦" class="headerlink" title="åäºŒã€æ¡ä»¶æ“ä½œç¬¦"></a>åäºŒã€æ¡ä»¶æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>defaultIfEmpty(T)</code></td>
<td>ç©ºæ—¶è¿”å›é»˜è®¤å€¼</td>
<td><code>flux.defaultIfEmpty(defaultValue)</code></td>
</tr>
<tr>
<td><code>switchIfEmpty(Publisher)</code></td>
<td>ç©ºæ—¶åˆ‡æ¢åˆ°å¦ä¸€ä¸ªæµ</td>
<td><code>flux.switchIfEmpty(backupFlux)</code></td>
</tr>
<tr>
<td><code>repeatWhen(Function)</code></td>
<td>æ¡ä»¶é‡å¤</td>
<td><code>flux.repeatWhen(companion -&gt; companion.take(3))</code></td>
</tr>
<tr>
<td><code>repeat()</code></td>
<td>æ— é™é‡å¤</td>
<td><code>flux.repeat()</code></td>
</tr>
<tr>
<td><code>repeat(long)</code></td>
<td>é‡å¤ n æ¬¡</td>
<td><code>flux.repeat(3)</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="åä¸‰ã€è°ƒè¯•æ“ä½œç¬¦"><a href="#åä¸‰ã€è°ƒè¯•æ“ä½œç¬¦" class="headerlink" title="åä¸‰ã€è°ƒè¯•æ“ä½œç¬¦"></a>åä¸‰ã€è°ƒè¯•æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>log()</code></td>
<td>æ‰“å°æ‰€æœ‰ä¿¡å·</td>
<td><code>flux.log()</code></td>
</tr>
<tr>
<td><code>log(String)</code></td>
<td>å¸¦å‰ç¼€æ‰“å°</td>
<td><code>flux.log(&quot;MyFlux&quot;)</code></td>
</tr>
<tr>
<td><code>log(String, Level)</code></td>
<td>æŒ‡å®šæ—¥å¿—çº§åˆ«</td>
<td><code>flux.log(&quot;MyFlux&quot;, Level.FINE)</code></td>
</tr>
<tr>
<td><code>checkpoint()</code></td>
<td>æ·»åŠ æ£€æŸ¥ç‚¹ï¼ˆè°ƒè¯•ç”¨ï¼‰</td>
<td><code>flux.checkpoint(&quot;after filter&quot;)</code></td>
</tr>
<tr>
<td><code>checkpoint(String)</code></td>
<td>å¸¦æè¿°çš„æ£€æŸ¥ç‚¹</td>
<td><code>flux.checkpoint(&quot;å¤„ç†å&quot;)</code></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒè¯•ç¤ºä¾‹</span></span><br><span class="line">Flux.range(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    .log(<span class="string">&quot;æºæ•°æ®&quot;</span>)</span><br><span class="line">    .filter(i -&gt; i &gt; <span class="number">2</span>)</span><br><span class="line">    .log(<span class="string">&quot;è¿‡æ»¤å&quot;</span>)</span><br><span class="line">    .map(i -&gt; i * <span class="number">2</span>)</span><br><span class="line">    .log(<span class="string">&quot;è½¬æ¢å&quot;</span>)</span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åå››ã€ä¸Šä¸‹æ–‡æ“ä½œç¬¦"><a href="#åå››ã€ä¸Šä¸‹æ–‡æ“ä½œç¬¦" class="headerlink" title="åå››ã€ä¸Šä¸‹æ–‡æ“ä½œç¬¦"></a>åå››ã€ä¸Šä¸‹æ–‡æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>contextWrite(Context)</code></td>
<td>å†™å…¥ä¸Šä¸‹æ–‡</td>
<td><code>flux.contextWrite(Context.of(&quot;key&quot;, &quot;value&quot;))</code></td>
</tr>
<tr>
<td><code>contextWrite(Function)</code></td>
<td>ä¿®æ”¹ä¸Šä¸‹æ–‡</td>
<td><code>flux.contextWrite(ctx -&gt; ctx.put(&quot;key&quot;, &quot;value&quot;))</code></td>
</tr>
<tr>
<td><code>deferContextual(Function)</code></td>
<td>è¯»å–ä¸Šä¸‹æ–‡åˆ›å»ºæµ</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
<tr>
<td><code>transformDeferredContextual(BiFunction)</code></td>
<td>è½¬æ¢æ—¶è¯»å–ä¸Šä¸‹æ–‡</td>
<td>è§ä¸‹æ–¹ç¤ºä¾‹</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Context ç¤ºä¾‹ - ä¼ é€’è¯·æ±‚ ID</span></span><br><span class="line">Mono.deferContextual(ctx -&gt; &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">requestId</span> <span class="operator">=</span> ctx.get(<span class="string">&quot;requestId&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> callService(requestId);</span><br><span class="line">&#125;)</span><br><span class="line">.contextWrite(Context.of(<span class="string">&quot;requestId&quot;</span>, UUID.randomUUID().toString()))</span><br><span class="line">.subscribe();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="åäº”ã€Mono-ç‰¹æœ‰æ“ä½œç¬¦"><a href="#åäº”ã€Mono-ç‰¹æœ‰æ“ä½œç¬¦" class="headerlink" title="åäº”ã€Mono ç‰¹æœ‰æ“ä½œç¬¦"></a>åäº”ã€Mono ç‰¹æœ‰æ“ä½œç¬¦</h2><table>
<thead>
<tr>
<th>API</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>block()</code></td>
<td>é˜»å¡è·å–ç»“æœ</td>
<td><code>mono.block()</code></td>
</tr>
<tr>
<td><code>block(Duration)</code></td>
<td>å¸¦è¶…æ—¶é˜»å¡</td>
<td><code>mono.block(Duration.ofSeconds(5))</code></td>
</tr>
<tr>
<td><code>toFuture()</code></td>
<td>è½¬ä¸º CompletableFuture</td>
<td><code>mono.toFuture()</code></td>
</tr>
<tr>
<td><code>cache()</code></td>
<td>ç¼“å­˜ç»“æœ</td>
<td><code>mono.cache()</code></td>
</tr>
<tr>
<td><code>cache(Duration)</code></td>
<td>å¸¦è¿‡æœŸæ—¶é—´ç¼“å­˜</td>
<td><code>mono.cache(Duration.ofMinutes(5))</code></td>
</tr>
<tr>
<td><code>flux()</code></td>
<td>è½¬ä¸º Flux</td>
<td><code>mono.flux()</code></td>
</tr>
<tr>
<td><code>zipWhen(Function)</code></td>
<td>ä¸ä¾èµ–ç»“æœç»„åˆ</td>
<td><code>mono.zipWhen(v -&gt; fetchRelated(v))</code></td>
</tr>
<tr>
<td><code>delayUntil(Function)</code></td>
<td>å»¶è¿Ÿç›´åˆ°å¦ä¸€ä¸ªå®Œæˆ</td>
<td><code>mono.delayUntil(v -&gt; saveAsync(v))</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="åå…­ã€Sinksï¼ˆæ‰‹åŠ¨å‘é€æ•°æ®ï¼‰"><a href="#åå…­ã€Sinksï¼ˆæ‰‹åŠ¨å‘é€æ•°æ®ï¼‰" class="headerlink" title="åå…­ã€Sinksï¼ˆæ‰‹åŠ¨å‘é€æ•°æ®ï¼‰"></a>åå…­ã€Sinksï¼ˆæ‰‹åŠ¨å‘é€æ•°æ®ï¼‰</h2><h3 id="Sinks-Manyï¼ˆå¤šå€¼ï¼‰"><a href="#Sinks-Manyï¼ˆå¤šå€¼ï¼‰" class="headerlink" title="Sinks.Manyï¼ˆå¤šå€¼ï¼‰"></a>Sinks.Manyï¼ˆå¤šå€¼ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•æ’­ - åªèƒ½æœ‰ä¸€ä¸ªè®¢é˜…è€…</span></span><br><span class="line">Sinks.Many&lt;String&gt; unicast = Sinks.many().unicast().onBackpressureBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šæ’­ - å¤šä¸ªè®¢é˜…è€…</span></span><br><span class="line">Sinks.Many&lt;String&gt; multicast = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡æ”¾ - æ–°è®¢é˜…è€…å¯æ”¶åˆ°å†å²æ•°æ®</span></span><br><span class="line">Sinks.Many&lt;String&gt; replay = Sinks.many().replay().all();</span><br><span class="line">Sinks.Many&lt;String&gt; replayLimit = Sinks.many().replay().limit(<span class="number">10</span>);</span><br><span class="line">Sinks.Many&lt;String&gt; replayLatest = Sinks.many().replay().latest();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€æ•°æ®</span></span><br><span class="line">sink.tryEmitNext(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">sink.emitNext(<span class="string">&quot;data&quot;</span>, Sinks.EmitFailureHandler.FAIL_FAST);</span><br><span class="line">sink.tryEmitComplete();</span><br><span class="line">sink.tryEmitError(<span class="keyword">new</span> <span class="title class_">Exception</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½œä¸º Flux ä½¿ç”¨</span></span><br><span class="line">Flux&lt;String&gt; flux = sink.asFlux();</span><br></pre></td></tr></table></figure>

<h3 id="Sinks-Oneï¼ˆå•å€¼ï¼‰"><a href="#Sinks-Oneï¼ˆå•å€¼ï¼‰" class="headerlink" title="Sinks.Oneï¼ˆå•å€¼ï¼‰"></a>Sinks.Oneï¼ˆå•å€¼ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sinks.One&lt;String&gt; one = Sinks.one();</span><br><span class="line">one.tryEmitValue(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">Mono&lt;String&gt; mono = one.asMono();</span><br></pre></td></tr></table></figure>

<h3 id="Sinks-Emptyï¼ˆæ— å€¼ï¼‰"><a href="#Sinks-Emptyï¼ˆæ— å€¼ï¼‰" class="headerlink" title="Sinks.Emptyï¼ˆæ— å€¼ï¼‰"></a>Sinks.Emptyï¼ˆæ— å€¼ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sinks.Empty&lt;Void&gt; empty = Sinks.empty();</span><br><span class="line">empty.tryEmitEmpty();</span><br><span class="line">Mono&lt;Void&gt; mono = empty.asMono();</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li>Project Reactor å®ç°</li>
<li>æºç è§£æ</li>
<li>WebFlux - Reactoræ ¸å¿ƒAPI</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/Reactor%E6%A0%B8%E5%BF%83API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/Reactor%E6%A0%B8%E5%BF%83API/" class="post-title-link" itemprop="url">Reactoræ ¸å¿ƒAPI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/Spring/Webflux/" itemprop="url" rel="index"><span itemprop="name">Webflux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Reactor-æ ¸å¿ƒ-API"><a href="#Reactor-æ ¸å¿ƒ-API" class="headerlink" title="Reactor æ ¸å¿ƒ API"></a>Reactor æ ¸å¿ƒ API</h1><h2 id="ä»€ä¹ˆæ˜¯-Project-Reactor"><a href="#ä»€ä¹ˆæ˜¯-Project-Reactor" class="headerlink" title="ä»€ä¹ˆæ˜¯ Project Reactor"></a>ä»€ä¹ˆæ˜¯ Project Reactor</h2><p>Project Reactor æ˜¯ Spring WebFlux é»˜è®¤ä½¿ç”¨çš„å“åº”å¼åº“ï¼Œå®ƒå®ç°äº† Reactive Streams è§„èŒƒï¼Œæä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒç±»å‹ï¼š<strong>Mono</strong> å’Œ <strong>Flux</strong>ã€‚</p>
<h2 id="Mono-å•å€¼å®¹å™¨"><a href="#Mono-å•å€¼å®¹å™¨" class="headerlink" title="Mono - å•å€¼å®¹å™¨"></a>Mono - å•å€¼å®¹å™¨</h2><p><code>Mono&lt;T&gt;</code> è¡¨ç¤º<strong>0ä¸ªæˆ–1ä¸ª</strong>å…ƒç´ çš„å¼‚æ­¥åºåˆ—ã€‚</p>
<h3 id="åˆ›å»º-Mono"><a href="#åˆ›å»º-Mono" class="headerlink" title="åˆ›å»º Mono"></a>åˆ›å»º Mono</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºåŒ…å«å€¼çš„ Mono</span></span><br><span class="line">Mono&lt;String&gt; mono1 = Mono.just(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç©ºçš„ Mono</span></span><br><span class="line">Mono&lt;String&gt; mono2 = Mono.empty();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºé”™è¯¯çš„ Mono</span></span><br><span class="line">Mono&lt;String&gt; mono3 = Mono.error(<span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Error&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»¶è¿Ÿåˆ›å»º</span></span><br><span class="line">Mono&lt;String&gt; mono4 = Mono.fromSupplier(() -&gt; <span class="string">&quot;Lazy Value&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä» Callable åˆ›å»º</span></span><br><span class="line">Mono&lt;String&gt; mono5 = Mono.fromCallable(() -&gt; blockingCall());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä» Future åˆ›å»º</span></span><br><span class="line">Mono&lt;String&gt; mono6 = Mono.fromFuture(completableFuture);</span><br></pre></td></tr></table></figure>

<h3 id="Mono-å¸¸ç”¨æ“ä½œ"><a href="#Mono-å¸¸ç”¨æ“ä½œ" class="headerlink" title="Mono å¸¸ç”¨æ“ä½œ"></a>Mono å¸¸ç”¨æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Mono.just(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">    .map(s -&gt; s + <span class="string">&quot; World&quot;</span>)           <span class="comment">// è½¬æ¢</span></span><br><span class="line">    .flatMap(s -&gt; anotherMono(s))     <span class="comment">// å¼‚æ­¥è½¬æ¢</span></span><br><span class="line">    .filter(s -&gt; s.length() &gt; <span class="number">5</span>)      <span class="comment">// è¿‡æ»¤</span></span><br><span class="line">    .defaultIfEmpty(<span class="string">&quot;Default&quot;</span>)         <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">    .switchIfEmpty(anotherMono)        <span class="comment">// ç©ºæ—¶åˆ‡æ¢</span></span><br><span class="line">    .doOnNext(s -&gt; log.info(s))        <span class="comment">// å‰¯ä½œç”¨</span></span><br><span class="line">    .doOnError(e -&gt; log.error(e))      <span class="comment">// é”™è¯¯å¤„ç†</span></span><br><span class="line">    .subscribe();                       <span class="comment">// è®¢é˜…è§¦å‘æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<h2 id="Flux-å¤šå€¼å®¹å™¨"><a href="#Flux-å¤šå€¼å®¹å™¨" class="headerlink" title="Flux - å¤šå€¼å®¹å™¨"></a>Flux - å¤šå€¼å®¹å™¨</h2><p><code>Flux&lt;T&gt;</code> è¡¨ç¤º<strong>0åˆ°Nä¸ª</strong>å…ƒç´ çš„å¼‚æ­¥åºåˆ—ã€‚</p>
<h3 id="åˆ›å»º-Flux"><a href="#åˆ›å»º-Flux" class="headerlink" title="åˆ›å»º Flux"></a>åˆ›å»º Flux</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å¤šä¸ªå€¼åˆ›å»º</span></span><br><span class="line">Flux&lt;String&gt; flux1 = Flux.just(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»æ•°ç»„åˆ›å»º</span></span><br><span class="line">Flux&lt;String&gt; flux2 = Flux.fromArray(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»é›†åˆåˆ›å»º</span></span><br><span class="line">Flux&lt;String&gt; flux3 = Flux.fromIterable(Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºèŒƒå›´</span></span><br><span class="line">Flux&lt;Integer&gt; flux4 = Flux.range(<span class="number">1</span>, <span class="number">10</span>);  <span class="comment">// 1åˆ°10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç©º Flux</span></span><br><span class="line">Flux&lt;String&gt; flux5 = Flux.empty();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šæ—¶å‘å°„</span></span><br><span class="line">Flux&lt;Long&gt; flux6 = Flux.interval(Duration.ofSeconds(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä» Stream åˆ›å»º</span></span><br><span class="line">Flux&lt;String&gt; flux7 = Flux.fromStream(Stream.of(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="Flux-å¸¸ç”¨æ“ä½œ"><a href="#Flux-å¸¸ç”¨æ“ä½œ" class="headerlink" title="Flux å¸¸ç”¨æ“ä½œ"></a>Flux å¸¸ç”¨æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Flux.range(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">    .map(i -&gt; i * <span class="number">2</span>)                   <span class="comment">// è½¬æ¢æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">    .filter(i -&gt; i &gt; <span class="number">5</span>)                <span class="comment">// è¿‡æ»¤</span></span><br><span class="line">    .take(<span class="number">5</span>)                           <span class="comment">// åªå–å‰5ä¸ª</span></span><br><span class="line">    .skip(<span class="number">2</span>)                           <span class="comment">// è·³è¿‡å‰2ä¸ª</span></span><br><span class="line">    .distinct()                        <span class="comment">// å»é‡</span></span><br><span class="line">    .sort()                            <span class="comment">// æ’åº</span></span><br><span class="line">    .collectList()                     <span class="comment">// æ”¶é›†ä¸º Mono&lt;List&gt;</span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<h2 id="æ ¸å¿ƒæ“ä½œç¬¦åˆ†ç±»"><a href="#æ ¸å¿ƒæ“ä½œç¬¦åˆ†ç±»" class="headerlink" title="æ ¸å¿ƒæ“ä½œç¬¦åˆ†ç±»"></a>æ ¸å¿ƒæ“ä½œç¬¦åˆ†ç±»</h2><h3 id="è½¬æ¢æ“ä½œç¬¦"><a href="#è½¬æ¢æ“ä½œç¬¦" class="headerlink" title="è½¬æ¢æ“ä½œç¬¦"></a>è½¬æ¢æ“ä½œç¬¦</h3><table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>map</code></td>
<td>åŒæ­¥è½¬æ¢</td>
<td><code>flux.map(i -&gt; i * 2)</code></td>
</tr>
<tr>
<td><code>flatMap</code></td>
<td>å¼‚æ­¥è½¬æ¢ï¼ˆä¸ä¿åºï¼‰</td>
<td><code>flux.flatMap(i -&gt; getMono(i))</code></td>
</tr>
<tr>
<td><code>flatMapSequential</code></td>
<td>å¼‚æ­¥è½¬æ¢ï¼ˆä¿åºï¼‰</td>
<td><code>flux.flatMapSequential(...)</code></td>
</tr>
<tr>
<td><code>concatMap</code></td>
<td>é¡ºåºå¼‚æ­¥è½¬æ¢</td>
<td><code>flux.concatMap(...)</code></td>
</tr>
<tr>
<td><code>switchMap</code></td>
<td>åˆ‡æ¢åˆ°æ–°æµ</td>
<td><code>flux.switchMap(...)</code></td>
</tr>
</tbody></table>
<h3 id="è¿‡æ»¤æ“ä½œç¬¦"><a href="#è¿‡æ»¤æ“ä½œç¬¦" class="headerlink" title="è¿‡æ»¤æ“ä½œç¬¦"></a>è¿‡æ»¤æ“ä½œç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Flux.range(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">    .filter(i -&gt; i % <span class="number">2</span> == <span class="number">0</span>)      <span class="comment">// è¿‡æ»¤å¶æ•°</span></span><br><span class="line">    .take(<span class="number">10</span>)                      <span class="comment">// å–å‰10ä¸ª</span></span><br><span class="line">    .takeLast(<span class="number">5</span>)                   <span class="comment">// å–å5ä¸ª</span></span><br><span class="line">    .takeWhile(i -&gt; i &lt; <span class="number">50</span>)        <span class="comment">// æ»¡è¶³æ¡ä»¶æ—¶å–</span></span><br><span class="line">    .skip(<span class="number">5</span>)                       <span class="comment">// è·³è¿‡å‰5ä¸ª</span></span><br><span class="line">    .skipWhile(i -&gt; i &lt; <span class="number">10</span>)        <span class="comment">// æ»¡è¶³æ¡ä»¶æ—¶è·³è¿‡</span></span><br><span class="line">    .distinct()                    <span class="comment">// å»é‡</span></span><br><span class="line">    .distinctUntilChanged()        <span class="comment">// ç›¸é‚»å»é‡</span></span><br><span class="line">    .elementAt(<span class="number">5</span>)                  <span class="comment">// å–ç¬¬5ä¸ªå…ƒç´ </span></span><br><span class="line">    .single()                      <span class="comment">// ç¡®ä¿åªæœ‰ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<h3 id="ç»„åˆæ“ä½œç¬¦"><a href="#ç»„åˆæ“ä½œç¬¦" class="headerlink" title="ç»„åˆæ“ä½œç¬¦"></a>ç»„åˆæ“ä½œç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå¹¶å¤šä¸ª Fluxï¼ˆäº¤é”™ï¼‰</span></span><br><span class="line">Flux.merge(flux1, flux2, flux3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥å¤šä¸ª Fluxï¼ˆé¡ºåºï¼‰</span></span><br><span class="line">Flux.concat(flux1, flux2, flux3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…å¯¹ç»„åˆ</span></span><br><span class="line">Flux.zip(flux1, flux2, (a, b) -&gt; a + b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶æœ€æ–°å€¼</span></span><br><span class="line">Flux.combineLatest(flux1, flux2, (a, b) -&gt; a + b);</span><br></pre></td></tr></table></figure>

<h3 id="é”™è¯¯å¤„ç†æ“ä½œç¬¦"><a href="#é”™è¯¯å¤„ç†æ“ä½œç¬¦" class="headerlink" title="é”™è¯¯å¤„ç†æ“ä½œç¬¦"></a>é”™è¯¯å¤„ç†æ“ä½œç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .map(i -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">2</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;)</span><br><span class="line">    .onErrorReturn(-<span class="number">1</span>)                    <span class="comment">// é”™è¯¯æ—¶è¿”å›é»˜è®¤å€¼</span></span><br><span class="line">    .onErrorResume(e -&gt; Flux.just(<span class="number">0</span>))     <span class="comment">// é”™è¯¯æ—¶åˆ‡æ¢åˆ°å¤‡ç”¨æµ</span></span><br><span class="line">    .onErrorMap(e -&gt; <span class="keyword">new</span> <span class="title class_">CustomException</span>()) <span class="comment">// è½¬æ¢å¼‚å¸¸</span></span><br><span class="line">    .retry(<span class="number">3</span>)                              <span class="comment">// é‡è¯•3æ¬¡</span></span><br><span class="line">    .retryWhen(Retry.backoff(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>))) <span class="comment">// é€€é¿é‡è¯•</span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰"><a href="#è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰" class="headerlink" title="è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰"></a>è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰</h2><p>è°ƒåº¦å™¨ç”¨äºæ§åˆ¶æ“ä½œåœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</p>
<h3 id="å¸¸ç”¨è°ƒåº¦å™¨"><a href="#å¸¸ç”¨è°ƒåº¦å™¨" class="headerlink" title="å¸¸ç”¨è°ƒåº¦å™¨"></a>å¸¸ç”¨è°ƒåº¦å™¨</h3><table>
<thead>
<tr>
<th>è°ƒåº¦å™¨</th>
<th>è¯´æ˜</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><code>Schedulers.immediate()</code></td>
<td>å½“å‰çº¿ç¨‹</td>
<td>é»˜è®¤</td>
</tr>
<tr>
<td><code>Schedulers.single()</code></td>
<td>å•ä¸€çº¿ç¨‹</td>
<td>é¡ºåºæ‰§è¡Œ</td>
</tr>
<tr>
<td><code>Schedulers.parallel()</code></td>
<td>å¹¶è¡Œçº¿ç¨‹æ± </td>
<td>CPU å¯†é›†å‹</td>
</tr>
<tr>
<td><code>Schedulers.boundedElastic()</code></td>
<td>å¼¹æ€§çº¿ç¨‹æ± </td>
<td>I&#x2F;O å¯†é›†å‹</td>
</tr>
</tbody></table>
<h3 id="åˆ‡æ¢çº¿ç¨‹"><a href="#åˆ‡æ¢çº¿ç¨‹" class="headerlink" title="åˆ‡æ¢çº¿ç¨‹"></a>åˆ‡æ¢çº¿ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flux.range(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">    .publishOn(Schedulers.parallel())    <span class="comment">// åç»­æ“ä½œåœ¨ parallel çº¿ç¨‹</span></span><br><span class="line">    .map(i -&gt; i * <span class="number">2</span>)</span><br><span class="line">    .subscribeOn(Schedulers.boundedElastic()) <span class="comment">// è®¢é˜…åœ¨ elastic çº¿ç¨‹</span></span><br><span class="line">    .subscribe();</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>subscribeOn</code></strong>ï¼šå½±å“è®¢é˜…å’Œæ•°æ®æºçš„æ‰§è¡Œçº¿ç¨‹</li>
<li><strong><code>publishOn</code></strong>ï¼šå½±å“åç»­æ“ä½œç¬¦çš„æ‰§è¡Œçº¿ç¨‹</li>
</ul>
<h2 id="å†·æµä¸çƒ­æµ"><a href="#å†·æµä¸çƒ­æµ" class="headerlink" title="å†·æµä¸çƒ­æµ"></a>å†·æµä¸çƒ­æµ</h2><h3 id="å†·æµï¼ˆColdï¼‰"><a href="#å†·æµï¼ˆColdï¼‰" class="headerlink" title="å†·æµï¼ˆColdï¼‰"></a>å†·æµï¼ˆColdï¼‰</h3><ul>
<li>æ¯ä¸ªè®¢é˜…è€…éƒ½ä¼šä»å¤´å¼€å§‹æ¥æ”¶æ•°æ®</li>
<li>æ•°æ®æ˜¯æƒ°æ€§ç”Ÿæˆçš„</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;Integer&gt; cold = Flux.range(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">cold.subscribe(i -&gt; System.out.println(<span class="string">&quot;Subscriber 1: &quot;</span> + i));</span><br><span class="line">cold.subscribe(i -&gt; System.out.println(<span class="string">&quot;Subscriber 2: &quot;</span> + i));</span><br><span class="line"><span class="comment">// ä¸¤ä¸ªè®¢é˜…è€…éƒ½ä¼šæ”¶åˆ° 1, 2, 3, 4, 5</span></span><br></pre></td></tr></table></figure>

<h3 id="çƒ­æµï¼ˆHotï¼‰"><a href="#çƒ­æµï¼ˆHotï¼‰" class="headerlink" title="çƒ­æµï¼ˆHotï¼‰"></a>çƒ­æµï¼ˆHotï¼‰</h3><ul>
<li>æ‰€æœ‰è®¢é˜…è€…å…±äº«åŒä¸€ä¸ªæ•°æ®æµ</li>
<li>è®¢é˜…ååªèƒ½æ”¶åˆ°ä¹‹åå‘å‡ºçš„æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Sinks.Many&lt;Integer&gt; sink = Sinks.many().multicast().onBackpressureBuffer();</span><br><span class="line">Flux&lt;Integer&gt; hot = sink.asFlux();</span><br><span class="line"></span><br><span class="line">hot.subscribe(i -&gt; System.out.println(<span class="string">&quot;Subscriber 1: &quot;</span> + i));</span><br><span class="line">sink.tryEmitNext(<span class="number">1</span>);</span><br><span class="line">sink.tryEmitNext(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">hot.subscribe(i -&gt; System.out.println(<span class="string">&quot;Subscriber 2: &quot;</span> + i));</span><br><span class="line">sink.tryEmitNext(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// Subscriber 1 æ”¶åˆ°: 1, 2, 3</span></span><br><span class="line"><span class="comment">// Subscriber 2 æ”¶åˆ°: 3</span></span><br></pre></td></tr></table></figure>

<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul>
<li>ä¸Šä¸€ç¯‡ï¼šå“åº”å¼ç¼–ç¨‹åŸºç¡€</li>
<li>ä¸‹ä¸€ç¯‡ï¼šWebFluxæ ¸å¿ƒç»„ä»¶</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zmmmmy.github.io/2026/01/10/ThreadLocal%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZhiMy">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmmmmy's Blog">
      <meta itemprop="description" content="è®°å½•å­¦ä¹ ä¸æˆé•¿">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | Zmmmmy's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2026/01/10/ThreadLocal%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">ThreadLocalåŸç†</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2026-01-10T00:00:00+08:00">2026-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2026-01-22 15:44:14" itemprop="dateModified" datetime="2026-01-22T15:44:14+08:00">2026-01-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">å¹¶å‘ç¼–ç¨‹</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">åŸºç¡€çŸ¥è¯†</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ThreadLocal-åŸç†"><a href="#ThreadLocal-åŸç†" class="headerlink" title="ThreadLocal åŸç†"></a>ThreadLocal åŸç†</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><code>ThreadLocal</code> æä¾›<strong>çº¿ç¨‹æœ¬åœ°å˜é‡</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œå®ç°çº¿ç¨‹é—´æ•°æ®éš”ç¦»ã€‚</p>
<h2 id="æ ¸å¿ƒæ•°æ®ç»“æ„"><a href="#æ ¸å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="æ ¸å¿ƒæ•°æ®ç»“æ„"></a>æ ¸å¿ƒæ•°æ®ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Thread</span><br><span class="line">  â””â”€â”€ ThreadLocalMap threadLocals</span><br><span class="line">        â””â”€â”€ Entry[] table</span><br><span class="line">              â””â”€â”€ Entry(ThreadLocal&lt;?&gt; key, Object value)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>Thread.threadLocals</code></td>
<td>æ¯ä¸ªçº¿ç¨‹æŒæœ‰çš„ ThreadLocalMap å®ä¾‹</td>
</tr>
<tr>
<td><code>ThreadLocalMap</code></td>
<td>è‡ªå®šä¹‰å“ˆå¸Œè¡¨ï¼Œå­˜å‚¨çº¿ç¨‹æœ¬åœ°å˜é‡</td>
</tr>
<tr>
<td><code>Entry</code></td>
<td>ç»§æ‰¿ <code>WeakReference&lt;ThreadLocal&lt;?&gt;&gt;</code> çš„é”®å€¼å¯¹</td>
</tr>
</tbody></table>
<h2 id="å·¥ä½œåŸç†"><a href="#å·¥ä½œåŸç†" class="headerlink" title="å·¥ä½œåŸç†"></a>å·¥ä½œåŸç†</h2><h3 id="1-set-æ–¹æ³•"><a href="#1-set-æ–¹æ³•" class="headerlink" title="1. set() æ–¹æ³•"></a>1. set() æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);  <span class="comment">// è·å–å½“å‰çº¿ç¨‹çš„ ThreadLocalMap</span></span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        map.set(<span class="built_in">this</span>, value);        <span class="comment">// this æ˜¯ ThreadLocal å®ä¾‹ä½œä¸º key</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        createMap(t, value);         <span class="comment">// é¦–æ¬¡ä½¿ç”¨ï¼Œåˆ›å»º map</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-get-æ–¹æ³•"><a href="#2-get-æ–¹æ³•" class="headerlink" title="2. get() æ–¹æ³•"></a>2. get() æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (T) e.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> setInitialValue();  <span class="comment">// è¿”å›åˆå§‹å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-æ•°æ®å­˜å‚¨ä½ç½®"><a href="#3-æ•°æ®å­˜å‚¨ä½ç½®" class="headerlink" title="3. æ•°æ®å­˜å‚¨ä½ç½®"></a>3. æ•°æ®å­˜å‚¨ä½ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[ThreadLocal.get/set] --&gt; B[Thread.currentThread]</span><br><span class="line">    B --&gt; C[thread.threadLocals]</span><br><span class="line">    C --&gt; D[ThreadLocalMap]</span><br><span class="line">    D --&gt; E[Entryæ•°ç»„]</span><br><span class="line">    E --&gt; F[&quot;key=ThreadLocalå®ä¾‹&lt;br/&gt;value=çº¿ç¨‹æœ¬åœ°å€¼&quot;]</span><br></pre></td></tr></table></figure>

<h2 id="å…³é”®è®¾è®¡"><a href="#å…³é”®è®¾è®¡" class="headerlink" title="å…³é”®è®¾è®¡"></a>å…³é”®è®¾è®¡</h2><h3 id="Entry-ä½¿ç”¨å¼±å¼•ç”¨"><a href="#Entry-ä½¿ç”¨å¼±å¼•ç”¨" class="headerlink" title="Entry ä½¿ç”¨å¼±å¼•ç”¨"></a>Entry ä½¿ç”¨å¼±å¼•ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Entry</span> <span class="keyword">extends</span> <span class="title class_">WeakReference</span>&lt;ThreadLocal&lt;?&gt;&gt; &#123;</span><br><span class="line">    Object value;</span><br><span class="line">    Entry(ThreadLocal&lt;?&gt; k, Object v) &#123;</span><br><span class="line">        <span class="built_in">super</span>(k);  <span class="comment">// key æ˜¯å¼±å¼•ç”¨</span></span><br><span class="line">        value = v; <span class="comment">// value æ˜¯å¼ºå¼•ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸ºä»€ä¹ˆ key ç”¨å¼±å¼•ç”¨ï¼Ÿ</strong> ğŸ‘‰Javaå¼•ç”¨ç±»å‹è¯¦è§£ ^weak-ref-design</p>
<ul>
<li>å½“å¤–éƒ¨ä¸å†æŒæœ‰ ThreadLocal å¼•ç”¨æ—¶ï¼ŒGC å¯ä»¥å›æ”¶ ThreadLocal å¯¹è±¡</li>
<li>é¿å… ThreadLocal å¯¹è±¡æœ¬èº«çš„å†…å­˜æ³„æ¼</li>
</ul>
<h3 id="å“ˆå¸Œå†²çªå¤„ç†"><a href="#å“ˆå¸Œå†²çªå¤„ç†" class="headerlink" title="å“ˆå¸Œå†²çªå¤„ç†"></a>å“ˆå¸Œå†²çªå¤„ç†</h3><p>ThreadLocalMap ä½¿ç”¨<strong>çº¿æ€§æ¢æµ‹æ³•</strong>è§£å†³å“ˆå¸Œå†²çªï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(ThreadLocal&lt;?&gt; key, Object value)</span> &#123;</span><br><span class="line">    Entry[] tab = table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> tab.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> key.threadLocalHashCode &amp; (len - <span class="number">1</span>);  <span class="comment">// è®¡ç®—ä¸‹æ ‡</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çº¿æ€§æ¢æµ‹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> tab[i]; e != <span class="literal">null</span>; e = tab[i = nextIndex(i, len)]) &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°ç›¸åŒ key æˆ–ç©ºæ§½ä½</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å†…å­˜æ³„æ¼é—®é¢˜"><a href="#å†…å­˜æ³„æ¼é—®é¢˜" class="headerlink" title="å†…å­˜æ³„æ¼é—®é¢˜"></a>å†…å­˜æ³„æ¼é—®é¢˜</h2><h3 id="æ³„æ¼åœºæ™¯"><a href="#æ³„æ¼åœºæ™¯" class="headerlink" title="æ³„æ¼åœºæ™¯"></a>æ³„æ¼åœºæ™¯</h3><table>
<thead>
<tr>
<th>æ¡ä»¶</th>
<th>ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td>ThreadLocal è¢«å›æ”¶ï¼ˆå¼±å¼•ç”¨ï¼‰</td>
<td>Entry.key &#x3D; null</td>
</tr>
<tr>
<td>çº¿ç¨‹ä»å­˜æ´»ï¼ˆå¦‚çº¿ç¨‹æ± ï¼‰</td>
<td>Entry.value æ— æ³•å›æ”¶</td>
</tr>
</tbody></table>
<h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p><strong>å§‹ç»ˆåœ¨ä½¿ç”¨åè°ƒç”¨ <code>remove()</code></strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocal&lt;User&gt; userContext = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    userContext.set(currentUser);</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    userContext.remove();  <span class="comment">// å¿…é¡»æ¸…ç†ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…¸å‹åº”ç”¨åœºæ™¯"><a href="#å…¸å‹åº”ç”¨åœºæ™¯" class="headerlink" title="å…¸å‹åº”ç”¨åœºæ™¯"></a>å…¸å‹åº”ç”¨åœºæ™¯</h2><table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>ç”¨æˆ·ä¸Šä¸‹æ–‡</td>
<td>å­˜å‚¨å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</td>
</tr>
<tr>
<td>æ•°æ®åº“è¿æ¥</td>
<td>ä¿è¯åŒä¸€çº¿ç¨‹ä½¿ç”¨åŒä¸€è¿æ¥</td>
</tr>
<tr>
<td>äº‹åŠ¡ç®¡ç†</td>
<td>Spring çš„äº‹åŠ¡åŒæ­¥</td>
</tr>
<tr>
<td>æ—¥æœŸæ ¼å¼åŒ–</td>
<td>SimpleDateFormat çº¿ç¨‹å®‰å…¨ä½¿ç”¨</td>
</tr>
<tr>
<td>é“¾è·¯è¿½è¸ª</td>
<td>TraceId åœ¨çº¿ç¨‹å†…ä¼ é€’</td>
</tr>
</tbody></table>
<h2 id="ä¸åŒæ­¥æœºåˆ¶å¯¹æ¯”"><a href="#ä¸åŒæ­¥æœºåˆ¶å¯¹æ¯”" class="headerlink" title="ä¸åŒæ­¥æœºåˆ¶å¯¹æ¯”"></a>ä¸åŒæ­¥æœºåˆ¶å¯¹æ¯”</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>ThreadLocal</th>
<th>synchronized&#x2F;Lock</th>
</tr>
</thead>
<tbody><tr>
<td>åŸç†</td>
<td>ç©ºé—´æ¢æ—¶é—´ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸€ä»½å‰¯æœ¬</td>
<td>æ—¶é—´æ¢ç©ºé—´ï¼Œæ’é˜Ÿè®¿é—®</td>
</tr>
<tr>
<td>æ€§èƒ½</td>
<td>æ— ç«äº‰ï¼Œæ€§èƒ½é«˜</td>
<td>æœ‰é”ç«äº‰å¼€é”€</td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>çº¿ç¨‹ç‹¬äº«æ•°æ®</td>
<td>çº¿ç¨‹å…±äº«æ•°æ®</td>
</tr>
</tbody></table>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><strong>å­˜å‚¨ä½ç½®</strong>ï¼šæ•°æ®å­˜åœ¨æ¯ä¸ªçº¿ç¨‹çš„ <code>threadLocals</code> å­—æ®µä¸­</li>
<li><strong>æ•°æ®ç»“æ„</strong>ï¼šThreadLocalMap æ˜¯è‡ªå®šä¹‰å“ˆå¸Œè¡¨ï¼ŒEntry çš„ key æ˜¯å¼±å¼•ç”¨</li>
<li><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œé¿å…åŒæ­¥å¼€é”€</li>
<li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šä½¿ç”¨åå¿…é¡»è°ƒç”¨ <code>remove()</code> é˜²æ­¢å†…å­˜æ³„æ¼</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="ä¸Šä¸€é¡µ" aria-label="ä¸Šä¸€é¡µ" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" title="ä¸‹ä¸€é¡µ" aria-label="ä¸‹ä¸€é¡µ" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">ZhiMy</span>
  </div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
